webpackJsonp([0,1],{"+X/A":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{products:[],productSelected:"",showTestPlanTable:!1}},components:{SprintTestPlanTable:i("8XtC").default},methods:{getProductsDetails:function(){var e=this;this.$api.product.getProductsDetails().then(function(t){if(t.success){e.products=t.data;var i=localStorage.getItem("productIdForTP");if(i)i=parseInt(i),e.products.some(function(e){if(e.id==i)return!0})?e.productSelected=i:e.products.length?e.productSelected=e.products[0].id:e.productSelected="";else e.products.length?e.productSelected=e.products[0].id:e.productSelected="";localStorage.setItem("productIdForTP",e.productSelected)}else e.productSelected="",localStorage.setItem("productIdForTP",""),e.$message.error(t.msg);e.showTestPlanTable=!1,e.$nextTick(function(){e.showTestPlanTable=!0})}).catch(function(t){e.productSelected="",localStorage.setItem("productIdForTP",""),e.$message.error(t.msg||t.message),e.showTestPlanTable=!1,e.$nextTick(function(){e.showTestPlanTable=!0})})},onProductChange:function(e){var t=this;e||(this.productSelected=""),localStorage.setItem("productIdForTP",this.productSelected),this.showTestPlanTable=!1,this.$nextTick(function(){t.showTestPlanTable=!0})}},created:function(){this.getProductsDetails()}},s=i("XyMi");var o=function(e){i("sEOu")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"view-wrapper"},[i("div",{staticClass:"common-top-bar-wrapper"},[i("span",[e._v("产品")]),e._v(" "),i("el-select",{attrs:{filterable:"",size:"small",placeholder:"输入搜索关键词"},on:{change:e.onProductChange},model:{value:e.productSelected,callback:function(t){e.productSelected=t},expression:"productSelected"}},e._l(e.products,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),e.showTestPlanTable?i("sprint-test-plan-table",{staticClass:"sprint-test-plan-table",attrs:{productID:e.productSelected}}):e._e()],1)},[],!1,o,"data-v-b87a74a2",null);t.default=n.exports},"/I8A":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:["dialogVisible","row"],mixins:[i("RHSg").a],data:function(){return{selectOptions:[],optionsSelected:[]}},methods:{save:function(){var e=this,t=this.optionsSelected.length;if(t){for(var i=[],a=0;a<t;a++)i.push(this.optionsSelected[a].id);this.$api.msgPushAccount.bindGroups({accountId:this.row.id,groupIds:i}).then(function(t){if(t.success){for(var i=function(t){e.row.groups.some(function(i){if(i.id==e.optionsSelected[t].id)return!0})||e.row.groups.push(e.optionsSelected[t])},a=0;a<e.optionsSelected.length;a++){i(a)}e.closeDialog()}else e.$message.error(t.msg)}).catch(function(t){e.$message({message:"绑定失败"+t.msg||t.message,type:"error"})})}},getUnRelatedGroups:function(){var e=this;this.$api.msgPushAccount.getUnRelatedGroups({accountId:this.row.id}).then(function(t){t.success?e.selectOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(" 获取未关联组别失败"+t.msg||t.message)})}},created:function(){this.getUnRelatedGroups()}},s=i("XyMi");var o=function(e){i("gMBS")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"关联组别",width:"45%",visible:e.dialogVisible,"append-to-body":!0,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"请选择组别"}},[i("el-select",{staticStyle:{width:"99%"},attrs:{"value-key":"id",multiple:"",filterable:"",clearable:"",size:"medium",placeholder:"请选择组别"},model:{value:e.optionsSelected,callback:function(t){e.optionsSelected=t},expression:"optionsSelected"}},e._l(e.selectOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])],1)},[],!1,o,"data-v-4cb5c7bd",null);t.default=n.exports},"0KRM":function(e,t){},"0MN6":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o={props:["dialogVisible","dialogFormData","row"],mixins:[i("RHSg").a],data:function(){return{dialogForm:JSON.parse(s()(this.dialogFormData)),platformOptions:[{id:"jira",name:"jira"},{id:"zentao",name:"禅道"}],projectOptions:[],issueTypeOptions:[],defectCustomFieldsOptions:[],customFieldOptions:[],rules:{platform:[{type:"string",required:!0,message:"请选择待关联项目所在平台",trigger:"change"}]},severityMapPlaceholder:'JSON格式,形如{"Critical":"致命", "Major":"严重"}',statusMapPlaceholder:'JSON格式,形如{"打开":"新建","已接受":"处理中":"正在处理":"处理中","reopen":"重新打开"}',severityMapFormatError:!1,statusMapFormatError:!1,systemField:"",systemFieldOld:"",platformField:""}},methods:{onPlatformChange:function(e){e&&(this.dialogForm.project=null,this.platformField="",this.dialogForm.customFieldMapArray=[],this.getProjectOptions(),"jira"==this.dialogForm.platform?(this.getJiraIssueTypeOptions(),this.getJiraIssueCustomFieldOptions()):"zentao"==this.dialogForm.platform&&this.getZentaoDefectCustomFieldOptions())},getProjectOptions:function(){var e=this;this.projectOptions=[],this.$api.project.getPlatformProjects({platform:this.dialogForm.platform}).then(function(t){t.success?e.projectOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},getSystomFieldsOptions:function(){var e=this;this.systomFieldsOptions=[],this.$api.project.getSystomFieldsOptions().then(function(t){t.success?e.systomFieldsOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},addCustomFieldMap:function(){this.systemField?this.platformField?this.dialogForm.customFieldMap.hasOwnProperty(this.systemField)?this.$message.warning("已添加该系统自定义字段，请选择其它字段"):(this.dialogForm.customFieldMap[this.systemField]=this.platformField,this.dialogForm.customFieldMapArray.splice(0,0,{key:this.systemField,value:this.platformField})):this.$alert("请选择关联平台自定义字段","提示",{confirmButtonText:"确定"}):this.$alert("请选择系统自定义字段","提示",{confirmButtonText:"确定"})},delCustomFieldMap:function(e,t,i){delete this.dialogForm.customFieldMap[i],this.dialogForm.customFieldMapArray.splice(t,1)},onSystemFieldSelectChange:function(e,t){if(this.dialogForm.customFieldMap.hasOwnProperty(e))return this.$message.warning("该系统自定义字段已存在，请选择其它字段"),void(this.dialogForm.customFieldMapArray[t].key=this.systemFieldOld)},onSystemFieldVisibleChange:function(e,t){e&&(this.systemFieldOld=t)},getJiraIssueTypeOptions:function(){var e=this;this.issueTypeOptions=[],this.$api.project.getJiraIssueTypes().then(function(t){t.success?e.issueTypeOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},getJiraIssueCustomFieldOptions:function(){var e=this;this.customFieldOptions=[],this.$api.project.getJiraIssueCustomFields().then(function(t){t.success?e.customFieldOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},getZentaoDefectCustomFieldOptions:function(){var e=this;this.customFieldOptions=[],this.$api.project.getZentaoDefectCustomFields().then(function(t){t.success?e.customFieldOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},bindProject:function(){var e=this;if(this.severityMapFormatError)this.$alert("缺陷严重级别映射配置格式错误，请按json格式填写","提示",{confirmButtonText:"确定"});else if(this.statusMapFormatError)this.$alert("缺陷状态映射配置格式错误，请按json格式填写","提示",{confirmButtonText:"确定"});else{this.dialogForm.customFieldMap={};for(var t=0;t<this.dialogForm.customFieldMapArray.length;t++)this.dialogForm.customFieldMap[this.dialogForm.customFieldMapArray[t].key]=this.dialogForm.customFieldMapArray[t].value;var i={projectId:this.row.id,platform:this.dialogForm.platform,platformProjectId:this.dialogForm.project.id,platformProjectName:this.dialogForm.project.name,defectIssueTypeId:this.dialogForm.defectIssueTypeId,defectStatusMap:this.dialogForm.defectStatusMap,defectSeverityMap:this.dialogForm.defectSeverityMap,customFieldMap:this.dialogForm.customFieldMap};this.$api.project.bindPlatformProject(i).then(function(t){if(t.success){for(var i in e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);e.closeDialog()}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},unbindProject:function(){var e=this,t={projectId:this.row.id};this.$api.project.unbindPlatformProject(t).then(function(t){if(t.success){for(var i in e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);e.closeDialog()}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},clearProject:function(){this.dialogForm.project=null},onSeverityMapBlur:function(){try{var e=this.dialogForm.defectSeverityMap;if(e=e.trim()){if(!e.startsWith("{"))return this.severityMapFormatError=!0,void this.$message.error("缺陷严重级别映射配置格式错误，请按json格式填写");JSON.parse(e)}this.severityMapFormatError=!1}catch(e){this.severityMapFormatError=!0,this.$message.error("缺陷严重级别映射配置格式错误，请按json格式填写:"+e.message)}},onStatusMapBlur:function(){try{var e=this.dialogForm.defectStatusMap;if(e=e.trim()){if(!e.startsWith("{"))return this.statusMapFormatError=!0,void this.$message.error("缺陷状态映射配置格式错误，请按json格式填写");JSON.parse(e)}this.statusMapFormatError=!1}catch(e){this.statusMapFormatError=!0,this.$message.error("缺陷状态映射配置格式错误，请按json格式填写:"+e.message)}},save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.project?t.bindProject():t.unbindProject())})}},created:function(){this.getProjectOptions(),this.getSystomFieldsOptions(),"jira"==this.dialogForm.platform?(this.getJiraIssueTypeOptions(),this.getJiraIssueCustomFieldOptions()):"zentao"==this.dialogForm.platform&&this.getZentaoDefectCustomFieldOptions()}},n=i("XyMi");var r=function(e){i("OHla")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"关联项目",width:"45%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"平台",prop:"platform"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:!1,filterable:"",placeholder:"请选择待关联项目所在平台"},on:{change:e.onPlatformChange},model:{value:e.dialogForm.platform,callback:function(t){e.$set(e.dialogForm,"platform",t)},expression:"dialogForm.platform"}},e._l(e.platformOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"关联项目",prop:"project"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:!1,"value-key":"id",clearable:"",filterable:"",placeholder:"请选择需要关联的项目"},on:{clear:e.clearProject},model:{value:e.dialogForm.project,callback:function(t){e.$set(e.dialogForm,"project",t)},expression:"dialogForm.project"}},e._l(e.projectOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1),e._v(" "),i("br"),e._v(" "),i("span",[e._v("注：如果需要取消关联，清空已关联项目，执行保存即可")])],1),e._v(" "),"jira"==e.dialogForm.platform?i("el-form-item",{attrs:{label:"缺陷归属类型",prop:"defectIssueTypeId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择缺陷归属类型"},model:{value:e.dialogForm.defectIssueTypeId,callback:function(t){e.$set(e.dialogForm,"defectIssueTypeId",t)},expression:"dialogForm.defectIssueTypeId"}},e._l(e.issueTypeOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),e._v(" "),"jira"==e.dialogForm.platform?i("el-form-item",{attrs:{label:"自定义字段映射"}},[i("div",[i("el-select",{staticStyle:{width:"45%"},attrs:{multiple:!1,filterable:"",placeholder:"请选择系统自定义字段"},model:{value:e.systemField,callback:function(t){e.systemField=t},expression:"systemField"}},e._l(e.systomFieldsOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),i("el-select",{staticStyle:{width:"45%"},attrs:{multiple:!1,filterable:"",placeholder:"请选择关联平台自定义字段"},model:{value:e.platformField,callback:function(t){e.platformField=t},expression:"platformField"}},e._l(e.customFieldOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),i("span",{staticClass:"my-icon-wrapper"},[i("i",{staticClass:"el-icon-plus",on:{click:e.addCustomFieldMap}})])],1)]):e._e(),e._v(" "),e._l(e.dialogForm.customFieldMapArray,function(t,a){return i("el-form-item",{key:t.key},[i("el-select",{staticStyle:{width:"45%"},attrs:{multiple:!1,filterable:"",placeholder:"请选择系统自定义字段"},on:{change:function(t){return e.onSystemFieldSelectChange(t,a)},"visible-change":function(i){return e.onSystemFieldVisibleChange(i,t.key)}},model:{value:t.key,callback:function(i){e.$set(t,"key",i)},expression:"item.key"}},e._l(e.systomFieldsOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),i("el-select",{staticStyle:{width:"45%"},attrs:{multiple:!1,filterable:"",placeholder:"请选择关联平台自定义字段"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}},e._l(e.customFieldOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),i("span",{staticClass:"my-icon-wrapper"},[i("i",{staticClass:"el-icon-delete",on:{click:function(i){return e.delCustomFieldMap(i,a,t.key)}}})])],1)}),e._v(" "),i("el-form-item",{attrs:{label:"缺陷严重级别映射",prop:"defectSeverityMap"}},[i("el-tooltip",{attrs:{effect:"dark",content:"系统缺陷严重级别划分为：致命，严重，一般，轻微；如果关联项目的缺陷严重级别划分和系统不一致，则需要为其建立映射关系",placement:"right-start"}},[i("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}})]),e._v(" "),i("el-input",{attrs:{placeholder:e.severityMapPlaceholder,type:"textarea",autosize:{minRows:2}},on:{blur:e.onSeverityMapBlur},model:{value:e.dialogForm.defectSeverityMap,callback:function(t){e.$set(e.dialogForm,"defectSeverityMap",t)},expression:"dialogForm.defectSeverityMap"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"缺陷状态映射",prop:"defectStatusMap"}},[i("el-tooltip",{attrs:{effect:"dark",content:"系统缺陷状态划分为：新建，处理中，延期处理，已解决，已拒绝，已关闭，重新打开，如果关联项目的缺陷状态和系统不一致，则需要为其建立映射关系",placement:"right-start"}},[i("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}})]),e._v(" "),i("el-input",{attrs:{placeholder:e.statusMapPlaceholder,type:"textarea",autosize:{minRows:2}},on:{blur:e.onStatusMapBlur},model:{value:e.dialogForm.defectStatusMap,callback:function(t){e.$set(e.dialogForm,"defectStatusMap",t)},expression:"dialogForm.defectStatusMap"}})],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],2)],1)])},[],!1,r,"data-v-62a79cb3",null);t.default=l.exports},"0xvS":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var a={data:function(){return{buttonSize:"small"}}}},"164l":function(e,t){},"1alW":function(e,t,i){var a=i("kM2E");a(a.S,"Number",{isInteger:i("AKgy")})},"2AQu":function(e,t){},"2N7Y":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["sprintDialogVisible","sprintDialogTitle","sprintData","tableData","statusOptions","row","total","pageSize"],data:function(){return{sprintForm:s()({},this.sprintData),productOptions:[],rules:{name:[{type:"string",required:!0,message:"请填写迭代项目名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],productIds:[{type:"array",required:!0,message:"请选择迭代要关联的产品",trigger:"change"}],beginTime:[{type:"string",required:!0,message:"请选择预估起始时间",trigger:"change"}],endTime:[{type:"string",required:!0,message:"请选择预估结束时间",trigger:"change"}],desc:[{min:0,max:500,message:"不能超过 500 个字符",trigger:"blur"}],isActive:[{type:"boolean",required:!0,message:"请选是否启用",trigger:"blur"}]}}},methods:{onCloseDialog:function(){this.closeDialog()},closeDialog:function(){this.$emit("update:sprintDialogVisible",!1)},addSprint:function(){var e=this;this.$api.sprint.addSprint(this.sprintForm).then(function(t){t.success?(e.tableData.splice(0,0,t.data),e.$emit("update:total",e.total+1),e.tableData.length>e.pageSize&&e.tableData.splice(-1,1),e.closeDialog(),e.$message.success(t.msg)):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},updateSprint:function(){var e=this;this.$api.sprint.updateSprint(this.sprintForm).then(function(t){if(t.success){for(var i in e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);e.closeDialog()}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(new Date(t.sprintForm.beginTime.replace(/-/g,"/")).getTime()>new Date(t.sprintForm.endTime.replace(/-/g,"/")).getTime())return void t.$message.error("开始时间不能晚于结束时间");t.sprintForm.sprintId?t.updateSprint():t.addSprint()}})}},created:function(){var e=this;this.$api.zentaoProduct.queryProductsDetails().then(function(t){t.success?e.productOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},n=i("XyMi");var r=function(e){i("t03P")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.sprintDialogTitle,width:"30%",visible:e.sprintDialogVisible,"show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!0},on:{close:e.onCloseDialog}},[i("div",{staticClass:"user-dialog-div"},[i("el-form",{ref:"sprintForm",attrs:{model:e.sprintForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{staticStyle:{width:"99%"},model:{value:e.sprintForm.name,callback:function(t){e.$set(e.sprintForm,"name",t)},expression:"sprintForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估开始时间",prop:"beginTime"}},[i("el-date-picker",{staticStyle:{width:"99%"},attrs:{type:"date",size:"small",placeholder:"预估开始时间","value-format":"yyyy-MM-dd"},model:{value:e.sprintForm.beginTime,callback:function(t){e.$set(e.sprintForm,"beginTime",t)},expression:"sprintForm.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估结束时间",prop:"endTime"}},[i("el-date-picker",{staticStyle:{width:"99%"},attrs:{type:"date",size:"small",placeholder:"预估结束时间","value-format":"yyyy-MM-dd"},model:{value:e.sprintForm.endTime,callback:function(t){e.$set(e.sprintForm,"endTime",t)},expression:"sprintForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"desc"}},[i("el-input",{staticStyle:{width:"99%"},attrs:{type:"textarea"},model:{value:e.sprintForm.desc,callback:function(t){e.$set(e.sprintForm,"desc",t)},expression:"sprintForm.desc"}})],1),e._v(" "),"修改迭代项目"==e.sprintDialogTitle?i("el-form-item",{attrs:{label:"是否启用",prop:"isActive"}},[i("el-radio-group",{model:{value:e.sprintForm.isActive,callback:function(t){e.$set(e.sprintForm,"isActive",t)},expression:"sprintForm.isActive"}},e._l(e.statusOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),e._v(" "),i("el-form-item",[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("sprintForm")}}},[e._v("保存")])],1)],1)],1)])},[],!1,r,"data-v-36d5dfb0",null);t.default=l.exports},"2WM9":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:["dialogVisible","row"],mixins:[i("RHSg").a],data:function(){return{selectOptions:[],optionsSelected:[]}},methods:{save:function(){var e=this,t=this.optionsSelected.length;if(t){for(var i=[],a=0;a<t;a++)i.push(this.optionsSelected[a].id);this.$api.sysUser.bindGroups({userId:this.row.id,groupIds:i}).then(function(t){if(t.success){e.$message.success(t.msg);for(var i=function(t){e.row.groups.some(function(i){if(i.id==e.optionsSelected[t].id)return!0})||e.row.groups.push(e.optionsSelected[t])},a=0;a<e.optionsSelected.length;a++){i(a)}e.closeDialog()}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},getUnRelatedGroups:function(){var e=this;this.$api.sysUser.getUnRelatedGroups({userId:this.row.id}).then(function(t){t.success?e.selectOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},created:function(){this.getUnRelatedGroups()}},s=i("XyMi");var o=function(e){i("uPQg")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"关联组别",visible:e.dialogVisible,width:e.dialogWidth,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{attrs:{"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"组别名称"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"id",multiple:"",filterable:"",clearable:"",size:"medium",placeholder:"请选择组别"},model:{value:e.optionsSelected,callback:function(t){e.optionsSelected=t},expression:"optionsSelected"}},e._l(e.selectOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])],1)],1)])},[],!1,o,"data-v-c627852c",null);t.default=n.exports},"2oco":function(e,t){},"2wH0":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("w7g/"),s=i("YHwu"),o={components:{NavBar:a.default,SubMainContent:s.default},mounted:function(){this.$customUtils.headerMenu.initMenuComponent()}},n=i("XyMi"),r=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("nav-bar"),this._v(" "),t("sub-main-content")],1)},[],!1,null,null,null);t.default=r.exports},"3IJ6":function(e,t){},"3Wlr":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XyMi"),s=Object(a.a)({props:["defectsResolvedIndividual"],data:function(){return{totalRows:this.defectsResolvedIndividual.length,pageSizes:[10,20,30,40,50,80,100,150],pageSize:10,currentPage:1}},methods:{handleSizeChange:function(e){this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-table",{attrs:{data:e.defectsResolvedIndividual.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"",stripe:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"resolver",label:"姓名","min-width":"16%","show-overflow-tooltip":"","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"totalResolved",label:"解决缺陷数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"totalRaised",label:"引发缺陷数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"DI",label:"缺陷密度值","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"deadly",label:"致命缺陷数","show-overflow-tooltip":"","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"critical",label:"严重缺陷总数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"general",label:"一般缺陷数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"轻微缺陷数",prop:"minor","min-width":"14%","header-align":"center",align:"center"}})],1),e._v(" "),i("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.totalRows,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},[],!1,null,null,null);t.default=s.exports},"49DB":function(e,t){},"4Fr2":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),s=i.n(a),o=i("pFYg"),n=i.n(o),r=i("VLYx"),l=i("0MN6"),c=(i("NYxO"),i("UDo9")),u=i("0xvS"),d={mixins:[c.a,u.a],components:{ProjectDialog:r.default,BindProjectDialog:l.default},data:function(){return{queryForm:{name:"",status:""},projectData:null,statusOptions:[{label:"未开始",value:"未开始"},{label:"进行中",value:"进行中"},{label:"已结束",value:"已结束"}],dialogVisible:!1,bindProjectDlgVisible:!1,dialogTitle:"",loading:!1,loadingText:""}},methods:{addProject:function(){this.dialogVisible||(this.projectData={name:"",beginTime:"",endTime:"",status:"进行中",desc:""},this.dialogVisible=!0,this.dialogTitle="新增项目")},editProject:function(e,t){this.dialogVisible||(this.projectData={id:t.id,name:t.name,productId:t.productId,beginTime:t.beginTime,endTime:t.endTime,status:t.status,desc:t.desc},this.row=t,this.dialogVisible=!0,this.dialogTitle="修改项目")},bindProject:function(e,t){this.associatedProjectData={platform:"jira",project:null,defectIssueTypeId:"",defectSourceField:"",defectSeverityField:"",defectStatusMap:"",defectSeverityMap:"",customFieldMap:{},customFieldMapArray:[]},this.row=t,this.bindProjectDlgVisible=!0},changeProjectAssociated:function(e,t){var i=n()(t.customFieldMap)===n()("")?JSON.parse(t.customFieldMap):t.customFieldMap,a=[];for(var o in i)a.push({key:o,value:i[o]});this.associatedProjectData=s()({platform:t.platform,project:{name:t.platformProjectName,id:t.platformProjectId},defectIssueTypeId:t.defectIssueTypeId,defectSourceField:t.defectSourceField,defectSeverityField:t.defectSeverityField,defectStatusMap:t.defectStatusMap,defectSeverityMap:t.defectSeverityMap,customFieldMap:i,customFieldMapArray:{}},"customFieldMapArray",a),this.row=t,this.bindProjectDlgVisible=!0}},updated:function(){this.setTableBodySize()},created:function(){this.queryRowsAPI=this.$api.project.getProjects,this.queryRows()}},p=i("XyMi");var m=function(e){i("B10F")},g=Object(p.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入项目名称",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目状态"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addProject}},[e._v("新增项目")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.project.deleteProjects)}}},[e._v("删除项目")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,"cell-class-name":e.getCellClassName,"highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"项目名称","header-align":"center",align:"left","min-width":"180px","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"项目状态",width:"80px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"beginTime",label:"预估开始日期",width:"110px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"endTime",label:"预估结束日期",width:"110px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"项目描述","header-align":"center",align:"center","show-overflow-tooltip":"","min-width":"200px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"platformProjectName",label:"关联项目","header-align":"center",align:"center","show-overflow-tooltip":"","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.platformProjectName?i("el-link",{attrs:{type:"primary"},on:{click:function(i){return e.changeProjectAssociated(t.$index,t.row)}}},[e._v("\n                    "+e._s(t.row.platformProjectName)+"\n                    "),i("i",{staticClass:"el-icon-edit"})]):i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.bindProject(t.$index,t.row)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e._v("关联项目\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"更新人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editProject(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.project.deleteProject)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.dialogVisible?i("project-dialog",{attrs:{dialogVisible:e.dialogVisible,dialogTitle:e.dialogTitle,tableData:e.tableData,statusOptions:e.statusOptions,row:e.row,dialogFormData:e.projectData},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t}}}):e._e(),e._v(" "),e.bindProjectDlgVisible?i("bind-project-dialog",{attrs:{dialogVisible:e.bindProjectDlgVisible,row:e.row,dialogFormData:e.associatedProjectData},on:{"update:dialogVisible":function(t){e.bindProjectDlgVisible=t},"update:dialog-visible":function(t){e.bindProjectDlgVisible=t}}}):e._e()],1)},[],!1,m,"data-v-3e5ff786",null);t.default=g.exports},"4WTo":function(e,t,i){var a=i("NWt+");e.exports=function(e,t){var i=[];return a(e,!1,i.push,i,t),i}},"4tkw":function(e,t){},"57qO":function(e,t){},"5C0g":function(e,t){},"5zde":function(e,t,i){i("zQR9"),i("qyJz"),e.exports=i("FeBl").Array.from},"66MH":function(e,t){},"6W0o":function(e,t){},"6bu4":function(e,t){},"6qSS":function(e,t){},"6uj/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XyMi");var s=function(e){i("164l")},o=Object(a.a)({props:["roleID","relatedMenus"],data:function(){return{defaultProps:{label:"name",children:"children",isLeaf:"isLeaf"},treeData:[],emptyText:"未获取到数据，请重新打开或刷新页面重试"}},created:function(){var e=this;this.$api.sysMenu.getSysMenuTree({parentId:-1,recursive:!0}).then(function(t){t.success?(e.treeData=t.data,e.$api.sysRole.getRoleRelatedMenus({roleId:e.roleID}).then(function(t){if(t.success){e.$emit("update:relatedMenus",t.data);for(var i=0;i<t.data.length;i++)e.$refs.sysMenuTree.setChecked(t.data[i],!0,!1)}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},function(){var e=this.$createElement;return(this._self._c||e)("el-tree",{ref:"sysMenuTree",attrs:{"empty-text":"emptyText",data:this.treeData,props:this.defaultProps,"expand-on-click-node":!1,"show-checkbox":"","node-key":"id","default-expand-all":"","check-strictly":""}})},[],!1,s,"data-v-5ace4070",null);t.default=o.exports},"7Doy":function(e,t,i){var a=i("EqjI"),s=i("7UMu"),o=i("dSzd")("species");e.exports=function(e){var t;return s(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!s(t.prototype)||(t=void 0),a(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"7EcF":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("w7g/"),s=i("YHwu"),o={components:{NavBar:a.default,SubMainContent:s.default}},n=i("XyMi");var r=function(e){i("aBlS")},l=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("div",[this._v("\n            主内容区21\n        ")])])],1)},[],!1,r,"data-v-56521c25",null);t.default=l.exports},"7feG":function(e,t){},"8Ice":function(e,t){},"8XtC":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),o=i("//Fk"),n=i.n(o),r=i("woOf"),l=i.n(r),c=i("NYxO"),u=i("UDo9"),d=i("0xvS"),p=i("L+JL"),m=i("Pjag"),g=i("aM3j"),h={mixins:[u.a,d.a],props:["productID"],data:function(){return{queryForm:{startTime:"",endTime:"",finishStartTime:"",finishEndTime:"",name:"",status:[],creater:"",envId:"",sprintId:"",productId:this.productID},pageSizes:[10,15,20,30,40,50,100,150],pageSize:15,planData:null,planDialogVisible:!1,planDialogTitle:"",bindCaseDialogVisible:!1,sprintCaseIDList:[],baseCaseIDList:[],planDetailVisible:!1,tabPanelName:"测试计划详情",sprintOptions:[]}},components:{TestPlanDialog:p.default,BindCaseDialog:m.default,TestPlanDetail:g.default},methods:{queryRows:function(e){var t=this;"clickQuery"==e&&(this.currentPage=1);var i=l()({},this.queryForm);if(i.pageSize=this.pageSize,i.pageNo=this.currentPage,i.status=i.status.join(","),!this.productID)return this.total=0,void(this.tableData=[]);this.$api.sprintTestPlan.getTestPlans(i).then(function(e){e.success?(t.total=e.data.total,t.tableData=e.data.rows):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e.msg)})},newPlan:function(){this.planDialogVisible||(this.planData={name:"",desc:"",beginTime:"",endTime:"",sprint:this.sprintOptions.length?this.sprintOptions[0]:null,projectIds:[],envNames:[],sprintId:null,productId:this.productID},this.planDialogVisible=!0,this.planDialogTitle="新增计划")},editPlan:function(e,t){var i=this;this.planDialogVisible||this.getTestPlanDetail(t.id).then(function(e){for(var a in t)t[a]=e[a];var s=t.projectIds.split(",").map(function(e){return parseInt(e)});i.planData={id:t.id,name:t.name,desc:t.desc,beginTime:t.beginTime,endTime:t.endTime,sprint:{id:t.sprintId,name:t.sprintName},projectIds:s,productId:t.productId,envNames:t.envNames.split(",")},i.row=t,i.planDialogVisible=!0,i.planDialogTitle="修改计划"}).catch(function(e){i.$message.error(e.msg||e.message)})},bindCase:function(e,t){this.bindCaseDialogVisible||(this.bindCaseDialogVisible=!0,this.row=t)},viewPlanDetail:function(e,t){this.planDetailVisible||(this.planDetailVisible=!0,this.row=t)},removePlanDetailTab:function(){this.planDetailVisible=!1},clickRow:function(e,t,i){},getProductSprintsDetails:function(){var e=this;this.productID?this.$api.product.getProductSprintsDetails({productId:this.productID}).then(function(t){t.success?e.sprintOptions=t.data:(e.sprintOptions=[],e.$message.error(t.msg))}).catch(function(t){e.$message.error(t.msg),e.sprintOptions=[]}):this.sprintOptions=[]},getTestPlanDetail:function(e){var t=this;return new n.a(function(i,a){t.$api.sprintTestPlan.getTestPlanDetail({id:e}).then(function(e){e.success?i(e.data):a(e)}).catch(function(e){a(e)})})}},watch:{sprint:function(){this.planDetailVisible=!1,this.currentPage=1,this.queryRows()}},computed:s()({},Object(c.b)({suiteType:function(e){return e.sprintCaseSuite.suiteType},suiteID:function(e){return e.sprintCaseSuite.suiteID}}),{createTime:{get:function(){return this.queryForm.startTime&&this.queryForm.endTime?[this.queryForm.startTime,this.queryForm.endTime]:[]},set:function(e){e?(this.queryForm.startTime=e[0],this.queryForm.endTime=e[1]):(this.queryForm.startTime="",this.queryForm.endTime="")}},finishTime:{get:function(){return this.queryForm.finishStartTime&&this.queryForm.finishEndTime?[this.queryForm.finishStartTime,this.queryForm.finishEndTime]:[]},set:function(e){e?(this.queryForm.finishStartTime=e[0],this.queryForm.finishEndTime=e[1]):(this.queryForm.finishStartTime="",this.queryForm.finishEndTime="")}}}),created:function(){this.queryRows(),this.getProductSprintsDetails()},updated:function(){this.setTableBodySize()}},f=i("XyMi");var v=function(e){i("PLqY")},b=Object(f.a)(h,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[e.planDetailVisible?e._e():i("div",[i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.newPlan}},[e._v("新增计划")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.sprintTestPlan.deleteTestPlans)}}},[e._v("删除计划")])],1)],1),e._v(" "),i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"创建时间"}},[i("el-date-picker",{staticStyle:{width:"330px"},attrs:{type:"datetimerange",placeholder:"选择日期和时间","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",size:"mini","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"完成时间"}},[i("el-date-picker",{staticStyle:{width:"330px"},attrs:{type:"datetimerange",placeholder:"选择日期和时间","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",size:"mini","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.finishTime,callback:function(t){e.finishTime=t},expression:"finishTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"计划名称"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入计划名称",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"计划状态"}},[i("el-select",{staticStyle:{width:"235px"},attrs:{multiple:!0,clearable:""},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},[i("el-option",{attrs:{label:"未执行",value:"未执行"}}),e._v(" "),i("el-option",{attrs:{label:"未完成",value:"未完成"}}),e._v(" "),i("el-option",{attrs:{label:"已完成",value:"已完成"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"关联迭代"}},[i("el-select",{attrs:{clearable:""},model:{value:e.queryForm.sprintId,callback:function(t){e.$set(e.queryForm,"sprintId",t)},expression:"queryForm.sprintId"}},e._l(e.sprintOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"创建人"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入创建人",clearable:""},model:{value:e.queryForm.creater,callback:function(t){e.$set(e.queryForm,"creater",t)},expression:"queryForm.creater"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"执行环境"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入执行环境",clearable:""},model:{value:e.queryForm.environment,callback:function(t){e.$set(e.queryForm,"environment",t)},expression:"queryForm.environment"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table testplan-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,lazy:!1,"highlight-current-row":""},on:{"selection-change":e.onSelectChange,"row-click":e.clickRow}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"计划名称","show-overflow-tooltip":"","header-align":"center","min-width":"220px",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{attrs:{type:"primary"},on:{click:function(i){return e.viewPlanDetail(t.$index,t.row)}}},[e._v(e._s(t.row.name))])]}}],null,!1,2688473121)}),e._v(" "),i("el-table-column",{attrs:{prop:"sprintName",label:"关联迭代","show-overflow-tooltip":"",width:"120px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"projectNames",label:"关联项目","show-overflow-tooltip":"",width:"180px","min-width":"100","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"90px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"150px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"finishTime",label:"完成时间",width:"150px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"envNames",label:"执行环境",width:"100px","header-align":"center","show-overflow-tooltip":"",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"progress",label:"测试进度",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Math.round(t.row.caseNumRelated?(t.row.caseNumExecuted-t.row.caseNumBlocked)/t.row.caseNumRelated*100:0))+"%("+e._s(t.row.caseNumExecuted-t.row.caseNumBlocked)+"/"+e._s(t.row.caseNumRelated)+")")]}}],null,!1,1721780685)}),e._v(" "),i("el-table-column",{attrs:{prop:"passRate",label:"通过率",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Math.round(t.row.caseNumRelated?t.row.caseNumSuccess/t.row.caseNumRelated*100:0))+"%("+e._s(t.row.caseNumSuccess)+"/"+e._s(t.row.caseNumRelated)+")")]}}],null,!1,2233759724)}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态",width:"60px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"350px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.bindCase(t.$index,t.row)}}},[e._v("关联用例")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.viewPlanDetail(t.$index,t.row)}}},[e._v("进入计划")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editPlan(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.sprintTestPlan.deleteTestPlan)}}},[e._v("删除")])]}}],null,!1,3394646722)})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.planDialogVisible?i("test-plan-dialog",{attrs:{dialogVisible:e.planDialogVisible,dialogTitle:e.planDialogTitle,tableData:e.tableData,dialogFormData:e.planData,row:e.row,sprintOptions:e.sprintOptions},on:{"update:dialogVisible":function(t){e.planDialogVisible=t},"update:dialog-visible":function(t){e.planDialogVisible=t}}}):e._e(),e._v(" "),e.bindCaseDialogVisible?i("bind-case-dialog",{attrs:{dialogVisible:e.bindCaseDialogVisible,planRow:e.row},on:{"update:dialogVisible":function(t){e.bindCaseDialogVisible=t},"update:dialog-visible":function(t){e.bindCaseDialogVisible=t}}}):e._e()],1),e._v(" "),e.planDetailVisible?i("test-plan-detail",{attrs:{planRow:e.row,planDetailVisible:e.planDetailVisible},on:{"update:planDetailVisible":function(t){e.planDetailVisible=t},"update:plan-detail-visible":function(t){e.planDetailVisible=t}}}):e._e()],1)},[],!1,v,null,null);t.default=b.exports},"9Bbf":function(e,t,i){"use strict";var a=i("kM2E");e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"9C8M":function(e,t,i){"use strict";var a=i("evD5").f,s=i("Yobk"),o=i("xH/j"),n=i("+ZMJ"),r=i("2KxR"),l=i("NWt+"),c=i("vIB/"),u=i("EGZi"),d=i("bRrM"),p=i("+E39"),m=i("06OY").fastKey,g=i("LIJb"),h=p?"_s":"size",f=function(e,t){var i,a=m(t);if("F"!==a)return e._i[a];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,t,i,c){var u=e(function(e,a){r(e,u,t,"_i"),e._t=t,e._i=s(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=a&&l(a,i,e[c],e)});return o(u.prototype,{clear:function(){for(var e=g(this,t),i=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete i[a.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var i=g(this,t),a=f(i,e);if(a){var s=a.n,o=a.p;delete i._i[a.i],a.r=!0,o&&(o.n=s),s&&(s.p=o),i._f==a&&(i._f=s),i._l==a&&(i._l=o),i[h]--}return!!a},forEach:function(e){g(this,t);for(var i,a=n(e,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(a(i.v,i.k,this);i&&i.r;)i=i.p},has:function(e){return!!f(g(this,t),e)}}),p&&a(u.prototype,"size",{get:function(){return g(this,t)[h]}}),u},def:function(e,t,i){var a,s,o=f(e,t);return o?o.v=i:(e._l=o={i:s=m(t,!0),k:t,v:i,p:a=e._l,n:void 0,r:!1},e._f||(e._f=o),a&&(a.n=o),e[h]++,"F"!==s&&(e._i[s]=o)),e},getEntry:f,setStrong:function(e,t,i){c(e,t,function(e,i){this._t=g(e,t),this._k=i,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))},i?"entries":"values",!i,!0),d(t)}}},"9Psi":function(e,t){},"9bBU":function(e,t,i){i("mClu");var a=i("FeBl").Object;e.exports=function(e,t,i){return a.defineProperty(e,t,i)}},A750:function(e,t){},AKgy:function(e,t,i){var a=i("EqjI"),s=Math.floor;e.exports=function(e){return!a(e)&&isFinite(e)&&s(e)===e}},ALrJ:function(e,t,i){var a=i("+ZMJ"),s=i("MU5D"),o=i("sB3e"),n=i("QRG4"),r=i("oeOm");e.exports=function(e,t){var i=1==e,l=2==e,c=3==e,u=4==e,d=6==e,p=5==e||d,m=t||r;return function(t,r,g){for(var h,f,v=o(t),b=s(v),y=a(r,g,3),_=n(b.length),w=0,S=i?m(t,_):l?m(t,0):void 0;_>w;w++)if((p||w in b)&&(f=y(h=b[w],w,v),e))if(i)S[w]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return w;case 2:S.push(h)}else if(u)return!1;return d?-1:c||u?u:S}}},Amp4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o=i("//Fk"),n=i.n(o),r=i("c/Tr"),l=i.n(r),c=i("lHA8"),u=i.n(c),d=i("3Wlr"),p=i("XoTJ"),m=i("avim"),g=i("BKUr"),h=i("gApy"),f=i.n(h),v={name:"doughnut-pie-chart",props:["pieData","pieColor","pieTitle","seriesRadius","hideLegendValue","seriesLabelFormatter","tooltipFormatter","echartPicIdDict","keyForEchartId","showLabel","seriesCenter"],data:function(){return{elementID:"",color:[],legendData:[],centerTextLeft:0,centerTextTop:0}},methods:{getTextPixelWith:function(e,t){var i=document.createElement("canvas").getContext("2d");return i.font=t,i.measureText(e).width}},created:function(){if(this.elementID=f()(),this.echartPicIdDict[this.keyForEchartId]=this.elementID,this.pieColor)for(var e=0;e<this.pieData.seriesData.length;e++)this.legendData.push({name:this.pieData.seriesData[e].name,textStyle:{color:this.pieColor[this.pieData.seriesData[e].name]}}),this.color.push(this.pieColor[this.pieData.seriesData[e].name]);else for(var t=0;t<this.pieData.seriesData.length;t++)this.legendData.push({name:this.pieData.seriesData[t].name})},mounted:function(){var e=this,t=document.getElementById(this.elementID),i=window.getComputedStyle(t).width;i=parseFloat(i.split("px")[0]);var a=window.getComputedStyle(t).height;a=parseFloat(a.split("px")[0]);for(var s=this.pieData.centerText.split("\n"),o=0,n=0;n<s.length;n++){var r=this.getTextPixelWith(s[n],'15px "Microsoft YaHei"');o<r&&(o=r)}var l=.4,c=.6;if(this.seriesCenter){var u=this.seriesCenter[0],d=u.indexOf("%");l=-1!=d?parseInt(u.substring(0,d))/100:parseInt(u)/100;var p=this.seriesCenter[1];c=-1!=(d=p.indexOf("%"))?parseInt(p.substring(0,d))/100:parseInt(p)/100}this.centerTextLeft=i*l-o/2,this.centerTextTop=a*c-15*s.length/2;var m={title:{text:this.pieTitle,textStyle:{fontSize:"15"},left:"3%",top:"5%"},tooltip:{trigger:"item",formatter:this.tooltipFormatter||"{a} <br/>{b}: {c} ({d}%)"},graphic:[{type:"text",left:this.centerTextLeft,top:this.centerTextTop,style:{text:this.pieData.centerText,textAlign:"center",textVerticalAlign:"middle",fill:"#000",fontSize:15,fontFamily:"Microsoft YaHei"}}],legend:{orient:"vertical",itemHeight:0,itemWidth:0,top:"3%",right:"0",x:"right",formatter:function(t){for(var i=void 0,a=void 0,s=0;s<e.pieData.seriesData.length;s++)if(e.pieData.seriesData[s].name==t){i=e.pieData.seriesData[s].value,a=e.pieData.seriesData[s].percent;break}if(e.hideLegendValue&&(i=""),!a)return"{a|"+t+"} "+i;var o=["{a|"+t+"}",i];return i&&a?o=["{a|"+t+"}",i,"("+a+"%)"]:i&&!a&&(o=["{a|"+t+"}",i]),o.join(" ")},data:this.legendData,textStyle:{rich:{a:{color:"black"}},fontSize:15}},series:[{name:this.pieTitle,type:"pie",center:this.seriesCenter||["40%","60%"],radius:this.seriesRadius||["50%","60%"],avoidLabelOverlap:!0,label:{normal:{show:this.showLabel,position:"outside",formatter:this.seriesLabelFormatter||"{b} {c} ({d}%)",fontSize:15}},labelLine:{normal:{show:!0}},data:this.pieData.seriesData,enableMouseTracking:!1,shadow:!1,animation:!1}]};if(this.pieData.aroundTextConfig)for(var g=0;g<this.pieData.aroundTextConfig.length;g++)m.graphic.push(this.pieData.aroundTextConfig[g]);this.color.length&&(m.color=this.color);var h=this.$echarts.init(document.getElementById(this.elementID));h.setOption(m),window.addEventListener("resize",function(){h.resize()})}},b=i("XyMi"),y={name:"stacked-column-chart",props:["barData","barColor","barTitle","echartPicIdDict","keyForEchartId","yAxisType","xAxisType"],data:function(){return{elementID:"",color:[],legendData:[],axisYType:this.yAxisType,axisXType:this.xAxisType}},created:function(){this.elementID=f()(),this.echartPicIdDict[this.keyForEchartId]=this.elementID;for(var e=0;e<this.barData.seriesData.length;e++)this.legendData.push(this.barData.seriesData[e].name),this.barColor&&this.color.push(this.barColor[this.barData.seriesData[e].name])},mounted:function(){this.axisXType||(this.axisXType="category"),this.axisYType||(this.axisYType="value");var e={title:{text:this.barTitle,textStyle:{fontSize:"14",color:"grey"},left:"3%",top:"5%"},tooltip:{trigger:"axis",formatter:function(e,t,i){for(var a=0,s=0;s<e.length;s++)a+=e[s].data;return e.map(function(e,t){var i=a?(e.value/a*100).toFixed(1):"0.0%";return'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e.color+'"></span>'+e.seriesName+": "+e.value+"("+i+"%)</br>"}).join("")},axisPointer:{type:"line"}},legend:{top:"2%",data:this.legendData},grid:{left:"0.3%",right:"2%",bottom:"1%",containLabel:!0},xAxis:{type:this.axisXType,data:this.barData.xAxisData,axisLabel:{interval:0,rotate:30}},yAxis:[{type:this.axisYType,data:this.barData.yAxisData,axisLabel:{interval:0,rotate:30}}],series:this.barData.seriesData};this.color.length&&(e.color=this.color);var t=document.getElementById(this.elementID),i=this.$echarts.init(t);if("value"==this.axisXType){e.xAxis.max=function(e){return e?e.max>1e3?e.max+150:e.max>500?e.max+100:e.max>100?e.max+50:e.max>50?e.max+20:e.max+10:0};var a=30*this.barData.seriesData.length+100;t.style.height=a+"px"}i.setOption(e),i.resize(),window.addEventListener("resize",function(){i.resize()})}},_={components:{DoughnutPieChart:Object(b.a)(v,function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:this.elementID}})},[],!1,null,null,null).exports,StackedColumnChart:Object(b.a)(y,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticStyle:{height:"0px"},attrs:{id:this.elementID}})},[],!1,null,null,null).exports,DefectCreatedIndividualStatistics:p.default,DefectResolvedIndividualStatistics:d.default,CaseExecutionIndividualStatistics:m.default,UnclosedDefectTable:g.default},data:function(){return{echartPicIdDict:{},productOptions:[],productSelected:"",sprintOptions:[],sprintSelected:"",planOptions:[],plansSelected:[],allPlanSelected:!1,projectsSelected:[],initProjectOptions:[],projectOptions:[],allProjectSelected:!1,projectVersionsSelected:[],projectVersionOptions:[],initProjectVersionOptions:[],allProjectVersionSelected:!1,ifDisableGenerateReportBtn:!0,elementLoadingText:"",loading:!1,reportId:"",showEditableItem:!1,showReport:!1,reportInfo:{},sprintReports:[],oldValueOfReportItem:"",requirementPie:{title:"需求覆盖统计",color:{"未测试":"#FFA500","测试中":"#20B2AA","已完成":"#228B22"}},defectStatusPie:{title:"缺陷状态统计",color:{"新建":"#8B0000","处理中":"#8B008B","延期处理":"#696969","已解决":"#9ACD32","已拒绝":"#FF8C00","已关闭":"#228B22","重新打开":"#FF3E96"}},defectSeverityPie:{title:"缺陷级别统计",color:{"致命":"#8B0000","严重":"#FFA500","一般":"#20B2AA","轻微":"#696969"}},defectTypePie:{title:"缺陷类型统计",color:{"性能缺陷":"#8B0000","功能缺陷":"#FFA500","界面缺陷":"#20B2AA","其它缺陷":"#696969"}},caseExecutionPie:{title:"用例执行统计",color:{"通过":"#228B22","失败":"#8B0000","阻塞":"#FFA500","未执行":"#696969"}},editing:{title:!1,introduction:!1,testScope:!1,conclusion:!1,suggestion:!1,riskAnalysis:!1},showDataFromQuery:!1}},methods:{onProductChange:function(e){var t=this;e||(this.productSelected=""),localStorage.setItem("productIdForSprintReport",this.productSelected),this.getSprintsDetails().then(function(e){t.getSprintTestPlans(),t.getProjectVersionsWithProjects(),t.loadSprintTestReportList(e)}).catch(function(e){t.$message({message:e.msg||e.message,type:"warning",duration:3e3})})},onSprintChange:function(e){this.plansSelected=[],this.projectsSelected=[],this.projectVersionsSelected=[],this.getSprintTestPlans(),this.getProjectVersionsWithProjects(),this.loadSprintTestReportList(e)},updateCounterForMultiSelector:function(e,t){var i=this;this.$nextTick(function(){var a=void 0;try{a=i.$refs[t].$el.getElementsByClassName("el-select__tags-text")}catch(e){return void i.$message.error("修改Selector选择器中选项计数器失败：选择器名称参数错误")}a.length>1&&(a[1].innerHTML="+ "+(e.length-1)),a.length>1&&("全部"==a[0].innerHTML?a[1].parentNode.style.cssText="Visibility:hidden":a[1].parentNode.style.cssText="Visibility:display")})},onPlanChange:function(e){var t=this,i=e.some(function(e,t,i){return 0==e.id});if(this.allPlanSelected&&!i)this.plansSelected=[],this.allPlanSelected=!1;else if(!this.allPlanSelected&&i){this.allPlanSelected=!0,this.plansSelected=[];for(var a=0;a<this.planOptions.length;a++)this.plansSelected.push(this.planOptions[a])}else if(this.allPlanSelected&&i){this.allPlanSelected=!1;for(var s=0;s<this.plansSelected.length;s++)if(0==this.plansSelected[s].id){this.plansSelected.splice(s,1);break}}this.updateCounterForMultiSelector(e,"testplanSelector");var o=[];if(this.plansSelected.length){this.plansSelected.forEach(function(e){e.projectIds&&(o=o.concat(e.projectIds.split(",")))});var n=new u.a(o);o=l()(n),this.projectsSelected=[],this.projectOptions=[],this.projectVersionsSelected=[],this.projectVersionOptions=[],this.initProjectOptions.forEach(function(e){o.includes(""+e.id)&&(t.projectsSelected.push(e),t.projectOptions.push(e),t.projectVersionOptions=t.projectVersionOptions.concat(e.versions),t.projectVersionsSelected=t.projectVersionsSelected.concat(e.versions))})}else this.projectOptions=this.initProjectOptions,this.projectsSelected=[],this.projectVersionOptions=this.initProjectVersionOptions,this.projectVersionsSelected=[]},onProjectChange:function(e){var t=this,i=e.some(function(e,t,i){return 0==e.id});if(this.allProjectSelected&&!i)this.projectsSelected=[],this.allProjectSelected=!1;else if(!this.allProjectSelected&&i){this.allProjectSelected=!0,this.projectsSelected=[];for(var a=0;a<this.projectOptions.length;a++)this.projectsSelected.push(this.projectOptions[a])}else if(this.allProjectSelected&&i){this.allProjectSelected=!1;for(var s=0;s<this.projectsSelected.length;s++)if(0==this.projectsSelected[s].id){this.projectsSelected.splice(s,1);break}}if(this.updateCounterForMultiSelector(e,"projectSelector"),this.projectsSelected.length)this.projectVersionsSelected=[],this.projectVersionOptions=[],this.projectsSelected.forEach(function(e){e.versions&&(t.projectVersionOptions=t.projectVersionOptions.concat(e.versions),t.projectVersionsSelected=t.projectVersionsSelected.concat(e.versions))});else{var o=[];if(this.plansSelected.length){this.plansSelected.forEach(function(e){e.projectIds&&(o=o.concat(e.projectIds.split(",")))});var n=new u.a(o);o=l()(n),this.projectVersionsSelected=[],this.projectVersionOptions=[],this.initProjectOptions.forEach(function(e){o.includes(""+e.id)&&(t.projectVersionOptions=t.projectVersionOptions.concat(e.versions),t.projectVersionsSelected=t.projectVersionsSelected.concat(e.versions))}),this.projectVersionsSelected=[]}else this.projectVersionsSelected=[],this.projectVersionOptions=this.initProjectVersionOptions}},onProjectVersionChange:function(e){var t=e.some(function(e,t,i){return 0==e.id});if(this.allProjectVersionSelected&&!t)this.projectVersionsSelected=[],this.allProjectVersionSelected=!1;else if(!this.allProjectVersionSelected&&t){this.allProjectVersionSelected=!0,this.projectVersionsSelected=[];for(var i=0;i<this.projectVersionOptions.length;i++)this.projectVersionsSelected.push(this.projectVersionOptions[i])}else if(this.allProjectVersionSelected&&t){this.allProjectVersionSelected=!1;for(var a=0;a<this.projectVersionsSelected.length;a++)if(0==this.projectVersionsSelected[a].id){this.projectVersionsSelected.splice(a,1);break}}this.updateCounterForMultiSelector(e,"projectVersionSelector")},getReportStatistics:function(){var e=this;try{if(!this.sprintSelected)return void this.$alert("迭代为空","提示",{confirmButtonText:"确定"});this.elementLoadingText="请稍等，正在努力加载统计数据...",this.loading=!0;for(var t=[],i=0;i<this.plansSelected.length;i++)t.push(this.plansSelected[i].id);for(var a=[],s=0;s<this.projectsSelected.length;s++)a.push(this.projectsSelected[s].id);for(var o=[],n=0;n<this.projectVersionsSelected.length;n++)o.push(this.projectVersionsSelected[n].id);this.$api.sprintTestReport.generateSprintTestReportStatistics({sprintId:this.sprintSelected,planIds:t,projects:a,projectVersions:o}).then(function(t){e.loading=!1,e.ifDisableGenerateReportBtn=!1,t.success?(e.reportInfo=t.data,t.msg.length&&e.$message({dangerouslyUseHTMLString:!0,message:t.msg,type:"warning"}),e.refreshReportContent(!0)):e.$message.error(t.msg)}).catch(function(t){e.loading=!1,e.$message.error(t.msg||t.message)})}catch(e){this.loading=!1,this.$message.error(""+e.message)}},refreshReportContent:function(e){var t=this;this.showReport=!1,e?this.$nextTick(function(){t.reportId="",t.showEditableItem=!1,t.showDataFromQuery=!0,t.showReport=!0}):this.$nextTick(function(){t.showEditableItem=!0,t.showDataFromQuery=!1,t.showReport=!0})},generateSprintTestReport:function(){var e=this;try{this.elementLoadingText="请稍等，正在努力生成测试报告...",this.loading=!0,this.$api.sprintTestReport.createSprintTestReport({sprintId:this.sprintSelected}).then(function(t){e.loading=!1,t.success?(e.ifDisableGenerateReportBtn=!0,e.reportInfo=t.data,e.sprintReports.splice(0,0,{id:e.reportInfo.id,title:e.reportInfo.title}),e.reportId=e.reportInfo.id,e.refreshReportContent(!1)):e.$message.error(t.msg)}).catch(function(t){e.loading=!1,e.$message.error(t.msg||t.message)})}catch(e){this.loading=!1,this.$message.error(res.msg||res.message)}},loadSprintTestReportList:function(e){var t=this;this.$api.sprintTestReport.getSprintTestReportsDetails({sprintId:e}).then(function(e){e.success?(t.sprintReports=e.data,t.sprintReports.length&&(t.reportId=t.sprintReports[0].id,t.viewSprintTestReport(t.reportId))):t.$message.error(e.msg)}).catch(function(e){t.$message.error(e.msg||e.message)})},viewSprintTestReport:function(e,t){var i=this;this.loading=!0,this.elementLoadingText="请稍等，正在努力加载测试报告...",this.$api.sprintTestReport.getSprintTestReport({sprintId:t,reportId:e}).then(function(e){i.loading=!1,e.success?(i.reportInfo=e.data,i.refreshReportContent(!1)):i.$message.error(e.msg)}).catch(function(e){i.loading=!1,i.$message.error(e.msg||e.message)})},onReportChange:function(e){e&&this.viewSprintTestReport(e)},editReportItem:function(e){var t=this;this.editing[e]=!0,this.oldValueOfReportItem=this.reportInfo[e],this.$nextTick(function(i){t.$refs[e].focus()})},onEditingBlur:function(e){this.editing[e]=!1,this.updateReportItem(e,this.oldValueOfReportItem)},updateReportItem:function(e,t){var i=this;this.$api.sprintTestReport.updateSprintTestReport({reportId:this.reportInfo.id,targetItem:e,value:this.reportInfo[e]}).then(function(a){if(a.success){if(i.$message.success(a.msg),"title"==e)for(var s=0;s<i.sprintReports.length;s++){var o=i.sprintReports[s];o.id==i.reportInfo.id&&(o.title=a.data.title)}}else i.$message.error(a.msg),i.reportInfo[e]=t}).catch(function(a){i.$message.error(a.msg||a.message),i.reportInfo[e]=t})},sendSprintTestReport:function(){this.$alert("功能待开发","提示",{confirmButtonText:"确定"})},downloadSprintTestReport:function(){var e=this;if(this.reportInfo.id)try{this.loading=!0,this.elementLoadingText="请稍等，正在努力下载测试报告......";var t={};for(var i in this.echartPicIdDict){if(document.getElementById(this.echartPicIdDict[i])){var a=this.$echarts.getInstanceByDom(document.getElementById(this.echartPicIdDict[i]));if(a)try{var s=a.getDataURL();t[i]=s}catch(e){console.log(e+"可能是成图片(ID:"+i+")未生成导致")}}}this.$api.sprintTestReport.downloadSprintTestReport({reportId:this.reportInfo.id,sprintId:this.reportInfo.sprintId,echartBase64Info:t}).then(function(t){var i=document.createElement("a"),a=new Blob([t.data],{type:t.headers["content-type"]});i.style.display="none",i.href=window.URL.createObjectURL(a),i.setAttribute("download",e.reportInfo.title+".pdf"),document.body.appendChild(i),i.click(),document.body.removeChild(i),e.loading=!1}).catch(function(t){if("[object Blob]"==Object.prototype.toString.call(t.response.data)){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result);a.msg?e.$message.error(t.msg||t.message+":"+a.msg):e.$message.error(t.msg||t.message+":"+a.detail)},i.readAsText(t.response.data)}else e.$message.error(t.msg||t.message);e.loading=!1})}catch(e){this.loading=!1,this.$message.error(e.message)}else this.$message.warning("请先选择要下载的报告")},setSprintReportTopPos:function(){var e=this;this.idOfSetTimeOut&&clearTimeout(this.idOfSetTimeOut),this.idOfSetTimeOut=setTimeout(function(){var t=e.$refs.topPannel,i=0,a=0;if(t){i=t.offsetHeight;var s=window.getComputedStyle(t);a=parseInt(s.marginTop.replace("px",""))+parseInt(s.marginBottom.replace("px",""))+i}e.$refs.sprintReport&&(e.$refs.sprintReport.style.cssText="top:"+a+"px;")},100)},getProductsDetails:function(){var e=this;return this.productSelected="",this.productOptions=[],new n.a(function(t,i){e.$api.product.getProductsDetails({fields:"id,name"}).then(function(a){if(a.success){e.productOptions=a.data;var s=localStorage.getItem("productIdForSprintReport");if(s)s=parseInt(s),e.productOptions.some(function(e){if(e.id==s)return!0})?e.productSelected=s:e.productOptions.length?e.productSelected=e.productOptions[0].id:e.$message.warning("未获取到产品列表");else e.productOptions.length?e.productSelected=e.productOptions[0].id:e.$message.warning("未获取到产品列表");localStorage.setItem("productIdForSprintReport",e.productSelected),t(e.productSelected)}else e.$message.error(a.msg),i(a)}).catch(function(t){e.$message.error(t.msg||t.message),i(t)})})},getSprintsDetails:function(){var e=this;return this.sprintOptions=[],this.sprintSelected="",this.planOptions=[],this.plansSelected=[],this.projectOptions=[],this.projectsSelected=[],this.initProjectOptions=[],new n.a(function(t,i){e.productSelected||i({msg:"请选择产品"}),e.$api.product.getProductSprintsDetails({productId:e.productSelected}).then(function(a){a.success?(e.sprintOptions=a.data,e.sprintOptions.length?e.sprintSelected=e.sprintOptions[0].id:i({msg:"未获取到当前产品关联的迭代"}),t(e.sprintSelected)):i(a)}).catch(function(e){i(e)})})},getSprintTestPlans:function(){var e=this;this.planOptions=[],this.plansSelected=[],this.sprintSelected&&this.$api.sprint.getSprintTestPlans({sprintId:this.sprintSelected,fields:"id,name,project_ids"}).then(function(t){t.success?(e.planOptions=t.data,e.planOptions.length?e.planOptions.splice(0,0,{id:0,name:"全部"}):e.$message({message:"未获取到当前迭代关联的测试计划",type:"warning",duration:3e3})):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},getProjectVersionsWithProjects:function(){var e=this;this.projectOptions=[],this.projectsSelected=[],this.initProjectOptions=[],this.projectVersionOptions=[],this.projectVersionsSelected=[],this.initProjectVersionOptions=[],this.sprintSelected&&this.$api.sprint.getRelatedProjectsWithVersions({sprintId:this.sprintSelected}).then(function(t){t.success?(e.projectOptions=t.data.projectOptions,e.initProjectOptions=JSON.parse(s()(t.data.projectOptions)),e.projectVersionOptions=t.data.projectVersionOptions,e.initProjectVersionOptions=JSON.parse(s()(t.data.projectVersionOptions)),e.projectVersionOptions.length?(e.projectVersionOptions.splice(0,0,{id:0,name:"全部"}),e.initProjectVersionOptions.splice(0,0,{id:0,name:"全部"}),e.projectOptions.splice(0,0,{id:0,name:"全部"}),e.initProjectOptions.splice(0,0,{id:0,name:"全部"})):(e.projectOptions=[],e.$message({message:"未获取到当前迭代关联的项目",type:"warning",duration:1e3}))):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},getSelectWidthStyle:function(e,t){var i="width:"+t+"px";if(e){var a=this.$customUtils.stringHandler.getTextPixelWith(e,"400 13.3333px Arial");console.log(e,a),a>t-47&&(i="width:"+(a+47+30)+"px")}return i}},created:function(){var e=this;this.getProductsDetails().then(function(t){e.getSprintsDetails().then(function(t){e.getSprintTestPlans(),e.getProjectVersionsWithProjects(),e.loadSprintTestReportList(t)}).catch(function(t){e.$message({message:t.msg||t.message,type:"warning",duration:3e3})})})},updated:function(){this.setSprintReportTopPos()}};var w=function(e){i("jlb1")},S=Object(b.a)(_,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setSprintReportTopPos,expression:"setSprintReportTopPos"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",overflow:"hidden"},attrs:{"element-loading-text":e.elementLoadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("div",{ref:"topPannel",staticClass:"common-top-bar-wrapper"},[i("span",[e._v("产品")]),e._v(" "),i("el-select",{ref:"sprintProductSelector",staticStyle:{width:"14%"},attrs:{filterable:"",size:"small","collapse-tags":"",placeholder:"输入关键词搜索产品"},on:{change:e.onProductChange},model:{value:e.productSelected,callback:function(t){e.productSelected=t},expression:"productSelected"}},e._l(e.productOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),i("span",[e._v(" 迭代")]),e._v(" "),i("el-select",{staticStyle:{width:"12%"},attrs:{filterable:"",size:"small",placeholder:"输入关键词搜索迭代"},on:{change:e.onSprintChange},model:{value:e.sprintSelected,callback:function(t){e.sprintSelected=t},expression:"sprintSelected"}},e._l(e.sprintOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),i("span",[e._v(" 测试计划")]),e._v(" "),i("el-select",{ref:"testplanSelector",staticStyle:{width:"15%"},attrs:{"value-key":"id",filterable:"",clearable:"",multiple:!0,size:"small","collapse-tags":"",placeholder:"输入关键词搜索计划"},on:{change:e.onPlanChange},model:{value:e.plansSelected,callback:function(t){e.plansSelected=t},expression:"plansSelected"}},e._l(e.planOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1),e._v(" "),i("span",[e._v(" 缺陷归属项目")]),e._v(" "),i("el-select",{ref:"projectSelector",staticStyle:{width:"15%"},attrs:{"value-key":"id",filterable:"",clearable:"",multiple:!0,size:"small","collapse-tags":"",placeholder:"输入关键词搜索项目"},on:{change:e.onProjectChange},model:{value:e.projectsSelected,callback:function(t){e.projectsSelected=t},expression:"projectsSelected"}},e._l(e.projectOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1),e._v(" "),i("span",[e._v(" 缺陷归属项目版本")]),e._v(" "),i("el-select",{ref:"projectVersionSelector",staticStyle:{width:"13%"},attrs:{"value-key":"id",filterable:"",clearable:"",multiple:!0,size:"small","collapse-tags":"",placeholder:"输入关键词搜索项目版本"},on:{change:e.onProjectVersionChange},model:{value:e.projectVersionsSelected,callback:function(t){e.projectVersionsSelected=t},expression:"projectVersionsSelected"}},e._l(e.projectVersionOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getReportStatistics}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",disabled:e.ifDisableGenerateReportBtn},on:{click:e.generateSprintTestReport}},[e._v("生成报告")]),e._v(" "),i("span",[e._v("查看报告")]),e._v(" "),i("el-select",{staticStyle:{width:"25%"},attrs:{filterable:"",clearable:"",multiple:!1,size:"small",placeholder:"输入关键词查找测试报告或者下拉选取测试报告"},on:{change:e.onReportChange},model:{value:e.reportId,callback:function(t){e.reportId=t},expression:"reportId"}},e._l(e.sprintReports,function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.downloadSprintTestReport}},[e._v("下载报告")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sendSprintTestReport}},[e._v("发送报告")])],1),e._v(" "),i("div",{ref:"sprintReport",staticClass:"sprint-test-report-content"},[e.showReport?i("div",{staticStyle:{height:"100%"}},[e.showDataFromQuery?e._e():i("div",{staticClass:"report-title report-session"},[e.editing.title?i("div",[i("el-input",{ref:"title",attrs:{type:"text",placeholder:"请输入测试报告标题",maxlength:"100",size:"small","show-word-limit":""},on:{blur:function(t){return e.onEditingBlur("title")}},model:{value:e.reportInfo.title,callback:function(t){e.$set(e.reportInfo,"title",t)},expression:"reportInfo.title"}})],1):i("div",[i("span",[e._v(e._s(e.reportInfo.title))]),e._v(" "),e.showEditableItem?i("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.editReportItem("title")}}}):e._e()])]),e._v(" "),e.showDataFromQuery?e._e():i("div",{staticClass:"report-session"},[i("span",{staticClass:"report-session-title"},[e._v("引言：")]),e._v(" "),e.editing.introduction?i("div",[i("el-input",{ref:"introduction",attrs:{type:"textarea",placeholder:"请输入测试报告引言",maxlength:"1000",size:"small","show-word-limit":""},on:{blur:function(t){return e.onEditingBlur("introduction")}},model:{value:e.reportInfo.introduction,callback:function(t){e.$set(e.reportInfo,"introduction",t)},expression:"reportInfo.introduction"}})],1):i("div",[i("span",{staticClass:"hand-input-content pre-text"},[e._v(e._s(e.reportInfo.introduction))]),e._v(" "),e.showEditableItem?i("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.editReportItem("introduction")}}}):e._e()])]),e._v(" "),e.showDataFromQuery?e._e():i("div",{staticClass:"report-session"},[i("div",{staticClass:"report-session-title"},[e._v("概述")]),e._v(" "),i("div",{staticClass:"report-sub-session"},[i("div",{staticClass:"report-sub-session-title"},[e._v("测试结论")]),e._v(" "),e.editing.conclusion?e._e():i("div",[i("span",{staticClass:"hand-input-content pre-text"},[e._v(e._s(e.reportInfo.conclusion))]),e._v(" "),e.showEditableItem?i("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.editReportItem("conclusion")}}}):e._e()]),e._v(" "),e.editing.conclusion?i("div",[i("el-input",{ref:"conclusion",attrs:{type:"textarea",autosize:{minRows:5},placeholder:"请输入测试结论",maxlength:"1000",size:"small","show-word-limit":""},on:{blur:function(t){return e.onEditingBlur("conclusion")}},model:{value:e.reportInfo.conclusion,callback:function(t){e.$set(e.reportInfo,"conclusion",t)},expression:"reportInfo.conclusion"}})],1):e._e()]),e._v(" "),i("div",{staticClass:"report-sub-session"},[i("div",{staticClass:"report-sub-session-title"},[e._v("相关建议")]),e._v(" "),e.editing.suggestion?e._e():i("div",[i("span",{staticClass:"hand-input-content pre-text"},[e._v(e._s(e.reportInfo.suggestion))]),e._v(" "),e.showEditableItem?i("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.editReportItem("suggestion")}}}):e._e()]),e._v(" "),e.editing.suggestion?i("div",[i("el-input",{ref:"suggestion",attrs:{type:"textarea",autosize:{minRows:5},placeholder:"请输入相关建议",maxlength:"1000",size:"small","show-word-limit":""},on:{blur:function(t){return e.onEditingBlur("suggestion")}},model:{value:e.reportInfo.suggestion,callback:function(t){e.$set(e.reportInfo,"suggestion",t)},expression:"reportInfo.suggestion"}})],1):e._e()]),e._v(" "),i("div",{staticClass:"report-sub-session",staticStyle:{"border-bottom-width":"0px"}},[i("div",{staticClass:"report-sub-session-title"},[e._v("风险分析")]),e._v(" "),e.editing.riskAnalysis?e._e():i("div",[i("span",{staticClass:"hand-input-content pre-text"},[e._v(e._s(e.reportInfo.riskAnalysis))]),e._v(" "),e.showEditableItem?i("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.editReportItem("riskAnalysis")}}}):e._e()]),e._v(" "),e.editing.riskAnalysis?i("div",[i("el-input",{ref:"riskAnalysis",attrs:{type:"textarea",autosize:{minRows:5},placeholder:"请输入存在的风险",maxlength:"1000",size:"small","show-word-limit":""},on:{blur:function(t){return e.onEditingBlur("riskAnalysis")}},model:{value:e.reportInfo.riskAnalysis,callback:function(t){e.$set(e.reportInfo,"riskAnalysis",t)},expression:"reportInfo.riskAnalysis"}})],1):e._e()])]),e._v(" "),e.showDataFromQuery?e._e():i("div",{staticClass:"report-session"},[i("span",{staticClass:"report-session-title"},[e._v("测试范围")]),e._v(" "),e.editing.testScope?e._e():i("div",[i("span",{staticClass:"hand-input-content pre-text"},[e._v(e._s(e.reportInfo.testScope))]),e._v(" "),e.showEditableItem?i("i",{staticClass:"el-icon-edit",on:{click:function(t){return e.editReportItem("testScope")}}}):e._e()]),e._v(" "),e.editing.testScope?i("div",[i("el-input",{ref:"testScope",attrs:{type:"textarea",placeholder:"请输入迭代测试范围",maxlength:"1000",size:"small","show-word-limit":""},on:{blur:function(t){return e.onEditingBlur("testScope")}},model:{value:e.reportInfo.testScope,callback:function(t){e.$set(e.reportInfo,"testScope",t)},expression:"reportInfo.testScope"}})],1):e._e()]),e._v(" "),i("div",{staticClass:"report-session"},[i("span",{staticClass:"report-session-title"},[e._v("测试计划")]),e._v(" "),i("div",{staticClass:"plan-table-wrapper"},[i("table",[e._m(0),e._v(" "),i("tbody",e._l(e.reportInfo.relatedPlans,function(t){return i("tr",{key:t.id},[i("td",{staticStyle:{"text-align":"left"}},[i("div",[e._v(e._s(t.name))])]),e._v(" "),i("td",[i("div",[e._v(e._s(t.beginTime))])]),e._v(" "),i("td",[i("div",[e._v(e._s(t.startTime))])]),e._v(" "),i("td",[i("div",[e._v(e._s(t.endTime))])]),e._v(" "),i("td",[i("div",[e._v(e._s(t.finishTime))])]),e._v(" "),i("td",[i("div",[e._v(e._s(t.status))])]),e._v(" "),i("td",[i("div",[e._v("\n                                        "+e._s(t.progress)+"%("+e._s(t.caseNumExecuted)+"/"+e._s(t.caseNumRelated)+")\n                                    ")])]),e._v(" "),i("td",[i("div",[e._v("\n                                        "+e._s(t.passRate)+"%("+e._s(t.caseNumSuccess)+"/"+e._s(t.caseNumRelated)+")\n                                    ")])]),e._v(" "),i("td",[i("div",[e._v("\n                                        "+e._s(t.caseNumFail)+"\n                                    ")])]),e._v(" "),i("td",[i("div",[e._v("\n                                        "+e._s(t.caseNumBlocked)+"\n                                    ")])]),e._v(" "),i("td",[i("div",[e._v("\n                                        "+e._s(t.caseNumRelated-t.caseNumExecuted)+"                                              \n                                    ")])]),e._v(" "),i("td",{staticStyle:{"text-align":"left"}},[i("div",[e._v(e._s(t.projectNames))])]),e._v(" "),i("td",{staticStyle:{"text-align":"left"}},[i("div",[e._v(e._s(t.envNames))])])])}),0)])])]),e._v(" "),i("div",{staticClass:"report-session"},[i("span",{staticClass:"report-session-title"},[e._v("测试统计")]),e._v(" "),i("div",{staticClass:"report-sub-session"},[i("doughnut-pie-chart",{staticClass:"doughnut-pie-chart",attrs:{pieData:e.reportInfo.defectStatusPie,pieColor:e.defectStatusPie.color,pieTitle:e.defectStatusPie.title,echartPicIdDict:e.echartPicIdDict,showLabel:!1,keyForEchartId:"defectStatusPie"}}),e._v(" "),i("doughnut-pie-chart",{staticClass:"doughnut-pie-chart",attrs:{pieData:e.reportInfo.defectSeverityPie,pieColor:e.defectSeverityPie.color,pieTitle:e.defectSeverityPie.title,echartPicIdDict:e.echartPicIdDict,showLabel:!1,keyForEchartId:"defectSeverityPie"}}),e._v(" "),i("doughnut-pie-chart",{staticClass:"doughnut-pie-chart",attrs:{pieData:e.reportInfo.defectTypePie,pieColor:e.defectTypePie.color,pieTitle:e.defectTypePie.title,echartPicIdDict:e.echartPicIdDict,showLabel:!1,keyForEchartId:"defectTypePie"}}),e._v(" "),i("doughnut-pie-chart",{staticClass:"doughnut-pie-chart",attrs:{pieData:e.reportInfo.caseExecutionPie,pieColor:e.caseExecutionPie.color,pieTitle:e.caseExecutionPie.title,showLabel:!1,keyForEchartId:"caseExecutionPie",echartPicIdDict:e.echartPicIdDict}}),e._v(" "),e._m(1)],1),e._v(" "),e.reportInfo.defectSourceBar.seriesData.length?i("div",{staticClass:"report-sub-session"},[i("div",{staticClass:"report-sub-session-title"},[e._v("\n                        缺陷根源分组统计\n                    ")]),e._v(" "),i("stacked-column-chart",{staticClass:"stacked-column-chart",attrs:{barData:e.reportInfo.defectSourceBar,echartPicIdDict:e.echartPicIdDict,keyForEchartId:"defectSourceBar",yAxisType:"category",xAxisType:"value"}})],1):e._e(),e._v(" "),i("div",{staticClass:"report-sub-session"},[i("div",{staticClass:"report-sub-session-title"},[e._v("\n                        个人用例执行统计\n                    ")]),e._v(" "),i("case-execution-individual-statistics",{attrs:{caseExecutionIndividual:e.reportInfo.caseExecutionIndividual}}),e._v(" "),e._m(2)],1),e._v(" "),i("div",{staticClass:"report-sub-session"},[i("div",{staticClass:"report-sub-session-title"},[e._v("\n                        个人缺陷提交统计\n                    ")]),e._v(" "),i("defect-created-individual-statistics",{attrs:{defectsCreatedIndividual:e.reportInfo.defectsCreatedIndividual}})],1),e._v(" "),i("div",{staticClass:"report-sub-session"},[i("div",{staticClass:"report-sub-session-title"},[e._v("\n                        个人缺陷处理统计\n                    ")]),e._v(" "),i("defect-resolved-individual-statistics",{attrs:{defectsResolvedIndividual:e.reportInfo.defectsResolvedIndividual}}),e._v(" "),e._m(3)],1),e._v(" "),i("div",[i("div",{staticClass:"report-sub-session-title"},[e._v("遗留缺陷列表")]),e._v(" "),i("unclosed-defect-table",{attrs:{unclosedDefects:e.reportInfo.unclosedDefects}})],1)])]):e._e()])])},[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticStyle:{border:"none",width:"16%"}},[e._v("\n                                    计划名称\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"7%"}},[e._v("\n                                    预估开始日期\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"9%"}},[e._v("\n                                    实际开始时间\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"7%"}},[e._v("\n                                    预估完成日期\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"9%"}},[e._v("\n                                    实际完成时间\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"4%"}},[e._v("\n                                    状态\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"8%"}},[e._v("\n                                    测试进度\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"8%"}},[e._v("\n                                    通过率\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"5%"}},[e._v("\n                                    失败\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"5%"}},[e._v("\n                                    阻塞\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"5%"}},[e._v("\n                                    未执行\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"9%"}},[e._v("\n                                    关联项目\n                                ")]),e._v(" "),i("th",{staticStyle:{border:"none",width:"8%"}},[e._v("\n                                    测试环境\n                                ")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"terminology-wrapper"},[i("span",[e._v("名词解释")]),e._v(" "),i("br"),e._v(" "),i("span",{staticClass:"terminology",staticStyle:{"margin-left":"0px"}},[e._v("消缺率：")]),e._v(" "),i("span",[e._v('"已关闭"缺陷数/缺陷总数 * 100')]),e._v(" "),i("span",{staticClass:"terminology"},[e._v("已拒绝：")]),e._v(" "),i("span",[e._v("扭转状态除外，不对缺陷做任何处理")]),e._v(" "),i("span",{staticClass:"terminology"},[e._v("重新打开：")]),e._v(" "),i("span",[e._v("缺陷关闭后被再次打开")]),e._v(" "),i("span",{staticClass:"terminology"},[e._v("通过率：")]),e._v(" "),i("span",[e._v('"通过"用例数/用例总数 * 100')]),e._v(" "),i("span",{staticClass:"terminology"},[e._v("执行率：")]),e._v(" "),i("span",[e._v('(用例总数-"未执行"用例数)/用例总数 * 100')])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"terminology-wrapper"},[i("span",[e._v("名词解释")]),e._v(" "),i("br"),e._v(" "),i("span",{staticClass:"terminology",staticStyle:{"margin-left":"0px"}},[e._v("用例执行率：")]),e._v(" "),i("span",[e._v('("分配用例数"-"执行用例数")/"分配用例数" *\n                            100')]),e._v("    \n                        "),i("span",{staticClass:"terminology"},[e._v("用例通过率：")]),e._v(" "),i("span",[e._v('"通过用例数"/"执行用例数" * 100')]),e._v("    \n                        "),i("br"),e._v(" "),i("span",{staticClass:"terminology",staticStyle:{"margin-left":"0px"}},[e._v("说明：")]),e._v(" "),i("span",[e._v("全部统计项都为0的用户不显示")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"terminology-wrapper"},[t("span",{staticClass:"terminology",staticStyle:{"margin-left":"0px"}},[this._v("说明：")]),this._v(" "),t("span",[this._v("以上缺陷密度值为“引发缺陷数”的缺陷DI值统计；致命，严重，一般，轻微缺陷数为“引发缺陷数”的细分统计")])])}],!1,w,"data-v-6d5b562a",null);t.default=S.exports},B10F:function(e,t){},B6j7:function(e,t){},BDhv:function(e,t,i){var a=i("kM2E");a(a.P+a.R,"Set",{toJSON:i("m9gC")("Set")})},BKUr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:["unclosedDefects"],data:function(){return{totalRows:this.unclosedDefects.length,pageSizes:[10,20,30,40,50,100,150],pageSize:10,currentPage:1}},methods:{handleSizeChange:function(e){this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},convertEntityToString:function(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};for(var i in t)e=e.replace(new RegExp(i,"gm"),t[i]);return e}}},s=i("XyMi"),o=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-table",{attrs:{data:e.unclosedDefects.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"",stripe:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"defectId",label:"缺陷ID","min-width":"8%","header-align":"center",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["jira"==t.row.platform?i("el-link",{attrs:{target:"_blank",type:"primary",href:e.$appConfig.jiraIssueBrowseBaseUrl+t.row.defectId}},[e._v(e._s(t.row.defectId))]):"禅道"==t.row.platform?i("el-link",{attrs:{target:"_blank",type:"primary",href:e.$appConfig.zentaoBugBrowseBaseUrl+t.row.defectId+".html"}},[e._v(e._s(t.row.defectId))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"缺陷名称","min-width":"45%","show-overflow-tooltip":"","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.convertEntityToString(t.row.title)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"severity","min-width":"5%",label:"严重级别","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"5%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"补充说明","min-width":"11%","header-align":"center",align:"left"}}),e._v(" "),i("el-table-column",{attrs:{prop:"creater",label:"提交人","min-width":"5%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"assignedTo",label:"指派给","min-width":"5%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"personLiable",label:"责任人","min-width":"5%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"resolver",label:"处理人","min-width":"5%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"platform",label:"所属平台","min-width":"5%","header-align":"center",align:"center"}})],1),e._v(" "),i("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.totalRows,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},[],!1,null,null,null);t.default=o.exports},BYwb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","tableData","row","statusOptions","typeOptions"],mixins:[i("RHSg").a],data:function(){return{dialogForm:s()({},this.dialogFormData),rules:{account:[{required:!0,message:"请填写账号",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择账号类型",trigger:"blur"}],desc:[{min:0,max:300,message:"长度在 0 到 300 个字符",trigger:"blur"}],isActive:[{required:!0,message:"请选是否启用",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.id?t.update(t.$api.msgPushAccount.updateAccount):t.add(t.$api.msgPushAccount.addAccount))})}}},n=i("XyMi");var r=function(e){i("5C0g")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:e.dialogWidth,visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"账号",prop:"account"}},[i("el-input",{model:{value:e.dialogForm.account,callback:function(t){e.$set(e.dialogForm,"account",t)},expression:"dialogForm.account"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择账号类型"},model:{value:e.dialogForm.type,callback:function(t){e.$set(e.dialogForm,"type",t)},expression:"dialogForm.type"}},e._l(e.typeOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"email"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否启用",prop:"isActive"}},[i("el-radio-group",{model:{value:e.dialogForm.isActive,callback:function(t){e.$set(e.dialogForm,"isActive",t)},expression:"dialogForm.isActive"}},e._l(e.statusOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-84e5049e",null);t.default=l.exports},BriP:function(e,t,i){e.exports=i.p+"static/img/user.82ce3c3.png"},BvEW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o={props:["dialogVisible","executionPhaseOptions","executedEachSprintDict","casesInfoForUpdate","suiteId"],mixins:[i("RHSg").a],data:function(){return{dialogForm:{priority:"P3",executionMethod:"handwork",executionPhase:["SystemTesting"],desc:"",precondition:"",postcondition:"",tags:[]},priorityChecked:!0,priorityOptions:["p1","P2","P3","P4"],executionMethodOptions:[{label:"手工",value:"handwork"},{label:"自动化",value:"automation"}],executionMethodChecked:!1,executionPhaseChecked:!1,descChecked:!1,preconditionChecked:!1,postconditionChecked:!1,tagsChecked:!1,tagInputVisible:!1,tagInputValue:"",executedEachSprintMap:{},rules:{desc:[{min:0,max:1e3,message:"用例备注不能超过 1000 个字符",trigger:"blur"}],precondition:[{min:0,max:1e3,message:"前置条件不能超过 1000 个字符",trigger:"blur"}],postcondition:[{min:0,max:1e3,message:"后置条件不能超过 1000 个字符",trigger:"blur"}]}}},methods:{clickRadio:function(e,t){this.executedEachSprintMap[e.value].executedEachSprint=t},onCloseTag:function(e){this.dialogForm.tags.splice(this.caseInfo.tags.indexOf(e),1)},showTagInput:function(){var e=this;this.tagInputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleTagInputConfirm:function(){var e=this.tagInputValue;e&&-1==this.dialogForm.tags.indexOf(e)&&this.dialogForm.tags.push(e),this.tagInputVisible=!1,this.tagInputValue=""},caseInfoCheck:function(){return this.priorityChecked&&!this.dialogForm.priority?(this.$message.error("优先级不能为空"),!1):this.executionMethodChecked&&!this.dialogForm.executionMethod?(this.$message.error("执行方式不能为空"),!1):!(this.executionPhaseChecked&&!this.dialogForm.executionPhase.length)||(this.$message.error("执行阶段不能为空"),!1)},save:function(e){var t=this;try{this.$refs[e].validate(function(e){if(e){if(!t.caseInfoCheck())return;var i={};if(t.priorityChecked&&(i.priority=t.dialogForm.priority),t.executionMethodChecked&&(i.executionMethod=t.dialogForm.executionMethod),t.executionPhaseChecked){i.executionPhase=t.dialogForm.executionPhase;for(var a="",s=0;s<i.executionPhase.length;s++){var o=i.executionPhase[s];o in t.executedEachSprintMap&&(a+=o+"/"+t.executedEachSprintMap[o].executedEachSprint+",")}i.executedEachSprint=a.substring(0,a.length-1),i.executionPhase=i.executionPhase.join(",")}t.descChecked&&(i.desc=t.dialogForm.desc),t.preconditionChecked&&(i.precondition=t.dialogForm.precondition),t.postconditionChecked&&(i.postcondition=t.dialogForm.postcondition),t.tagsChecked&&(i.tags=t.dialogForm.tags,i.tags=i.tags.join(",")),i.targetCases=t.casesInfoForUpdate,i.suiteId=t.suiteId,t.$parent.loading=!0,t.$api.sprintCaseTable.batachUpdateTestCases(i).then(function(e){e.success?t.$message.success(e.msg):t.$message.error(e.msg),t.$parent.loading=!1,t.$parent.queryRows()}).catch(function(e){t.$parent.loading=!1,t.$message.error(e.msg||e.message),t.$parent.queryRows()}),t.closeDialog()}})}catch(e){this.$parent.loading=!1,this.$message.error(e.message)}}},created:function(){this.executedEachSprintMap=JSON.parse(s()(this.executedEachSprintDict))}},n=i("XyMi");var r=function(e){i("oOEt"),i("SfjD")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"批量修改用例",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":!0,"close-on-press-escape":e.closeOnPressEscape,"append-to-body":!0,"custom-class":"batch-update-cases-dlg-class"},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("div",{staticClass:"remark-text"},[e._v("\n            说明：\n            "),i("br"),e._v("1、未勾选【是否参与批量修改】则表示不修改该配置项，否则表示会修改，其它具体规则查看具体配置项说明\n            "),i("br"),e._v("2、数据量比较大的情况下，可能比较耗时，提交请求后请耐心等待\n        ")]),e._v(" "),i("el-form",{ref:"dialogForm",staticClass:"case-info-form",attrs:{model:e.dialogForm,rules:e.rules,"label-width":"70px",size:"mini"}},[i("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.dialogForm.priority,callback:function(t){e.$set(e.dialogForm,"priority",t)},expression:"dialogForm.priority"}},e._l(e.priorityOptions,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),i("el-checkbox",{staticClass:"participation-check-box",model:{value:e.priorityChecked,callback:function(t){e.priorityChecked=t},expression:"priorityChecked"}},[e._v("是否参与批量修改")])],1),e._v(" "),i("el-form-item",{attrs:{label:"执行方式",prop:"executionMethod"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.dialogForm.executionMethod,callback:function(t){e.$set(e.dialogForm,"executionMethod",t)},expression:"dialogForm.executionMethod"}},e._l(e.executionMethodOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),i("el-checkbox",{staticClass:"participation-check-box",model:{value:e.executionMethodChecked,callback:function(t){e.executionMethodChecked=t},expression:"executionMethodChecked"}},[e._v("是否参与批量修改")])],1),e._v(" "),i("el-form-item",{attrs:{label:"执行阶段",prop:"executionPhase"}},[i("el-select",{staticStyle:{width:"70%"},attrs:{size:"mini",multiple:""},model:{value:e.dialogForm.executionPhase,callback:function(t){e.$set(e.dialogForm,"executionPhase",t)},expression:"dialogForm.executionPhase"}},e._l(e.executionPhaseOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label+"/"+e.executedEachSprintMap[t.value].executedEachSprint,value:t.value}},[i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-right":"50px"}},[i("span",[e._v("每个迭代都执行？：")]),e._v(" "),i("el-radio",{attrs:{label:"Y"},nativeOn:{click:function(i){return e.clickRadio(t,"Y")}},model:{value:e.executedEachSprintMap[t.value].executedEachSprint,callback:function(i){e.$set(e.executedEachSprintMap[t.value],"executedEachSprint",i)},expression:"\n                executedEachSprintMap[item.value]['executedEachSprint']\n              "}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{label:"N"},nativeOn:{click:function(i){return e.clickRadio(t,"N")}},model:{value:e.executedEachSprintMap[t.value].executedEachSprint,callback:function(i){e.$set(e.executedEachSprintMap[t.value],"executedEachSprint",i)},expression:"\n                executedEachSprintMap[item.value]['executedEachSprint']\n              "}},[e._v("否")])],1)])}),1),e._v(" "),i("el-checkbox",{staticClass:"participation-check-box",model:{value:e.executionPhaseChecked,callback:function(t){e.executionPhaseChecked=t},expression:"executionPhaseChecked"}},[e._v("是否参与批量修改")])],1),e._v(" "),i("el-form-item",{attrs:{label:"用例备注",prop:"desc"}},[i("div",[i("el-input",{ref:"descInput",attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入用例备注(注意：如果已勾【选是否参与批量修改】，并且用例备注为空，则会清空已有用例备注)",maxlength:"1000","show-word-limit":""},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}}),e._v(" "),i("el-checkbox",{staticClass:"participation-check-box",model:{value:e.descChecked,callback:function(t){e.descChecked=t},expression:"descChecked"}},[e._v("是否参与批量修改")])],1)]),e._v(" "),i("el-form-item",{attrs:{label:"前置条件",prop:"preconditionInput"}},[i("el-input",{ref:"preconditionInput",attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入前置条件(注意：如果已勾【选是否参与批量修改】，并且前置条件为空，则会清空已有前置条件)",maxlength:"1000","show-word-limit":""},model:{value:e.dialogForm.precondition,callback:function(t){e.$set(e.dialogForm,"precondition",t)},expression:"dialogForm.precondition"}}),e._v(" "),i("el-checkbox",{staticClass:"participation-check-box",model:{value:e.preconditionChecked,callback:function(t){e.preconditionChecked=t},expression:"preconditionChecked"}},[e._v("是否参与批量修改")])],1),e._v(" "),i("el-form-item",{attrs:{label:"后置条件",prop:"postcondition"}},[i("el-input",{ref:"postconditionInput",staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word"},attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入后置条件(注意：如果已勾【选是否参与批量修改】，并且后置条件为空，则会清空已有后置条件)",maxlength:"1000","show-word-limit":""},model:{value:e.dialogForm.postcondition,callback:function(t){e.$set(e.dialogForm,"postcondition",t)},expression:"dialogForm.postcondition"}}),e._v(" "),i("el-checkbox",{staticClass:"participation-check-box",model:{value:e.postconditionChecked,callback:function(t){e.postconditionChecked=t},expression:"postconditionChecked"}},[e._v("是否参与批量修改")])],1),e._v(" "),i("el-form-item",{attrs:{label:"用例标签",prop:"tags"}},[e._l(e.dialogForm.tags,function(t){return i("el-tag",{key:t,attrs:{closable:!0,"disable-transitions":!0},on:{close:function(i){return e.onCloseTag(t)}}},[e._v(e._s(t))])}),e._v(" "),e.tagInputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleTagInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleTagInputConfirm(t)}},model:{value:e.tagInputValue,callback:function(t){e.tagInputValue=t},expression:"tagInputValue"}}):e._e(),e._v(" "),i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showTagInput}},[e._v("+点击新增标签")]),e._v(" "),i("el-checkbox",{staticClass:"participation-check-box",model:{value:e.tagsChecked,callback:function(t){e.tagsChecked=t},expression:"tagsChecked"}},[e._v("是否参与批量修改")]),e._v(" "),i("div",{staticClass:"custom-form-text"},[e._v("注意：如果已勾【选是否参与批量修改】，并且未设置用例标签，则会清空用例已有标签")])],2),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"})],1)],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])},[],!1,r,"data-v-1b75bde0",null);t.default=l.exports},C4MV:function(e,t,i){e.exports={default:i("9bBU"),__esModule:!0}},"EC/U":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("RRo+"),s=i.n(a),o=i("woOf"),n=i.n(o),r={props:["dialogTitle","dialogVisible","dialogFormData","row","tableData"],mixins:[i("RHSg").a],data:function(){return{dialogForm:n()({},this.dialogFormData),rules:{name:[{required:!0,message:"请填写阶段名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],code:[{required:!0,message:"请填写唯一编码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],order:[{required:!0,message:"请填写阶段顺序",trigger:"blur"},{validator:function(e,t,i){s()(Number(t))?Number(t)<0?i(new Error("请输入大于0的整数")):i():i(new Error("请输入整数"))},trigger:"blur"}],desc:[{min:0,max:300,message:"测试阶段描述不能超过 300 个字符",trigger:"blur"}]}}},methods:{add:function(){var e=this;this.$api.testPhase.addTestPhase(this.dialogForm).then(function(t){t.success?(e.$message.success(t.msg),e.closeDialog(),e.$parent.queryRows()):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},update:function(){var e=this;this.$api.testPhase.updateTestPhase(this.dialogForm).then(function(t){t.success?(e.$message.success(t.msg),e.closeDialog(),e.$parent.queryRows()):e.$message.error(t.msg)}).catch(function(t){e.$message.error("修改失败： "+t.msg||t.message)})},save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.id?t.update():t.add())})}}},l=i("XyMi");var c=function(e){i("zZ8Y")},u=Object(l.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:e.dialogWidth,visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"阶段名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"唯一编码",prop:"code"}},[i("el-input",{model:{value:e.dialogForm.code,callback:function(t){e.$set(e.dialogForm,"code",t)},expression:"dialogForm.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"阶段顺序",prop:"order"}},[i("el-input",{model:{value:e.dialogForm.order,callback:function(t){e.$set(e.dialogForm,"order",t)},expression:"dialogForm.order"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"阶段描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否默认阶段",prop:"default"}},[i("el-checkbox",{model:{value:e.dialogForm.default,callback:function(t){e.$set(e.dialogForm,"default",t)},expression:"dialogForm.default"}})],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,c,"data-v-c7c274d0",null);t.default=u.exports},EK2x:function(e,t){},EXiZ:function(e,t){},Ev5q:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),s=i.n(a),o={components:{SysMenuDialog:i("kt+b").default},data:function(){return{defaultProps:{label:"name",children:"children",isLeaf:"isLeaf"},defaultExpandedKeys:[],menuDialogVisible:!1,menuDialogTitle:"",menuData:null,menuNode:null}},methods:{loadNode:function(e,t){var i=this;0==e.level?this.$api.sysMenu.getSysMenuTree({parentId:-1,recursive:!1}).then(function(e){if(e.success){for(var a=0;a<e.data.length;a++)i.defaultExpandedKeys.push(e.data[a].id);return t(e.data)}return i.$message.error(e.msg),t([])}).catch(function(e){return i.$message.error(e.msg||e.message),t([])}):e.level>=1&&this.$api.sysMenu.getSysMenuTree({parentId:e.data.id,recursive:!1}).then(function(e){return e.success?t(e.data):(i.$message.error(e.msg),t([]))}).catch(function(e){return i.$message.error(e.msg||e.message),t([])})},addNode:function(e,t,i){var a;this.menuDialogVisible||(this.menuDialogVisible=!0,this.menuDialogTitle="添加资源",this.menuData=(a={parentId:t.id,type:"菜单",name:"",desc:""},s()(a,"name",""),s()(a,"url",""),s()(a,"icon",""),s()(a,"perms",""),s()(a,"requireAuth",!0),s()(a,"show",!0),s()(a,"showWithoutAuth",!0),s()(a,"collapsed",!1),s()(a,"order",""),a),this.menuNode=e)},editNode:function(e,t,i){this.menuDialogVisible||(this.menuDialogVisible=!0,this.menuDialogTitle="修改资源",this.menuData={id:t.id,type:t.type,name:t.name,desc:t.desc,url:t.url,icon:t.icon,perms:t.perms,requireAuth:t.requireAuth,show:t.show,showWithoutAuth:t.showWithoutAuth,collapsed:t.collapsed,order:t.order},this.menuNode=e)},removeNode:function(e,t,i){var a=this;this.$confirm("'确定删除吗？ 删除该节点，将会删除其下所有子节点","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){a.$api.sysMenu.deleteSysMenu({id:t.id}).then(function(t){t.success?(a.$refs.sysMenuTree.remove(e),a.$message({message:t.msg,type:"success"})):a.$message.error(t.msg)}).catch(function(e){a.$message.error(e.msg||e.message)})}).catch(function(){})},renderContent:function(e,t){var i=this,a=t.node,s=t.data,o=t.store;return e("span",{style:{},on:{mouseenter:function(){i.$set(s,"showOperationBtn",!0),i.$set(s,"children",[])},mouseleave:function(){i.$set(s,"showOperationBtn",!1)}}},[e("span",{},a.label),e("span",{style:{display:s.showOperationBtn?"":"none"}},[e("el-button",{props:{type:"text",size:"small"},style:{marginLeft:"10px"},on:{click:function(){i.addNode(a,s,o)}}},"添加"),e("el-button",{props:{type:"text",size:"small"},style:{display:s.id?"":"none"},on:{click:function(){i.editNode(a,s,o)}}},"修改"),e("el-button",{props:{type:"text",size:"small"},style:{display:s.id?"":"none"},on:{click:function(){i.removeNode(a,s,o)}}},"删除")])])}}},n=i("XyMi");var r=function(e){i("IU3X")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"system-menu-div"},[i("el-tree",{ref:"sysMenuTree",staticClass:"system-menu-tree",attrs:{props:e.defaultProps,load:e.loadNode,"empty-text":"未获取到数据，请尝试刷新页面",lazy:"","node-key":"id","expand-on-click-node":!1,"render-content":e.renderContent,"default-expanded-keys":e.defaultExpandedKeys}}),e._v(" "),e.menuDialogVisible?i("sys-menu-dialog",{attrs:{dialogVisible:e.menuDialogVisible,dialogTitle:e.menuDialogTitle,dialogFormData:e.menuData,menuNode:e.menuNode},on:{"update:dialogVisible":function(t){e.menuDialogVisible=t},"update:dialog-visible":function(t){e.menuDialogVisible=t}}}):e._e()],1)},[],!1,r,"data-v-a51c587e",null);t.default=l.exports},Ev5qI:function(e,t){},G9Mc:function(e,t){},GQzu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","row","tableData","statusOptions","userName"],mixins:[i("RHSg").a],data:function(){return{dialogForm:s()({},this.dialogFormData),rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],desc:[{min:0,max:300,message:"角色描述不能超过 300 个字符",trigger:"blur"}],isActive:[{required:!0,message:"请选是否启用",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.id?t.update(t.$api.sysRole.updateSysRole):t.add(t.$api.sysRole.addSysRole))})}}},n=i("XyMi");var r=function(e){i("iZc3")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:e.dialogWidth,visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否启用",prop:"isActive"}},[i("el-radio-group",{model:{value:e.dialogForm.isActive,callback:function(t){e.$set(e.dialogForm,"isActive",t)},expression:"dialogForm.isActive"}},e._l(e.statusOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),i("el-form-item",[i("div",{staticClass:"dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-2803c77c",null);t.default=l.exports},HOqd:function(e,t){},HdoR:function(e,t){},HpRW:function(e,t,i){"use strict";var a=i("kM2E"),s=i("lOnJ"),o=i("+ZMJ"),n=i("NWt+");e.exports=function(e){a(a.S,e,{from:function(e){var t,i,a,r,l=arguments[1];return s(this),(t=void 0!==l)&&s(l),void 0==e?new this:(i=[],t?(a=0,r=o(l,arguments[2],2),n(e,!1,function(e){i.push(r(e,a++))})):n(e,!1,i.push,i),new this(i))}})}},IEq8:function(e,t){},IU3X:function(e,t){},JUFp:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XyMi");var s=function(e){i("np54")},o=Object(a.a)({props:["tpadProjectVersionDlgVisible","tpadProjectVersionDlgTitle","row"],data:function(){return{loading:!1,loadingText:"",tpadProjectVersionForm:{name:this.row.name,publishDate:this.row.publishDate},rules:{publishDate:[{type:"string",required:!0,message:"请选择实际发布时间",trigger:"change"}]}}},methods:{onCloseDialog:function(){this.closeDialog()},closeDialog:function(){this.$emit("update:tpadProjectVersionDlgVisible",!1)},createTpadProjectVersion:function(){var e=this;try{this.loading=!0,this.loadingText="正在请求创建tpad项目版本";var t={sprintId:this.row.id,name:this.versionName,publishDate:this.tpadProjectVersionForm.publishDate,description:this.row.desc};this.$api.tpadProject.addTpadProjectVersion(t).then(function(t){if(t.success)for(var i in e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);else e.$message.error(t.msg);e.closeDialog(),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t.msg||t.message)})}catch(e){this.$message.error("请求创建tpad项目版本失败："+e.message),this.loading=!1}},updateTpadProjectVersion:function(){var e=this;try{this.loading=!0,this.loadingText="正在请求修改tpad项目版本";var t={sprintId:this.row.id,versionId:this.row.tpadProjectVersionId,name:this.versionName,publishDate:this.tpadProjectVersionForm.publishDate,description:this.row.desc};this.$api.tpadProject.updateTpadProjectVersion(t).then(function(t){if(t.success){for(var i in e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);e.closeDialog()}else e.$message.error(t.msg);e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t.msg||t.message)})}catch(e){this.$message.error("请求修改tpad项目版本失败："+e.message),this.loading=!1}},save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.row.tpadProjectVersionId?t.updateTpadProjectVersion():t.createTpadProjectVersion())})}},computed:{versionName:function(){return this.tpadProjectVersionForm.publishDate?this.row.name+"(发布于"+this.tpadProjectVersionForm.publishDate+")":this.row.name}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.tpadProjectVersionDlgTitle,width:"30%",visible:e.tpadProjectVersionDlgVisible,"show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!0,"element-loading-text":e.loadingText},on:{close:e.onCloseDialog}},[i("div",{staticClass:"user-dialog-div"},[i("el-form",{ref:"tpadProjectVersionForm",attrs:{model:e.tpadProjectVersionForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"版本名称",prop:"versionName"}},[i("el-input",{staticStyle:{width:"99%"},attrs:{size:"small",disabled:""},model:{value:e.versionName,callback:function(t){e.versionName=t},expression:"versionName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发布日期",prop:"publishDate"}},[i("el-date-picker",{staticStyle:{width:"99%"},attrs:{type:"date",size:"small",placeholder:"实际发布日期","value-format":"yyyy-MM-dd"},model:{value:e.tpadProjectVersionForm.publishDate,callback:function(t){e.$set(e.tpadProjectVersionForm,"publishDate",t)},expression:"tpadProjectVersionForm.publishDate"}})],1),e._v(" "),i("el-form-item",[i("div",{staticClass:"dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("tpadProjectVersionForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,s,"data-v-ba49762c",null);t.default=o.exports},JrVv:function(e,t){},"KG5/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=i("bOdI"),o=i.n(s),n=i("Dd8w"),r=i.n(n),l=i("//Fk"),c=i.n(l),u=i("UDo9"),d=i("ZmZA"),p=i("WyAQ"),m=i("2WM9"),g=i("8dVC"),h=i("NYxO"),f=i("0xvS"),v=(a={mixins:[u.a,f.a],data:function(){return{queryForm:{account:"",name:"",isActive:!0},userData:null,operateOneSelf:!1,userDialogVisible:!1,userDialogTitle:"",bindRoleDialogVisible:!1,bindGroupDialogVisible:!1,relatedAccountDlgVisible:!1,statusOptions:[{label:"启用",value:!0},{label:"禁用",value:!1}]}},components:{SysUserDialog:d.default,BindRoleDialog:p.default,BindGroupDialog:m.default,RelatedAccountDlg:g.default},methods:{addUser:function(){this.userDialogVisible||(this.userData={account:"",name:"",email:"",mobile:"",jobNumber:"",isActive:!0},this.operateOneSelf=!1,this.userDialogVisible=!0,this.userDialogTitle="新增用户")},editUser:function(e,t){this.userDialogVisible||(this.userData={id:t.id,account:t.account,name:t.name,email:t.email,mobile:t.mobile,jobNumber:t.jobNumber,isActive:t.isActive},this.userId==t.id?this.operateOneSelf=!0:this.operateOneSelf=!1,this.row=t,this.userDialogVisible=!0,this.userDialogTitle="修改用户")},deleteOneRow:function(e,t){t.isSuperuser?this.$alert("不能删除超级管理员","提示",{confirmButtonText:"确定"}):this.userId!=t.id?this.isSuperuser||this.$customUtils.permission.hasPermission("sys:user:delete")?this.deleteRow(e,t,this.$api.sysUser.deleteSysUser):this.$alert("抱歉，您没有删除用户权限","提示",{confirmButtonText:"确定"}):this.$alert("用户不能删除自身账号","提示",{confirmButtonText:"确定"})},deleteRows:function(){var e=this;this.isSuperuser||this.$customUtils.permission.hasPermission("sys:user:delete")?this.$confirm("确定要删除选中用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){if(e.rowsSelected.length){for(var t=[],i=0;i<e.rowsSelected.length;i++)e.rowsSelected[i].isSuperuser?e.$message.info("账号"+e.rowsSelected[i].account+"为超级管理员，不能删除，已自动为您跳过"):e.rowsSelected[i].id!=e.userId?t.push(e.rowsSelected[i].id):e.$message.info(e.rowsSelected[i].account+"为当前用户账号，不能删除，已自动为您跳过");t.length?e.$api.sysUser.deleteSysUsers({rowIds:t}).then(function(t){if(t.success){e.$message.success(t.msg),e.total=e.total-e.rowsSelected.length;for(var i=0;i<e.rowsSelected.length;i++)e.tableData.splice(e.tableData.indexOf(e.rowsSelected[i]),1);if(!e.tableData.length&&0!=e.total){var a=Math.ceil(e.total/e.pageSize);e.currentPage>a&&(e.currentPage-=1),e.queryRows()}}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)}):e.$message({message:"操作完成",type:"success"})}else e.$alert("未选择用户，请勾选至少一条用户","提示",{confirmButtonText:"确定"})}).catch(function(){}):this.$alert("抱歉，您没有删除用户权限","提示",{confirmButtonText:"确定"})},toggleUserStatus:function(e,t){var i=this;if(this.row=t,this.userId==t.id&&t.isActive)this.$alert("您不能禁用自身账号","提示",{confirmButtonText:"确定"});else if(this.isSuperuser||this.$customUtils.permission.hasPermission("sys:user:toggleStatus")){var a=t.isActive?"禁用":"启用";this.$confirm("确定要"+a+"该用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.sysUser.toggleUserStatus({id:t.id,isActive:!t.isActive}).then(function(e){if(e.success)for(var a in i.$message({message:e.msg,type:"success"}),e.data)a in t&&(t[a]=e.data[a]);else i.$message.error(e.msg)}).catch(function(e){i.$message.error(e.msg||e.message)})}).catch(function(){})}else this.$alert("抱歉，您没有修改用户状态的权限","提示",{confirmButtonText:"确定"})},bindRole:function(e,t){this.isSuperuser||this.$customUtils.permission.hasPermission("sys:user:bindRole")?this.bindRoleDialogVisible||(this.bindRoleDialogVisible=!0,this.row=t):this.$alert("抱歉，您没有分配角色的权限","提示",{confirmButtonText:"确定"})},deleteRelatedRole:function(e,t){var i=this;this.isSuperuser||this.$customUtils.permission.hasPermission("sys:user:deleteRole")?this.$confirm("确定要取消关联该角色吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.sysUser.deleteRelatedRole({userId:e.id,roleId:t.id}).then(function(a){if(a.success){i.$message({message:a.msg,type:"success"});var s=e.roles.indexOf(t);-1!=s&&e.roles.splice(s,1)}else i.$message.error(a.msg)}).catch(function(e){i.$message.error(e.msg||e.message)})}).catch(function(){}):this.$alert("抱歉，您没有删除用户角色的权限","提示",{confirmButtonText:"确定"})},bindGroup:function(e,t){this.isSuperuser||this.$customUtils.permission.hasPermission("sys:user:bindGrp")?this.bindGroupDialogVisible||(this.bindGroupDialogVisible=!0,this.row=t):this.$alert("抱歉，您没有关联用户组别的权限","提示",{confirmButtonText:"确定"})},deleteRelatedGroup:function(e,t){var i=this;this.isSuperuser||this.$customUtils.permission.hasPermission("sys:user:deleteGrp")?this.$confirm("确定要取消关联该组别吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.sysUser.deleteRelatedGroup({userId:e.id,groupId:t.id}).then(function(a){if(a.success){i.$message({message:a.msg,type:"success"});var s=e.groups.indexOf(t);-1!=s&&e.groups.splice(s,1)}else i.$message.error(a.msg)}).catch(function(e){i.$message.error(e.msg||e.message)})}).catch(function(){}):this.$alert("抱歉，您没有删除用户组别的权限","提示",{confirmButtonText:"确定"})},bindAccount:function(e,t){this.isSuperuser||this.userId==t.id?this.relatedAccountDlgVisible||(this.relatedAccountDlgVisible=!0,this.row=t):this.$alert("抱歉，您只能操作自己的账号","提示",{confirmButtonText:"确定"})},clearStatus:function(){this.queryForm.isActive=""},resetPasswd:function(e,t){var i=this;this.isSuperuser||this.$customUtils.permission.hasPermission("sys:user:resetPasswd")?this.$confirm("确定重置密码吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.sysUser.resetPasswd({userId:t.id}).then(function(e){e.success?i.$message.success(e.msg):i.$message.error(e.msg)}).catch(function(e){i.$message.error(e.msg||e.message)})}).catch(function(){}):this.$alert("抱歉，您没有重置用户密码的权限","提示",{confirmButtonText:"确定"})},getUserPersonalInfo:function(){var e=this;new c.a(this.$customUtils.userInfo.getCurrentUserInfo).then(function(t){e.$store.commit("setUserId",t.data.id),e.$store.commit("setIsSuperUser",t.data.isSuperuser)}).catch(function(t){e.$message.error(res.msg||res.message)})}},created:function(){void 0==this.isSuperuser&&this.getUserPersonalInfo()},updated:function(){this.setTableBodySize()}},o()(a,"created",function(){this.queryRowsAPI=this.$api.sysUser.getSysUsers,this.queryRows()}),o()(a,"computed",r()({},Object(h.b)({isSuperuser:function(e){return e.user.isSuperuser},userId:function(e){return e.user.userId}}))),a),b=i("XyMi");var y=function(e){i("WPqu")},_=Object(b.a)(v,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"账号"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入账号名称",clearable:""},model:{value:e.queryForm.account,callback:function(t){e.$set(e.queryForm,"account",t)},expression:"queryForm.account"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"姓名"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{clearable:""},on:{clear:e.clearStatus},model:{value:e.queryForm.isActive,callback:function(t){e.$set(e.queryForm,"isActive",t)},expression:"queryForm.isActive"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addUser}},[e._v("新增用户")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:e.deleteRows}},[e._v("删除用户")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,"empty-text":e.emptyText,border:"",stripe:"","highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"account",label:"账号","show-overflow-tooltip":"","header-align":"center",align:"left","min-width":"120px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"姓名","show-overflow-tooltip":"","header-align":"center",align:"center",width:"95px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":"","header-align":"center",align:"left","min-width":"230px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"mobile",label:"手机号","header-align":"center",align:"center",width:"115px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"jobNumber",label:"工号","show-overflow-tooltip":"","header-align":"center",align:"left",width:"110px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"roles",label:"所属角色","header-align":"center","min-width":"210px",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.roles,function(a){return i("span",{key:a.id,on:{click:function(e){e.stopPropagation()}}},[e._v("\n                    "+e._s(a.name)+"\n                    "),i("i",{staticClass:"el-icon-close",attrs:{"aria-hidden":"true"},on:{click:function(i){return i.preventDefault(),e.deleteRelatedRole(t.row,a)}}},[e._v(";  ")])])}),e._v(" "),i("el-button",{staticClass:"row-operation-btn",attrs:{size:"mini"},on:{click:function(i){return e.bindRole(t.$index,t.row)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e._v("分配角色\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"groups",label:"归属组别","header-align":"center","min-width":"210px",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.groups,function(a){return i("span",{key:a.id,on:{click:function(e){e.stopPropagation()}}},[e._v("\n                    "+e._s(a.name)+"\n                    "),i("i",{staticClass:"el-icon-close",attrs:{"aria-hidden":"true"},on:{click:function(i){return i.preventDefault(),e.deleteRelatedGroup(t.row,a)}}},[e._v(";  ")])])}),e._v(" "),i("el-button",{staticClass:"row-operation-btn",attrs:{size:"mini"},on:{click:function(i){return e.bindGroup(t.$index,t.row)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e._v("关联组别\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"isActive",label:"状态切换",width:"80px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isActive?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.toggleUserStatus(t.$index,t.row)}}},[e._v("禁用")]):i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.toggleUserStatus(t.$index,t.row)}}},[e._v("启用")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"lastLoginTime",label:"最后登录时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{staticClass:"operation-col",attrs:{label:"操作",align:"left",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editUser(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.bindAccount(t.$index,t.row)}}},[e._v("关联账号")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.resetPasswd(t.$index,t.row)}}},[e._v("重置密码")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteOneRow(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.userDialogVisible?i("sys-user-dialog",{attrs:{dialogVisible:e.userDialogVisible,dialogTitle:e.userDialogTitle,tableData:e.tableData,dialogFormData:e.userData,operateOneSelf:e.operateOneSelf,row:e.row,statusOptions:e.statusOptions},on:{"update:dialogVisible":function(t){e.userDialogVisible=t},"update:dialog-visible":function(t){e.userDialogVisible=t}}}):e._e(),e._v(" "),e.bindRoleDialogVisible?i("bind-role-dialog",{attrs:{dialogVisible:e.bindRoleDialogVisible,row:e.row},on:{"update:dialogVisible":function(t){e.bindRoleDialogVisible=t},"update:dialog-visible":function(t){e.bindRoleDialogVisible=t}}}):e._e(),e._v(" "),e.bindGroupDialogVisible?i("bind-group-dialog",{attrs:{dialogVisible:e.bindGroupDialogVisible,row:e.row},on:{"update:dialogVisible":function(t){e.bindGroupDialogVisible=t},"update:dialog-visible":function(t){e.bindGroupDialogVisible=t}}}):e._e(),e._v(" "),e.relatedAccountDlgVisible?i("related-account-dlg",{attrs:{dialogVisible:e.relatedAccountDlgVisible,userId:e.row.id},on:{"update:dialogVisible":function(t){e.relatedAccountDlgVisible=t},"update:dialog-visible":function(t){e.relatedAccountDlgVisible=t}}}):e._e()],1)},[],!1,y,"data-v-bf451d70",null);t.default=_.exports},KQdp:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),s=i.n(a),o=i("X3Vt"),n=i("UDo9"),r=i("0xvS"),l={mixins:[n.a,r.a],props:["productID"],data:function(){return{queryForm:{productId:this.productID,name:"",version:"",status:""},dialogFormData:null,statusOptions:[{label:"未开始",value:"未开始"},{label:"进行中",value:"进行中"},{label:"已结束",value:"已结束"}],sprintDialogVisible:!1,sprintDialogTitle:""}},components:{SprintDialog:o.default},methods:{querySprints:function(e){if(!this.productID)return this.total=0,void(this.tableData=[]);this.queryRows(e)},addSprint:function(){this.productID?this.sprintDialogVisible||(this.dialogFormData={name:"",version:"",productId:this.productID,beginTime:"",endTime:"",desc:"",status:"进行中"},this.sprintDialogVisible=!0,this.sprintDialogTitle="新增迭代"):this.$message.error("请先选择产品")},copySprint:function(e,t){this.sprintDialogVisible||(this.dialogFormData={name:t.name,version:t.version,productId:t.productId,beginTime:t.beginTime,endTime:t.endTime,desc:t.desc,status:t.status},this.sprintDialogVisible=!0,this.sprintDialogTitle="复制迭代")},editSprint:function(e,t){var i;this.sprintDialogVisible||(this.dialogFormData=(i={id:t.id,productId:t.productId,name:t.name,version:t.version},s()(i,"productId",t.productId),s()(i,"beginTime",t.beginTime),s()(i,"endTime",t.endTime),s()(i,"desc",t.desc),s()(i,"status",t.status),i),this.row=t,this.sprintDialogVisible=!0,this.sprintDialogTitle="修改迭代")}},updated:function(){this.setTableBodySize()},created:function(){this.queryRowsAPI=this.$api.sprint.getSprints,this.querySprints()}},c=i("XyMi");var u=function(e){i("deYz")},d=Object(c.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"迭代名称"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入迭代名称",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"版本"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入版本",clearable:""},model:{value:e.queryForm.version,callback:function(t){e.$set(e.queryForm,"version",t)},expression:"queryForm.version"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.querySprints("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addSprint}},[e._v("新增迭代")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.sprint.deleteSprints)}}},[e._v("删除迭代")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,"cell-class-name":e.getCellClassName,"highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"迭代名称","header-align":"center",align:"left","show-overflow-tooltip":"","min-width":"180px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"version",label:"版本","header-align":"center","show-overflow-tooltip":"",align:"left",width:"130px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态",width:"80px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"beginTime",label:"预估开始日期",width:"110px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"endTime",label:"预估结束日期",width:"110px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"描述","header-align":"center",align:"left","min-width":"250px","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"更新人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"215px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editSprint(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.copySprint(t.$index,t.row)}}},[e._v("复制")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.sprint.deleteSprint)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.sprintDialogVisible?i("sprint-dialog",{attrs:{dialogVisible:e.sprintDialogVisible,dialogTitle:e.sprintDialogTitle,tableData:e.tableData,statusOptions:e.statusOptions,row:e.row,dialogFormData:e.dialogFormData},on:{"update:dialogVisible":function(t){e.sprintDialogVisible=t},"update:dialog-visible":function(t){e.sprintDialogVisible=t}}}):e._e()],1)},[],!1,u,"data-v-0c156fa3",null);t.default=d.exports},KqL6:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var a={data:function(){return{ifMouseDown:!1,leftElementOffsetLeft:0}},methods:{getOffsetLeft:function(e){for(var t=e.offsetLeft,i=e.offsetParent;null!=i;)t+=i.offsetLeft,i=i.offsetParent;return t},mousedown:function(e){if(this.$refs.leftElement){this.leftElementOffsetLeft=this.getOffsetLeft(this.$refs.leftElement.$el);var t=this.$refs.leftElement.$el,i=this.leftElementOffsetLeft+t.offsetWidth;i-10<=e.pageX&&e.pageX<=i+10?(this.ifMouseDown=!0,document.body.style.cursor="e-resize"):(this.ifMouseDown=!1,document.body.style.cursor="auto")}},mousemove:function(e){if(this.$refs.leftElement){this.leftElementOffsetLeft=this.getOffsetLeft(this.$refs.leftElement.$el);var t=this.$refs.leftElement.$el,i=this.leftElementOffsetLeft+t.offsetWidth;if(i-10<=e.pageX&&e.pageX<=i+10?document.body.style.cursor="e-resize":this.ifMouseDown||(document.body.style.cursor="auto"),this.ifMouseDown&&e.pageX>this.leftElementOffsetLeft+15&&e.pageX<this.leftElementOffsetLeft+document.body.offsetWidth/2){e.preventDefault();var a=e.pageX-this.leftElementOffsetLeft;t.style.width=a+"px",this.$refs.rightElement.$el.style.left=a+2+"px",this.$refs.rightElement.setTableBodySize&&this.$refs.rightElement.setTableBodySize()}}},mouseup:function(){this.ifMouseDown=!1}}}},"L+JL":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o={props:["dialogVisible","dialogTitle","tableData","row","dialogFormData","sprintOptions"],mixins:[i("RHSg").a],data:function(){return{dialogForm:this.dialogFormData,envOptions:[],projectOptions:[],rules:{name:[{required:!0,message:"请输入测试计划名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],desc:[{min:0,max:300,message:"描述不能超过 300 个字符",trigger:"blur"}],beginTime:[{required:!0,message:"请选择预估开始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择预估结束时间",trigger:"change"}],projectIds:[{required:!0,message:"请选择要关联的项目",trigger:"change"}],sprint:[{required:!0,message:"请选择迭代",trigger:"change"}],envNames:[{required:!0,message:"请选择执行环境",trigger:"change"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(new Date(t.dialogForm.beginTime.replace(/-/g,"/")).getTime()>new Date(t.dialogForm.endTime.replace(/-/g,"/")).getTime())return void t.$message.error("开始时间不能晚于结束时间");t.requestData=JSON.parse(s()(t.dialogForm)),t.requestData.sprintId=t.requestData.sprint.id,t.requestData.sprintName=t.requestData.sprint.name,delete t.requestData.sprint;var i=[];if(t.projectOptions.forEach(function(e){t.requestData.projectIds.includes(e.id)&&i.push(e.name)}),t.requestData.projectIds=t.requestData.projectIds.join(","),t.requestData.envNames=t.requestData.envNames.join(","),t.requestData.id){var a=t.row.projectNames;i.length&&(a=i.join(",")),t.requestData.projectNames=a,t.update(t.$api.sprintTestPlan.updateTestPlan)}else{var o=i.join(",");t.requestData.projectNames=o,t.add(t.$api.sprintTestPlan.addTestPlan)}}})},getSprintsDetails:function(){var e=this;this.$api.product.getProductSprintsDetails({productId:this.dialogForm.productId}).then(function(t){t.success?(e.sprintOptions=t.data,e.sprintOptions.length&&(e.dialogForm.sprint||(e.dialogForm.sprint=e.sprintOptions[0]))):(e.sprintOptions=[],e.$message.error(t.msg))}).catch(function(t){e.$message.error(t.msg||t.message),e.sprintOptions=[]})},getProductProjectOptions:function(){var e=this;this.projectOptions=[],this.dialogForm.productId&&this.$api.project.getProductProjectsDetails({productId:this.dialogForm.productId}).then(function(t){t.success?e.projectOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},getEnvOptions:function(){var e=this;this.envOptions=[],this.$api.env.getEnvsDetails().then(function(t){t.success?e.envOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},created:function(){this.$parent.getProductSprintsDetails(),this.getProductProjectOptions(),this.getEnvOptions()}},n=i("XyMi");var r=function(e){i("kPjl")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:"40%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",staticClass:"demo-dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":"115px"}},[i("el-form-item",{attrs:{label:"计划名称",prop:"name"}},[i("el-input",{staticClass:"datetime-input-style",attrs:{placeholder:"请填写计划名称"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估开始日期",prop:"beginTime"}},[i("el-date-picker",{staticClass:"datetime-input-style",attrs:{type:"date",placeholder:"预估计划开始日期","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.beginTime,callback:function(t){e.$set(e.dialogForm,"beginTime",t)},expression:"dialogForm.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估结束日期",prop:"endTime"}},[i("el-date-picker",{staticClass:"datetime-input-style",attrs:{type:"date",placeholder:"预估计划结束日期","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.endTime,callback:function(t){e.$set(e.dialogForm,"endTime",t)},expression:"dialogForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"关联迭代",prop:"sprint"}},[i("el-select",{staticClass:"datetime-input-style",attrs:{disabled:e.dialogForm.planId&&0!=e.row.caseNumRelated,multiple:!1,filterable:"","value-key":"id",placeholder:"请选择迭代"},model:{value:e.dialogForm.sprint,callback:function(t){e.$set(e.dialogForm,"sprint",t)},expression:"dialogForm.sprint"}},e._l(e.sprintOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"关联项目",prop:"projectIds"}},[i("el-select",{staticClass:"datetime-input-style",attrs:{filterable:"",multiple:!0,placeholder:"请选择项目"},model:{value:e.dialogForm.projectIds,callback:function(t){e.$set(e.dialogForm,"projectIds",t)},expression:"dialogForm.projectIds"}},e._l(e.projectOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"执行环境",prop:"envNames"}},[i("el-select",{staticClass:"datetime-input-style",attrs:{multiple:!0,clearable:"",placeholder:"请选择计划执行环境"},model:{value:e.dialogForm.envNames,callback:function(t){e.$set(e.dialogForm,"envNames",t)},expression:"dialogForm.envNames"}},e._l(e.envOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"计划描述",prop:"desc"}},[i("el-input",{staticClass:"datetime-input-style",attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-dd6872bc",null);t.default=l.exports},LIJb:function(e,t,i){var a=i("EqjI");e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},LUL7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("qM2I"),s=i("UDo9"),o=i("0xvS"),n={mixins:[s.a,o.a],data:function(){return{queryForm:{name:""},groupData:null,dialogVisible:!1,dialogTitle:"",relatedGroupDlgVisible:!1,idOfSetTimeOut:null}},components:{SysGroupDialog:a.default},methods:{addSysGroup:function(){this.dialogVisible||(this.groupData={name:"",desc:""},this.dialogVisible=!0,this.dialogTitle="新增组别")},editSysGroup:function(e,t){this.dialogVisible||(this.row=t,this.groupData={id:t.id,name:t.name,desc:t.desc},this.dialogVisible=!0,this.dialogTitle="修改组别")}},updated:function(){this.setTableBodySize()},created:function(){this.queryRowsAPI=this.$api.sysGroup.getSysGroups,this.queryRows()}},r=i("XyMi");var l=function(e){i("2AQu")},c=Object(r.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"组别"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入组别名称",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addSysGroup}},[e._v("新增组别")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.sysGroup.deleteSysGroups)}}},[e._v("删除组别")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,"cell-class-name":e.getCellClassName,"highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[e._v("\n        >\n        "),e._v(" "),i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"组别名称","header-align":"center",align:"left","min-width":"150px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"组别描述","header-align":"center",align:"center","min-width":"150px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"更新人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editSysGroup(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.sysGroup.deleteSysGroup)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.dialogVisible?i("sys-group-dialog",{attrs:{dialogVisible:e.dialogVisible,dialogTitle:e.dialogTitle,tableData:e.tableData,row:e.row,dialogFormData:e.groupData},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t}}}):e._e()],1)},[],!1,l,"data-v-34e90f12",null);t.default=c.exports},LjkV:function(e,t){},LtmD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:["dialogVisible","currentModule"],mixins:[i("RHSg").a],data:function(){return{sprintOptions:[],sprintId:""}},methods:{onSprintSelectedChange:function(e){e&&sessionStorage.setItem("sprintSelectedForCaseCopy",e)},save:function(){var e=this;this.sprintId?this.$api.sprintCaseTable.copyCaseToSprintDlg({sprintId:this.sprintId,productId:this.$parent.productID,testcases:this.$parent.casesCopyToSprint}).then(function(t){t.success?(e.$message.success(t.msg),e.closeDialog()):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)}):this.$alert("未选择迭代项目，请选择","提示",{confirmButtonText:"确定"})},getSprintsDetails:function(){var e=this;this.$api.product.getProductSprintsDetails({productId:this.$parent.productID}).then(function(t){if(t.success){e.sprintOptions=t.data;var i=sessionStorage.getItem("sprintSelectedForCaseCopy");if(i)i=parseInt(i),e.sprintOptions.some(function(e){if(e.id==i)return!0})&&(e.sprintId=i)}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},created:function(){this.getSprintsDetails()}},s=i("XyMi");var o=function(e){i("hq6T")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"克隆用例至迭代",width:"40%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{attrs:{"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"克隆至迭代"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择迭代"},on:{change:e.onSprintSelectedChange},model:{value:e.sprintId,callback:function(t){e.sprintId=t},expression:"sprintId"}},e._l(e.sprintOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("开始克隆")])],1)])],1)],1)])},[],!1,o,"data-v-042d9806",null);t.default=n.exports},"M7n+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o={data:function(){return{projects:[],projectSelected:"",showProjectVersionTable:!0}},components:{ProjectVersionTable:i("PaUe").default},methods:{onProjectChange:function(e){var t=this,i="";e?i=s()(this.projectSelected):this.projectSelected="",sessionStorage.setItem("projectForVersionPage",i),this.showProjectVersionTable=!1,this.$nextTick(function(){t.showProjectVersionTable=!0})}},created:function(){var e=this;this.$api.project.getProjectsDetails({fields:"id,name,product_id"}).then(function(t){if(t.success)if(e.projects=t.data,e.projects.length){var i=sessionStorage.getItem("projectForVersionPage");if(i)i=JSON.parse(i),e.projects.some(function(e){if(e.id==i.id)return!0})?e.projectSelected=i:(e.projectSelected="",sessionStorage.setItem("projectForVersionPage",e.projectSelected));else e.projectSelected=e.projects[0],sessionStorage.setItem("projectForVersionPage",s()(e.projectSelected));e.showProjectVersionTable=!1,e.$nextTick(function(){e.showProjectVersionTable=!0})}else e.projectSelected="";else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},n=i("XyMi");var r=function(e){i("LjkV")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"view-wrapper"},[i("div",{staticClass:"common-top-bar-wrapper"},[i("span",{staticClass:"span-font"},[e._v("项目名称")]),e._v(" "),i("el-select",{attrs:{filterable:"",clearable:"","value-key":"id",size:"small",placeholder:"输入搜索关键词"},on:{change:e.onProjectChange},model:{value:e.projectSelected,callback:function(t){e.projectSelected=t},expression:"projectSelected"}},e._l(e.projects,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),e.showProjectVersionTable?i("project-version-table",{staticClass:"project-version-table",attrs:{project:e.projectSelected}}):e._e()],1)},[],!1,r,"data-v-ee6c997c",null);t.default=l.exports},MAlW:function(e,t){for(var i=[],a=0;a<256;++a)i[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,s=i;return[s[e[a++]],s[e[a++]],s[e[a++]],s[e[a++]],"-",s[e[a++]],s[e[a++]],"-",s[e[a++]],s[e[a++]],"-",s[e[a++]],s[e[a++]],"-",s[e[a++]],s[e[a++]],s[e[a++]],s[e[a++]],s[e[a++]],s[e[a++]]].join("")}},MGeU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XyMi");var s=function(e){i("XrWv")},o=Object(a.a)({props:["dialogVisible","suiteIdForDel","suiteTypeForDel"],data:function(){return{delBaseSuitesCascade:"1"}},methods:{closeDialog:function(){this.$emit("update:dialogVisible",!1)},cancel:function(){this.closeDialog()},confirm:function(){var e=this;this.$api.sprintCaseSuite.deleteSprintCaseSuite({suiteId:this.suiteIdForDel,type:this.suiteTypeForDel,delBaseSuitesCascade:this.delBaseSuitesCascade}).then(function(t){t.success?(e.$parent.removeCurrNodeClicked(),e.$message.success(t.msg)):e.$message.error(t.msg),e.closeDialog()}).catch(function(t){e.$message.error(t.msg||t.message)})}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"提示",width:"40%",visible:e.dialogVisible,"append-to-body":!0,"show-close":!1}},[i("div",{staticClass:"my-dialog-body"},[i("div",[e._v("确定要删除该测试集吗？ 删除该测试集将会删除其所有子测试集")]),e._v(" "),"sprint"==e.suiteTypeForDel?i("div",[i("br"),e._v(" "),i("div",[i("el-radio",{attrs:{label:"1"},model:{value:e.delBaseSuitesCascade,callback:function(t){e.delBaseSuitesCascade=t},expression:"delBaseSuitesCascade"}},[e._v("级联删除关联的基线测试集")]),e._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:e.delBaseSuitesCascade,callback:function(t){e.delBaseSuitesCascade=t},expression:"delBaseSuitesCascade"}},[e._v("不删除关联的基线测试集")])],1),e._v(" "),i("br"),e._v(" "),i("div",[e._v("备注：如果关联的基线测试集下存在用例，则跳过删除该基线测试集及其父测试集")])]):e._e()]),e._v(" "),i("div",{staticClass:"dialog-footer"},[i("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},[],!1,s,null,null);t.default=o.exports},NGlO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{src:"",loading:null}},methods:{resetSrc:function(e){this.src=e,this.load()},load:function(){this.loading=this.$loading({lock:!0,text:"loading...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)",target:document.querySelector("#main-container")})},onloaded:function(){this.loading&&this.loading.close()}},mounted:function(){this.resetSrc(this.$store.state.iframe.iframeUrl)},watch:{$route:{handler:function(e,t){this.resetSrc(this.$store.state.iframe.iframeUrl)}}}},s=i("XyMi");var o=function(e){i("A750")},n=Object(s.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"iframe-container"},[t("iframe",{staticClass:"frame",attrs:{src:this.src,scrolling:"auto",frameborder:"0",onload:this.onloaded()}})])},[],!1,o,null,null);t.default=n.exports},NZ1Z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={components:{WorkBench:WorkBench},mounted:function(){this.$customUtils.headerMenu.initMenuComponent()}},s=i("XyMi"),o=Object(s.a)(a,function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("待改造")])},[],!1,null,null,null);t.default=o.exports},O6S3:function(e,t){},OHla:function(e,t){},Od9w:function(e,t){},Oo6W:function(e,t){},OqEA:function(e,t){},PHpH:function(e,t){},PLqY:function(e,t){},PZYA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("EC/U"),s=i("UDo9"),o=i("0xvS"),n={mixins:[s.a,o.a],data:function(){return{testPhaseData:null,dialogVisible:!1,dialogTitle:"",checkTestPhase:!1}},components:{TestPhaseDialog:a.default},methods:{addTestPhase:function(){this.dialogVisible||(this.testPhaseData={name:"",code:"",order:"",desc:"",default:!1},this.dialogVisible=!0,this.dialogTitle="新增测试阶段")},editTestPhase:function(e,t){this.dialogVisible||(this.testPhaseData={id:t.id,name:t.name,code:t.code,order:t.order,desc:t.desc,default:t.default},this.row=t,this.dialogVisible=!0,this.dialogTitle="修改测试阶段")},toggleDefaultTestPhase:function(e){var t=this,i={id:e.id,default:e.default};this.$api.testPhase.updateTestPhase(i).then(function(e){e.success?(t.$message.success(e.msg),t.queryRows()):t.$message.error(e.msg)}).catch(function(e){t.$message.error("修改失败： "+e)})}},updated:function(){this.setTableBodySize()},created:function(){this.queryRowsAPI=this.$api.testPhase.getTestPhases,this.queryRows()}},r=i("XyMi");var l=function(e){i("Oo6W")},c=Object(r.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addTestPhase}},[e._v("新增测试阶段")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.testPhase.deleteTestPhases)}}},[e._v("删除测试阶段")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,"cell-class-name":e.getCellClassName,"highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"测试阶段名称","header-align":"center",align:"left","min-width":"200px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"default",label:"是否默认阶段","header-align":"center",align:"center","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-checkbox",{on:{change:function(i){return e.toggleDefaultTestPhase(t.row)}},model:{value:t.row.default,callback:function(i){e.$set(t.row,"default",i)},expression:"scope.row.default"}},[e._v(e._s(t.row.default?"是":"否"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"code",label:"唯一编码","header-align":"center",align:"center","min-width":"200px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"order",label:"阶段顺序","header-align":"center",align:"center","min-width":"80px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"阶段描述","header-align":"center",align:"left","min-width":"250px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人","min-width":"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"修改人","min-width":"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"修改时间","min-width":"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editTestPhase(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.testPhase.deleteTestPhase)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.dialogVisible?i("test-phase-dialog",{attrs:{dialogVisible:e.dialogVisible,dialogTitle:e.dialogTitle,tableData:e.tableData,dialogFormData:e.testPhaseData,row:e.row,total:e.total,pageSize:e.pageSize},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t},"update:total":function(t){e.total=t}}}):e._e()],1)},[],!1,l,null,null);t.default=c.exports},PaUe:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),s=i.n(a),o=i("yGFX"),n=i("YYHX"),r=i("UDo9"),l=i("0xvS"),c={mixins:[r.a,l.a],props:["project"],data:function(){return{queryForm:{name:""},projectVersionData:null,dialogVisible:!1,bindProjectVersionDlgVisible:!1,dialogTitle:""}},components:{ProjectVersionDialog:o.default,BindProjectVersionDialog:n.default},methods:{queryRows:function(e){var t=this;this.tableData=[],"clickQuery"==e&&(this.currentPage=1),this.queryForm.pageSize=this.pageSize,this.queryForm.pageNo=this.currentPage,this.project?(this.queryForm.projectId=this.project.id,this.$api.projectVersion.getProjectVersions(this.queryForm).then(function(e){e.success?(t.total=e.data.total,t.tableData=e.data.rows):t.$message.error(e.msg)}).catch(function(e){t.$message.error("获取表记录出错： "+e.msg||e.message)})):this.total=0},addVersion:function(){this.project?this.dialogVisible||(this.projectVersionData=s()({name:"",beginTime:"",endTime:"",desc:"",projectId:this.project.id,productId:this.project.productId,sprint:null},"desc",""),this.dialogVisible=!0,this.dialogTitle="新增项目版本"):this.$alert("请先选择项目","提示",{confirmButtonText:"确定"})},editVersion:function(e,t){this.dialogVisible||(this.projectVersionData={id:t.id,name:t.name,beginTime:t.beginTime,endTime:t.endTime,productId:this.project.productId,sprint:{id:t.sprintId,name:t.sprintName},desc:t.desc},this.row=t,this.dialogVisible=!0,this.dialogTitle="修改项目版本")},bindProjectVersion:function(e,t){this.associatedProjectVersion={projectVersion:null},this.row=t,this.bindProjectVersionDlgVisible=!0},changeProjectVersionAssociated:function(e,t){this.associatedProjectVersion={projectVersion:{name:t.platformProjectVersionName,id:t.platformProjectVersionId,platform:t.platform}},this.row=t,this.bindProjectVersionDlgVisible=!0}},created:function(){this.queryRows()},updated:function(){this.setTableBodySize()}},u=i("XyMi");var d=function(e){i("HOqd")},p=Object(u.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"版本名称"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入版本名称",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addVersion}},[e._v("新增项目版本")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.projectVersion.deleteProjectVersions)}}},[e._v("删除项目版本")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,"highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"版本名称","header-align":"center",align:"left","min-width":"250px","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"beginTime",label:"预估开始日期",width:"110px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"endTime",label:"预估结束日期",width:"110px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sprint",label:"关联迭代","header-align":"center",align:"left","min-width":"200px","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"版本描述","header-align":"center",align:"left","min-width":"250px","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"platformProjectVersion",label:"关联项目版本","header-align":"center",align:"center","show-overflow-tooltip":"","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.platformProjectVersionName?i("el-link",{attrs:{type:"primary"},on:{click:function(i){return e.changeProjectVersionAssociated(t.$index,t.row)}}},[e._v("\n                    "+e._s(t.row.platformProjectVersionName)+"\n                    "),i("i",{staticClass:"el-icon-edit"})]):i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.bindProjectVersion(t.$index,t.row)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e._v("关联项目版本\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"更新人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"table-row-operation-btn",attrs:{size:"mini"},on:{click:function(i){return e.editVersion(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.projectVersion.deleteProjectVersion)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.dialogVisible?i("project-version-dialog",{attrs:{dialogVisible:e.dialogVisible,dialogTitle:e.dialogTitle,tableData:e.tableData,row:e.row,dialogFormData:e.projectVersionData},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t}}}):e._e(),e._v(" "),e.bindProjectVersionDlgVisible?i("bind-project-version-dialog",{attrs:{dialogVisible:e.bindProjectVersionDlgVisible,row:e.row,dialogFormData:e.associatedProjectVersion},on:{"update:dialogVisible":function(t){e.bindProjectVersionDlgVisible=t},"update:dialog-visible":function(t){e.bindProjectVersionDlgVisible=t}}}):e._e()],1)},[],!1,d,"data-v-5ba5b557",null);t.default=p.exports},Pjag:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bAqY"),s=i("Ql+R"),o=i("KqL6"),n=i("RHSg"),r={props:["dialogVisible","planRow"],components:{SprintCaseSuiteTree:a.default,SprintCaseTable:s.default},mixins:[o.a,n.a],data:function(){return{currentModule:"bindPlanAndCaseDialog",caseBinding:!1}},methods:{bindCases:function(){var e=this,t=this.$refs.rightElement.$refs.myTable.selection;this.caseBinding?this.$message.warning("正在执行关联用例操作，请稍后再试"):(this.caseBinding=!0,this.$api.sprintTestPlan.bindTestCases({planId:this.planRow.id,guidsOfRelatedOldCases:this.$refs.rightElement.guidsOfRelatedOldCases,rowsSelected:t}).then(function(t){t.success?(e.$message.success(t.msg),e.$nextTick(function(){for(var i in t.data)i in e.planRow&&(e.planRow[i]=t.data[i])})):e.$message.error(t.msg),e.caseBinding=!1}).catch(function(t){e.$message.error(t.msg||t.message),e.caseBinding=!1}))}},mounted:function(){this.$refs.bindCaseDialog.$el.addEventListener("mousedown",this.mousedown,!1),this.$refs.bindCaseDialog.$el.addEventListener("mousemove",this.mousemove,!1),this.$refs.bindCaseDialog.$el.addEventListener("mouseup",this.mouseup,!1)},beforeDestroy:function(){this.$refs.bindCaseDialog.$el.removeEventListener("mousedown",this.mousedown),this.$refs.bindCaseDialog.$el.removeEventListener("mousemove",this.mousemove),this.$refs.bindCaseDialog.$el.removeEventListener("mouseup",this.mouseup)}},l=i("XyMi");var c=function(e){i("6bu4")},u=Object(l.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{ref:"bindCaseDialog",attrs:{title:"关联用例",width:"80%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("sprint-case-suite-tree",{ref:"leftElement",staticClass:"sprint-case-suite-tree",attrs:{sprintID:e.planRow.sprintId,productID:e.planRow.productId,currentModule:e.currentModule}}),e._v(" "),i("sprint-case-table",{ref:"rightElement",staticClass:"sprint-case-table",attrs:{currentModule:e.currentModule,testplanId:e.planRow.id,productID:e.planRow.productId,sprintID:e.planRow.sprintId}})],1),e._v(" "),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.bindCases}},[e._v("关联选中")]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("完成")])],1)])},[],!1,c,"data-v-5c5a6a7a",null);t.default=u.exports},PmqB:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("w7g/"),s=i("YHwu"),o={components:{NavBar:a.default,SubMainContent:s.default},mounted:function(){this.$customUtils.headerMenu.initMenuComponent()}},n=i("XyMi");var r=function(e){i("6qSS")},l=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("nav-bar"),this._v(" "),t("sub-main-content")],1)},[],!1,r,null,null);t.default=l.exports},"QH+F":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("6uj/"),s=i("RHSg"),o={props:["dialogVisible","roleID"],components:{SysMenuTree:a.default},mixins:[s.a],data:function(){return{menuBinding:!1,relatedMenus:[]}},methods:{bindMenu:function(){var e=this;try{this.menuBinding=!0;for(var t=this.$refs.tree.$refs.sysMenuTree.getCheckedNodes(!1,!0),i=[],a=0;a<t.length;a++)i.push(t[a].id);this.relatedMenus=i,this.$api.sysRole.bindMenu({roleId:this.roleID,relatedMenus:this.relatedMenus}).then(function(t){t.success?e.$message({message:t.msg,type:"success"}):e.$message.error(t.msg),e.menuBinding=!1}).catch(function(t){e.$message.error(t.msg||t.message),e.menuBinding=!1})}catch(e){this.$message.error(e.message),this.menuBinding=!1}}}},n=i("XyMi");var r=function(e){i("lvfT")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"关联菜单",width:"60%",visible:e.dialogVisible,"show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!0},on:{close:e.onCloseDialog}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.menuBinding,expression:"menuBinding"}],staticClass:"my-dialog-body",attrs:{"element-loading-text":"正在绑定"}},[i("sys-menu-tree",{ref:"tree",staticClass:"sys-menu-tree",attrs:{relatedMenus:e.relatedMenus,roleID:e.roleID},on:{"update:relatedMenus":function(t){e.relatedMenus=t},"update:related-menus":function(t){e.relatedMenus=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("关闭")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.bindMenu}},[e._v("保存")])],1)])},[],!1,r,"data-v-cfadddd8",null);t.default=l.exports},"Ql+R":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),o=i("woOf"),n=i.n(o),r=i("NYxO"),l=i("UDo9"),c=i("0xvS"),u=i("Z1j4"),d=i("rIxZ"),p=i("LtmD"),m=i("BvEW"),g={mixins:[l.a,c.a],props:["currentModule","relatedCaseGuidList","testplanId","productID","sprintID"],data:function(){return{queryForm:{startTime:"",endTime:"",name:"",priority:[],executionPhase:"",executionMethod:"handwork",executedEachSprint:"",showHistoryOnly:"",recursive:"1",creater:"",updater:"",tag:"",sort:"-id"},caseData:null,pageSizes:[10,15,20,25,30,40,50,100,150],pageSize:15,showCaseDialog:!1,caseDialogLoaded:!1,caseDialogEditing:!1,caseDialogTitle:"查看用例",operation:"viewCase",guidsOfRelatedOldCases:[],caseOrder:1,importCaseDialogVisible:!1,copyCaseToSprintDlgVisible:!1,dataForImportCase:{},casesCopyToSprint:[],priorityOptions:[{label:"P1",value:"P1"},{label:"P2",value:"P2"},{label:"P3",value:"P3"},{label:"P4",value:"P4"}],executionPhaseOptions:[],executedEachSprintDict:{},loading:!1,elementLoadingText:"",updateCasesDlgVisible:!1,casesInfoForUpdate:[],confirmRadioValue:"1",isQueryItemsCollapsed:!0}},components:{SprintCaseDialog:u.default,ImportCaseDialog:d.default,CopyCaseToSprintDlg:p.default,BatchUpdateCasesDlg:m.default},methods:{restQueryRowsForm:function(){this.queryForm.startTime="",this.queryForm.endTime="",this.queryForm.name="",this.queryForm.priority=[],this.queryForm.executionPhase="",this.queryForm.executionMethod="handwork",this.queryForm.executedEachSprint="",this.queryForm.recursive="1",this.queryForm.creater="",this.queryForm.updater="",this.queryForm.tag=""},queryRows:function(e,t,i){var a=this;if(-1==this.suiteID||-2==this.suiteID)return this.total=0,void(this.tableData=[]);"clickQuery"==e&&(this.currentPage=1);var s=n()({},this.queryForm);s.suiteId=this.suiteID,s.suiteType=this.suiteType,s.pageSize=this.pageSize,s.pageNo=this.currentPage,s.testplanId=this.testplanId,s.sprintId=this.sprintID,s.priority=s.priority.join(","),this.$api.sprintCaseTable.getSuiteCases(s).then(function(e){e.success?(a.total=e.data.total,a.tableData=e.data.rows,"bindPlanAndCaseDialog"==a.currentModule&&(a.checkCaseRow(e.data.testplanRelatedCaseGuids),a.guidsOfRelatedOldCases=e.data.testplanRelatedCaseGuids),t&&t(e.success)):(a.$message.error(e.msg),i&&i(e.success))}).catch(function(e){a.$message.error(e.msg||e.message),i&&i(e.success)})},mergeColumns:function(e){var t=e.row,i=(e.column,e.rowIndex,e.columnIndex);if(t.children.length){if(1==i)return[1,7];if(i>1)return[0,0]}},getRowClassName:function(e){return e.row.children.length?"row-class-for-colspan":"row-class"},expandAll:function(){this.$nextTick(function(){for(var e=this.$el.getElementsByClassName("el-table__expand-icon"),t=0;t<e.length;t++)-1==e[t].getAttribute("class").indexOf("el-table__expand-icon--expanded")&&e[t].click()})},checkCaseRow:function(e){var t=this;this.$nextTick(function(){for(var i=0;i<t.tableData.length;i++)for(var a=0;a<t.tableData[i].children.length;a++)e&&-1!=e.indexOf(t.tableData[i].children[a].guid)&&t.$refs.myTable.toggleRowSelection(t.tableData[i].children[a],!0)})},openCaseDialog:function(e,t){this.caseDialogLoaded||(this.caseDialogLoaded=!0),this.caseDialogTitle=e,this.caseDialogEditing=t,this.showCaseDialog||(this.showCaseDialog=!0)},newCase:function(){var e=[];for(var t in this.executedEachSprintDict)if(this.executedEachSprintDict[t].default){e=[t];break}this.caseData={suiteId:this.suiteID,productId:this.productID,sprintId:this.sprintID,suiteType:this.suiteType,customNo:"",name:"",createrName:"",updaterName:"",priority:"P3",executedEachSprint:"",executionMethod:"handwork",executionPhase:e,suitePath:this.suitePath,precondition:"",steps:[],postcondition:"",tags:[],desc:""},this.operation="newCase",this.openCaseDialog("新建用例",!0)},clickRow:function(e,t,i){var a=this,s=function(){for(var t=0,i=!1,s=0;s<a.tableData.length;s++){var o=a.tableData[s];if(o.children.length){for(var n=0;n<o.children.length;n++){if(t+=1,o.children[n].id==e.id){i=!0;break}}if(i)break}}a.caseOrder=t+(a.currentPage-1)*a.pageSize,a.caseData={suiteId:e.suiteId,productId:e.productId,sprintId:e.sprintId,suiteType:e.suiteType,caseId:e.id,guid:e.guid,customNo:e.customNo,name:e.name,createrName:e.createrName,updaterName:e.updaterName,priority:e.priority,executedEachSprint:e.executedEachSprint,executionMethod:e.executionMethod,executionPhase:e.executionPhase,suitePath:e.suitePath,precondition:e.precondition,steps:JSON.parse(e.steps),postcondition:e.postcondition,desc:e.desc,tags:e.tags},a.operation="viewCase",a.row=e,a.openCaseDialog("查看用例",!1)};!e.children.length&&t&&"操作"!=t.label&&(this.caseDialogEditing?this.$confirm("您有正在编辑的用例，确定继续操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){s()}).catch(function(){}):s())},viewCase:function(e,t){this.caseData={caseId:t.id,guid:t.guid,suiteId:t.suiteId,productId:t.productId,sprintId:t.sprintId,suiteType:t.suiteType,customNo:t.customNo,name:t.name,createrName:t.createrName,updaterName:t.updaterName,priority:t.priority,executedEachSprint:t.executedEachSprint,executionMethod:t.executionMethod,executionPhase:t.executionPhase,suitePath:t.suitePath,precondition:t.precondition,steps:JSON.parse(t.steps),postcondition:t.postcondition,desc:t.desc,tags:t.tags},this.operation="viewCase",this.row=t,this.openCaseDialog("查看用例",!1)},copyCase:function(e,t){this.caseData={guid:t.guid,suiteId:t.suiteId,sprintId:t.sprintId,productId:t.productId,suiteType:t.suiteType,customNo:t.customNo,name:t.name+"-副本",createrName:"",updaterName:"",priority:t.priority,executedEachSprint:t.executedEachSprint,executionMethod:t.executionMethod,executionPhase:t.executionPhase,suitePath:t.suitePath,precondition:t.precondition,steps:JSON.parse(t.steps),postcondition:t.postcondition,desc:t.desc,tags:t.tags},this.row=t,this.operation="copyCase",this.openCaseDialog("复制用例",!0)},deleteCases:function(e){var t=this;this.elementLoadingText="正在删除测试用例，请勿进行其它操作",this.loading=!0,this.$api.sprintCaseTable.deleteTestCases({suiteId:this.suiteID,guids:e,suiteType:this.suiteType,delBaseCasesCascade:this.confirmRadioValue}).then(function(i){if(t.loading=!1,i.success){t.total=t.total-e.length,t.$message.success(i.msg);for(var a=0;a<e.length;a++){for(var s=0;s<t.tableData.length;s++){var o=!1;if(t.tableData[s].children.length){for(var r=0;r<t.tableData[s].children.length;r++)if(t.tableData[s].children[r].guid==e[a]){o=!0,t.tableData[s].children.splice(r,1),t.tableData[s].children.length||t.tableData.splice(s,1);break}if(o)break}}if(!t.tableData.length&&0!=t.total){var l=Math.ceil(t.total/t.pageSize);return t.currentPage>l&&(t.currentPage-=1),void t.queryRows()}t.tableData=n()([],t.tableData)}}else t.$message.error(i.msg)}).catch(function(e){t.loading=!1,t.$message.error(e.msg||e.message)})},deleteOneCase:function(e,t){var i=this;if(this.showCaseDialog)this.$alert("请关闭当前打开的用例对话框后再操作","提示",{confirmButtonText:"确定"});else{this.confirmRadioValue="1";var a=this.$createElement,s=void 0;s="sprint"==this.suiteType?a("div",null,[a("div","请选择是否级联删除关联的基线测试用例"),a("br"),a("span",null,[a("el-radio",{attrs:{label:"1",value:this.confirmRadioValue},ref:"radio1",nativeOn:{input:function(e){i.confirmRadioValue="1",i.$nextTick(function(){i.$refs.radio1.value="1",i.$refs.radio2.value="1"})}}},"级联删除"),a("span","    ")]),a("span",[a("el-radio",{attrs:{label:"2",value:this.confirmRadioValue},ref:"radio2",nativeOn:{input:function(e){i.confirmRadioValue="2",i.$nextTick(function(){i.$refs.radio1.value="2",i.$refs.radio2.value="2"})}}},"不删除")])]):"确定要删除该用例吗",this.$msgbox({title:"提示",message:s,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.sprintCaseTable.deleteTestCase({suiteId:t.suiteId,caseId:t.id,guid:t.guid,suiteType:t.suiteType,delBaseCasesCascade:i.confirmRadioValue}).then(function(e){if(e.success){i.total=i.total-1,i.$message.success(e.msg);for(var a=0;a<i.tableData.length;a++){var s=!1;if(i.tableData[a].children.length){for(var o=0;o<i.tableData[a].children.length;o++)if(i.tableData[a].children[o].guid==t.guid){s=!0,i.tableData[a].children.splice(o,1),i.tableData[a].children.length||i.tableData.splice(a,1);break}if(s)break}}if(!i.tableData.length&&0!=i.total){var r=Math.ceil(i.total/i.pageSize);return i.currentPage>r&&(i.currentPage-=1),void i.queryRows()}i.tableData=n()([],i.tableData)}}).catch(function(e){i.$message.error(e.msg||e.message)})}).catch(function(){})}},onSelectAllRow:function(e){if(e.indexOf(this.tableData[0])>-1)for(var t=0;t<this.tableData.length;t++)for(var i=0;i<this.tableData[t].children.length;i++)this.$refs.myTable.toggleRowSelection(this.tableData[t].children[i],!0);else this.$refs.myTable.clearSelection()},onSelectRow:function(e,t){var i=void 0;if(e.length)for(var a=0;a<e.length;a++){if(e[a].guid==t.guid){i=!0;break}i=!1}else i=!1;if(t.children.length)for(var s=0;s<t.children.length;s++)this.$refs.myTable.toggleRowSelection(t.children[s],i);else for(var o=0;o<this.tableData.length;o++){for(var n=!1,r=0;r<this.tableData[o].children.length;r++)if(this.tableData[o].children[r].guid==t.guid){if(n=!0,i){for(var l=!1,c=0;c<e.length;c++)if(e[c].guid==this.tableData[o].guid){l=!0;break}l||this.$refs.myTable.toggleRowSelection(this.tableData[o],!0)}break}if(n)break}},batchDeleteCases:function(){var e=this;if(this.showCaseDialog)this.$alert("请关闭当前打开的用例对话框后再操作","提示",{confirmButtonText:"确定"});else{this.confirmRadioValue="1";var t=this.$createElement,i=void 0;i="sprint"==this.suiteType?t("div",null,[t("div","请选择是否级联删除关联的基线测试用例"),t("br"),t("span",null,[t("el-radio",{attrs:{label:"1",value:this.confirmRadioValue},ref:"radio1",key:this._uid,nativeOn:{input:function(t){e.confirmRadioValue="1",e.$nextTick(function(){e.$refs.radio1.value="1",e.$refs.radio2.value="1"})}}},"级联删除"),t("span","    ")]),t("span",[t("el-radio",{attrs:{label:"2",value:this.confirmRadioValue},ref:"radio2",key:this._uid+1,nativeOn:{input:function(t){e.confirmRadioValue="2",e.$nextTick(function(){e.$refs.radio1.value="2",e.$refs.radio2.value="2"})}}},"不删除")])]):"确定要删除选中用例吗",this.$msgbox({title:"提示",message:i,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btn-custom-cancel"}).then(function(){for(var t=[],i=e.$refs.myTable.selection,a=0;a<i.length;a++)i[a].children.length||t.push(i[a].guid);if(!t.length)return e.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"}),void(e.loading=!1);e.deleteCases(t)}).catch(function(){})}},importTestCases:function(){this.suiteID||this.$message.error("操作失败，请先选择要待上传测试用例归属的测试套件"),this.elementLoadingText="正在导入测试用例，请勿进行其它操作",this.dataForImportCase.suiteType=this.suiteType,this.dataForImportCase.suiteId=this.suiteID,this.dataForImportCase.productId=this.productID,this.importCaseDialogVisible=!0},copyTestCasesToSprint:function(){this.casesCopyToSprint=[];for(var e=this.$refs.myTable.selection,t=0;t<e.length;t++)e[t].children.length||this.casesCopyToSprint.push(e[t]);this.casesCopyToSprint.length?this.copyCaseToSprintDlgVisible=!0:this.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"})},copyCases:function(){for(var e=[],t=this.$refs.myTable.selection,i=0;i<t.length;i++)t[i].children.length||e.push(t[i]);e.length?(this.$store.commit("setTestcasesCut",[]),this.$store.commit("setTestcasesCopied",e),this.$message.success("拷贝成功，请右键左侧目标测试集黏贴")):this.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"})},cutCases:function(){for(var e=[],t=this.$refs.myTable.selection,i=0;i<t.length;i++)t[i].children.length||e.push(t[i]);e.length?(this.$store.commit("setTestcasesCopied",[]),this.$store.commit("setTestcasesCut",e),this.$message.success("剪切成功，请右键左侧目标测试集黏贴")):this.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"})},exportTestCases:function(){var e=this;this.$confirm("确定导出所查询的用例吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){e.elementLoadingText="正在导出测试用例，请勿进行其它操作",e.loading=!0;var t=n()({},e.queryForm);t.suiteId=e.suiteID,t.suiteType=e.suiteType,t.testplanId=e.testplanId,t.priority=t.priority.join(","),e.$api.sprintCaseTable.exportTestCases(t).then(function(t){var i=document.createElement("a"),a=new Blob([t.data],{type:"application/vnd.ms-excel"});i.style.display="none",i.href=window.URL.createObjectURL(a);var s=t.headers["content-disposition"],o=decodeURI(s.replace("attachment;filename=",""));i.setAttribute("download",o),document.body.appendChild(i),i.click(),document.body.removeChild(i),e.loading=!1}).catch(function(t){if(e.loading=!1,"[object Blob]"==Object.prototype.toString.call(t.response.data)){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result);e.$message.error(t.msg||t.message+":"+a.msg)},i.readAsText(t.response.data)}else e.$message.error(t.msg||t.message)})}).catch(function(){e.loading=!1})},exportXmindTestCases:function(){var e=this;this.$confirm("确定导出所查询的用例吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){e.loading=!0;var t=n()({},e.queryForm);t.suiteId=e.suiteID,t.suiteType=e.suiteType,t.testplanId=e.testplanId,t.priority=t.priority.join(","),e.$api.sprintCaseTable.exportXmindTestCases(t).then(function(t){var i=document.createElement("a"),a=new Blob([t.data],{type:"application/octet-stream"});i.style.display="none",i.href=window.URL.createObjectURL(a);var s=t.headers["content-disposition"],o=decodeURI(s.replace("attachment;filename=",""));i.setAttribute("download",o),document.body.appendChild(i),i.click(),document.body.removeChild(i),e.loading=!1}).catch(function(t){if(e.loading=!1,"[object Blob]"==Object.prototype.toString.call(t.response.data)){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result);e.$message.error(t.msg||t.message+":"+a.msg)},i.readAsText(t.response.data)}else e.$message.error(t.msg||t.message)})}).catch(function(){e.loading=!1})},batchUpdateTestCases:function(){if(this.showCaseDialog)this.$alert("请关闭当前打开的用例对话框后再操作","提示",{confirmButtonText:"确定"});else{this.elementLoadingText="正在批量更新测试用例，请勿进行其它操作",this.casesInfoForUpdate=[];for(var e=this.$refs.myTable.selection,t=0;t<e.length;t++)e[t].children.length||this.casesInfoForUpdate.push({guid:e[t].guid,suiteId:e[t].suiteId,suite_type:e[t].suiteType,detailSuiteType:e[t].detailSuiteType,testplanId:e[t].testplanId});this.casesInfoForUpdate.length?this.updateCasesDlgVisible||(this.updateCasesDlgVisible=!0):this.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"})}},clearExecutionMethod:function(){this.queryForm.executionMethod=""},sortChange:function(e){var t=e.order,i=e.prop;i?"create_time"==(i=this.$customUtils.stringHandler.humpToUnderline(i))&&(i="id"):i="-id",this.queryForm.sort="descending"==t?"priority"==i?"-"+i+",-id":"-"+i:"priority"==i?i+",id":i,this.queryRows()},getTestPhases:function(){var e=this;this.$api.testPhase.getTestPhasesDetails({fields:"name,code,default"}).then(function(t){if(t.success)for(var i=0;i<t.data.length;i++){var a=t.data[i].name,s=t.data[i].code,o=t.data[i].default,n={label:a,value:s,defualt:o};e.executedEachSprintDict[s]={},e.executedEachSprintDict[s].executedEachSprint="N",e.executedEachSprintDict[s].executionPhase=a,e.executedEachSprintDict[s].default=o,e.executionPhaseOptions.push(n)}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},toggleQueryItems:function(){this.isQueryItemsCollapsed=!this.isQueryItemsCollapsed},getInputWidthStyle:function(e,t){var i="width:"+t+"px";if(e){var a=this.$customUtils.stringHandler.getTextPixelWith(e,"400 13.3333px Arial");a>t-32&&(i="width:"+(a+40)+"px")}return i}},watch:{suiteID:function(){this.currentPage=1,this.queryRows(),this.caseDialogEditing=!1,this.showCaseDialog=!1,this.caseDialogLoaded=!1}},computed:s()({},Object(r.b)({suiteType:function(e){return e.sprintCaseSuite.suiteType},suitePath:function(e){return e.sprintCaseSuite.suitePath},suiteID:function(e){return e.sprintCaseSuite.suiteID},parentID:function(e){return e.sprintCaseSuite.parentID}}),{iscurrSuiteRoot:{get:function(){return-1==this.parentID}},createTime:{get:function(){return this.queryForm.startTime&&this.queryForm.endTime?[this.queryForm.startTime,this.queryForm.endTime]:[]},set:function(e){e?(this.queryForm.startTime=e[0],this.queryForm.endTime=e[1]):(this.queryForm.startTime="",this.queryForm.endTime="")}}}),created:function(){try{this.getTestPhases()}catch(e){this.$message.error(e.message)}},mounted:function(){},updated:function(){var e=this;this.setTableBodySize(),this.expandAll(),"bindPlanAndCaseDialog"==this.currentModule&&this.$nextTick(function(){e.checkCaseRow(e.guidsOfRelatedOldCases)})}},h=i("XyMi");var f=function(e){i("oRir")},v=Object(h.a)(g,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"viewWrapper",staticClass:"view-wrapper",attrs:{"element-loading-text":e.elementLoadingText}},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"执行阶段"}},[i("el-select",{staticStyle:{width:"115px"},attrs:{clearable:""},model:{value:e.queryForm.executionPhase,callback:function(t){e.$set(e.queryForm,"executionPhase",t)},expression:"queryForm.executionPhase"}},e._l(e.executionPhaseOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"是否每个迭代都执行"}},[i("el-select",{staticStyle:{width:"85px"},attrs:{clearable:""},model:{value:e.queryForm.executedEachSprint,callback:function(t){e.$set(e.queryForm,"executedEachSprint",t)},expression:"queryForm.executedEachSprint"}},[i("el-option",{attrs:{label:"是",value:"Y"}}),e._v(" "),i("el-option",{attrs:{label:"否",value:"N"}})],1)],1),e._v(" "),"bindPlanAndCaseDialog"==e.currentModule?i("el-form-item",{attrs:{label:"仅显示历史迭代用例"}},[i("el-select",{staticStyle:{width:"85px"},attrs:{clearable:""},model:{value:e.queryForm.showHistoryOnly,callback:function(t){e.$set(e.queryForm,"showHistoryOnly",t)},expression:"queryForm.showHistoryOnly"}},[i("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"否",value:"0"}})],1)],1):e._e(),e._v(" "),e.isQueryItemsCollapsed?e._e():i("span",[i("el-form-item",{attrs:{label:"创建时间"}},[i("el-date-picker",{staticStyle:{width:"330px"},attrs:{type:"datetimerange",placeholder:"选择日期和时间","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",size:"mini","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"优先级"}},[i("el-select",{staticStyle:{width:"170px"},attrs:{multiple:!0,clearable:""},model:{value:e.queryForm.priority,callback:function(t){e.$set(e.queryForm,"priority",t)},expression:"queryForm.priority"}},e._l(e.priorityOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"执行方式"}},[i("el-select",{staticStyle:{width:"85px"},attrs:{clearable:""},on:{clear:e.clearExecutionMethod},model:{value:e.queryForm.executionMethod,callback:function(t){e.$set(e.queryForm,"executionMethod",t)},expression:"queryForm.executionMethod"}},[i("el-option",{attrs:{label:"手工",value:"handwork"}}),e._v(" "),i("el-option",{attrs:{label:"自动化",value:"automation"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"是否显示子集用例"}},[i("el-select",{staticStyle:{width:"60px"},model:{value:e.queryForm.recursive,callback:function(t){e.$set(e.queryForm,"recursive",t)},expression:"queryForm.recursive"}},[i("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"用例名称"}},[i("el-input",{style:e.getInputWidthStyle(e.queryForm.name,125),attrs:{placeholder:"请输入用例名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"创建人"}},[i("el-input",{style:e.getInputWidthStyle(e.queryForm.creater,85),attrs:{placeholder:"请输入"},model:{value:e.queryForm.creater,callback:function(t){e.$set(e.queryForm,"creater",t)},expression:"queryForm.creater"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"更新人"}},[i("el-input",{style:e.getInputWidthStyle(e.queryForm.creater,85),attrs:{placeholder:"请输入"},model:{value:e.queryForm.updater,callback:function(t){e.$set(e.queryForm,"updater",t)},expression:"queryForm.updater"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"标签"}},[i("el-input",{style:e.getInputWidthStyle(e.queryForm.creater,110),attrs:{placeholder:"请输入标签"},model:{value:e.queryForm.tag,callback:function(t){e.$set(e.queryForm,"tag",t)},expression:"queryForm.tag"}})],1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",disabled:e.showCaseDialog},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")]),e._v(" "),i("el-button",{on:{click:e.restQueryRowsForm}},[e._v("重置")])],1),e._v(" "),i("span",{staticStyle:{height:"32px","line-height":"32px","font-size":"14px",color:"#606266"},on:{click:function(t){return t.preventDefault(),e.toggleQueryItems(t)}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:!e.isQueryItemsCollapsed,expression:"!isQueryItemsCollapsed"}],staticClass:"el-icon-arrow-up el-icon--right"},[e._v("收起")]),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.isQueryItemsCollapsed,expression:"isQueryItemsCollapsed"}],staticClass:"el-icon-arrow-down el-icon--right"},[e._v("展开")])])],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize,disabled:e.iscurrSuiteRoot||e.showCaseDialog},on:{click:e.newCase}},[e._v("新建用例")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.batchDeleteCases}},[e._v("删除用例")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog||"base"==e.suiteType},on:{click:e.copyTestCasesToSprint}},[e._v("克隆至迭代")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.copyCases}},[e._v("复制用例")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.cutCases}},[e._v("剪切用例")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.importTestCases}},[e._v("导入用例")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.exportTestCases}},[e._v("导出用例(Excel)")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.exportXmindTestCases}},[e._v("导出用例(XMind)")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.batchUpdateTestCases}},[e._v("批量修改用例")]),e._v(" "),i("el-dropdown",[i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog}},[e._v("\n                    更多操作\n                    "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[e._v("其它操作")])],1)],1)],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table sprint-testcase-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,lazy:!1,"row-key":"guid","span-method":e.mergeColumns,"cell-class-name":e.getCellClassName,"row-class-name":e.getRowClassName,"highlight-current-row":""},on:{"row-click":e.clickRow,"selection-change":e.onSelectChange,select:e.onSelectRow,"select-all":e.onSelectAllRow,"sort-change":e.sortChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"用例名称","show-overflow-tooltip":"","header-align":"center",align:"left",sortable:"custom","min-width":"250px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"priority",label:"优先级",width:"90px","header-align":"center",align:"center",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"90px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"更新人",width:"90px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160px","header-align":"center",align:"center",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"205px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.viewCase(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.copyCase(t.$index,t.row)}}},[e._v("复制")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteOneCase(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("transition",{attrs:{name:"slide-fade"}},[e.caseDialogLoaded?i("sprint-case-dialog",{attrs:{caseDialogLoaded:e.caseDialogLoaded,caseDialogEditing:e.caseDialogEditing,caseDialogTitle:e.caseDialogTitle,caseDialogVisible:e.showCaseDialog,tableData:e.tableData,caseData:e.caseData,row:e.row,currentPage:e.currentPage,pageSize:e.pageSize,total:e.total,operation:e.operation,caseOrder:e.caseOrder,currentModule:e.currentModule,priorityOptions:e.priorityOptions,executionPhaseOptions:e.executionPhaseOptions,executedEachSprintDict:e.executedEachSprintDict},on:{"update:caseDialogLoaded":function(t){e.caseDialogLoaded=t},"update:case-dialog-loaded":function(t){e.caseDialogLoaded=t},"update:caseDialogEditing":function(t){e.caseDialogEditing=t},"update:case-dialog-editing":function(t){e.caseDialogEditing=t},"update:caseDialogTitle":function(t){e.caseDialogTitle=t},"update:case-dialog-title":function(t){e.caseDialogTitle=t},"update:caseDialogVisible":function(t){e.showCaseDialog=t},"update:case-dialog-visible":function(t){e.showCaseDialog=t},"update:tableData":function(t){e.tableData=t},"update:table-data":function(t){e.tableData=t},"update:row":function(t){e.row=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:total":function(t){e.total=t},"update:operation":function(t){e.operation=t},"update:caseOrder":function(t){e.caseOrder=t},"update:case-order":function(t){e.caseOrder=t}}}):e._e()],1),e._v(" "),e.importCaseDialogVisible?i("import-case-dialog",{attrs:{dialogVisible:e.importCaseDialogVisible,dataForImportCase:e.dataForImportCase},on:{"update:dialogVisible":function(t){e.importCaseDialogVisible=t},"update:dialog-visible":function(t){e.importCaseDialogVisible=t}}}):e._e(),e._v(" "),e.copyCaseToSprintDlgVisible?i("copy-case-to-sprint-dlg",{attrs:{dialogVisible:e.copyCaseToSprintDlgVisible,currentModule:e.currentModule},on:{"update:dialogVisible":function(t){e.copyCaseToSprintDlgVisible=t},"update:dialog-visible":function(t){e.copyCaseToSprintDlgVisible=t}}}):e._e(),e._v(" "),e.updateCasesDlgVisible?i("batch-update-cases-dlg",{attrs:{dialogVisible:e.updateCasesDlgVisible,casesInfoForUpdate:e.casesInfoForUpdate,suiteId:e.suiteID,executionPhaseOptions:e.executionPhaseOptions,executedEachSprintDict:e.executedEachSprintDict},on:{"update:dialogVisible":function(t){e.updateCasesDlgVisible=t},"update:dialog-visible":function(t){e.updateCasesDlgVisible=t}}}):e._e()],1)},[],!1,f,null,null);t.default=v.exports},Qtzs:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","row","tableData"],mixins:[i("RHSg").a],data:function(){return{dialogForm:s()({},this.dialogFormData),rules:{name:[{required:!0,message:"请填写环境名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],desc:[{min:0,max:300,message:"不能超过 300 个字符",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.id?t.update(t.$api.env.updateEnv):t.add(t.$api.env.addEnv))})}}},n=i("XyMi");var r=function(e){i("bA5h")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:e.dialogWidth,visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-6cb1c6bb",null);t.default=l.exports},"RRo+":function(e,t,i){e.exports={default:i("c45H"),__esModule:!0}},S7tn:function(e,t){},SfjD:function(e,t){},Snr2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("BYwb"),s=i("/I8A"),o=i("UDo9"),n=i("0xvS"),r={mixins:[o.a,n.a],data:function(){return{queryForm:{account:"",type:"",isActive:""},accountData:null,accountDialogVisible:!1,accountDialogTitle:"",bindGroupDialogVisible:!1,statusOptions:[{label:"启用",value:!0},{label:"禁用",value:!1}],typeOptions:[{label:"邮箱号",value:"邮箱号"},{label:"手机号",value:"手机号"},{label:"钉钉号",value:"钉钉号"}]}},components:{MsgPushAccountDlg:a.default,BindSysGroupDialog:s.default},methods:{addAccount:function(){this.accountDialogVisible||(this.accountData={account:"",type:"",desc:"",isActive:!0},this.accountDialogVisible=!0,this.accountDialogTitle="新增账号")},editAccount:function(e,t){this.accountDialogVisible||(this.accountData={id:t.id,account:t.account,type:t.type,desc:t.desc,isActive:t.isActive},this.row=t,this.accountDialogVisible=!0,this.accountDialogTitle="修改账号")},toggleAccountStatus:function(e,t){var i=this,a=t.isActive?"禁用":"启用";this.$confirm("确定要"+a+"该账号吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.msgPushAccount.toggleAccountStatus({id:t.id,isActive:!t.isActive}).then(function(e){if(e.success)for(var a in i.$message({message:e.msg,type:"success"}),e.data)a in t&&(t[a]=e.data[a]);else i.$message.error(e.msg)}).catch(function(e){i.$message.error(e.msg||e.message)})}).catch(function(){})},bindGroup:function(e,t){this.bindGroupDialogVisible||(this.bindGroupDialogVisible=!0,this.row=t)},deleteRelatedGroup:function(e,t){var i=this;this.$confirm("确定要取消关联该组别吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.msgPushAccount.deleteRelatedGroup({accountId:e.id,groupId:t.id}).then(function(a){if(a.success){i.$message({message:a.msg,type:"success"});var s=e.groups.indexOf(t);-1!=s&&e.groups.splice(s,1)}else i.$message.error(a.msg)}).catch(function(e){i.$message.error(e.msg||e.message)})}).catch(function(){})},clearStatus:function(){this.queryForm.isActive=""}},updated:function(){this.setTableBodySize()},created:function(){this.queryRowsAPI=this.$api.msgPushAccount.getAccounts,this.queryRows()}},l=i("XyMi");var c=function(e){i("9Psi")},u=Object(l.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"账号"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入账号名称",clearable:""},model:{value:e.queryForm.account,callback:function(t){e.$set(e.queryForm,"account",t)},expression:"queryForm.account"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.queryForm.type,callback:function(t){e.$set(e.queryForm,"type",t)},expression:"queryForm.type"}},e._l(e.typeOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{clearable:""},on:{clear:e.clearStatus},model:{value:e.queryForm.isActive,callback:function(t){e.$set(e.queryForm,"isActive",t)},expression:"queryForm.isActive"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addAccount}},[e._v("新增账号")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.msgPushAccount.deleteAccounts)}}},[e._v("删除账号")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,"cell-class-name":e.getCellClassName,"highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"account",label:"账号","header-align":"center",align:"left","min-width":"200px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"type",label:"类型","header-align":"center",align:"center",width:"70px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"描述","header-align":"center",align:"center","min-width":"200px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"groups",label:"归属组别","header-align":"center","min-width":"180px",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.groups,function(a){return i("span",{key:a.id,on:{click:function(e){e.stopPropagation()}}},[e._v("\n                    "+e._s(a.name)+"\n                    "),i("i",{staticClass:"el-icon-close",attrs:{"aria-hidden":"true"},on:{click:function(i){return i.preventDefault(),e.deleteRelatedGroup(t.row,a)}}},[e._v(";  ")])])}),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.bindGroup(t.$index,t.row)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e._v("关联组别\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态切换",width:"80px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isActive?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.toggleAccountStatus(t.$index,t.row)}}},[e._v("禁用")]):i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.toggleAccountStatus(t.$index,t.row)}}},[e._v("启用")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"100px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"修改人",width:"100px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editAccount(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.msgPushAccount.deleteAccount)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.accountDialogVisible?i("msg-push-account-dlg",{attrs:{dialogVisible:e.accountDialogVisible,dialogTitle:e.accountDialogTitle,tableData:e.tableData,dialogFormData:e.accountData,row:e.row,typeOptions:e.typeOptions,statusOptions:e.statusOptions},on:{"update:dialogVisible":function(t){e.accountDialogVisible=t},"update:dialog-visible":function(t){e.accountDialogVisible=t}}}):e._e(),e._v(" "),e.bindGroupDialogVisible?i("bind-sys-group-dialog",{attrs:{dialogVisible:e.bindGroupDialogVisible,row:e.row},on:{"update:dialogVisible":function(t){e.bindGroupDialogVisible=t},"update:dialog-visible":function(t){e.bindGroupDialogVisible=t}}}):e._e()],1)},[],!1,c,null,null);t.default=u.exports},UDo9:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var a={data:function(){return{tableData:[],total:0,pageSizes:[10,20,30,40,50,100,150],pageSize:10,pagerCount:7,currentPage:1,emptyText:"未获取到数据，请尝试重新打开或者刷新页面",checkBoxColWidth:"39px",row:{},rowsSelected:[],queryForm:{},queryRowsAPI:void 0,isQueryAllowed:!0,isPagination:!0}},methods:{queryRows:function(e){var t=this;if(this.tableData=[],this.isQueryAllowed){if(!this.queryRowsAPI)return this.total=0,void this.$message.error("未获取到查询API,无法查询表记录");this.isPagination&&("clickQuery"==e&&(this.currentPage=1),this.queryForm.pageSize=this.pageSize,this.queryForm.pageNo=this.currentPage),this.queryRowsAPI(this.queryForm).then(function(e){e.success?(t.total=e.data.total?e.data.total:0,t.tableData=e.data.rows):t.$message.error(e.msg)}).catch(function(e){t.$message.error("获取表记录出错： "+e.msg||e.message)})}else this.total=0},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.queryRows()},handleCurrentChange:function(e){this.currentPage=e,this.queryRows()},onSelectChange:function(e){this.rowsSelected=e},deleteRow:function(e,t,i){var a=this;this.$confirm("确定要删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i({id:t.id}).then(function(t){if(t.success){if(a.$message({message:t.msg,type:"success"}),a.tableData.splice(e,1),a.total=a.total-1,!a.isPagination)return;if(!a.tableData.length&&0!=a.total){var i=Math.ceil(a.total/a.pageSize);a.currentPage>i&&(a.currentPage-=1),a.queryRows()}}else a.$message.error(t.msg)}).catch(function(e){a.$message.error(e.msg||e.message)})}).catch(function(){})},deleteRows:function(e){var t=this;this.rowsSelected.length?this.$confirm("确定要删除选中记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){for(var i=[],a=0;a<t.rowsSelected.length;a++)i.push(t.rowsSelected[a].id);e({rowIds:i}).then(function(e){if(e.success){t.$message.success(e.msg);for(var i=0;i<t.rowsSelected.length;i++)t.tableData.splice(t.tableData.indexOf(t.rowsSelected[i]),1);if(t.total=t.total-t.rowsSelected.length,!t.isPagination)return;if(!t.tableData.length&&0!=t.total){var a=Math.ceil(t.total/t.pageSize);t.currentPage>a&&(t.currentPage-=1),t.queryRows()}}else t.$message.error(e.msg)}).catch(function(e){t.$message.error(e.msg||e.message)})}).catch(function(){}):this.$alert("未选择记录，请勾选至少一条记录","提示",{confirmButtonText:"确定"})},setTableBodySize:function(){var e=this;this.idOfSetTimeOut&&clearTimeout(this.idOfSetTimeOut),this.idOfSetTimeOut=setTimeout(function(){var t=e.$refs.viewWrapper,i=e.$refs.myTable,a=e.$refs.tableToolbar,s=e.$refs.queryForm,o=e.$refs.tablePagination,n=0,r=0,l=0,c=0,u=0,d=0,p=0,m=0,g=0,h=0,f=0,v=0,b=0,y=0,_=t?t.offsetHeight:0;if(i){var w=window.getComputedStyle(i.$el);if(p=parseInt(w.marginTop.replace("px","")),m=parseInt(w.marginBottom.replace("px","")),g=parseInt(w.borderTopWidth.replace("px","")),parseInt(w.borderBottomWidth.replace("px","")),h=parseInt(w.paddingTop.replace("px","")),f=parseInt(w.paddingBottom.replace("px","")),s){n=s.offsetHeight;var S=window.getComputedStyle(s);r=parseInt(S.marginTop.replace("px","")),l=parseInt(S.marginBottom.replace("px",""))}if(a){c=a.offsetHeight;var x=window.getComputedStyle(a);u=parseInt(x.marginTop.replace("px","")),d=parseInt(x.marginBottom.replace("px",""))}if(o){v=o.$el.offsetHeight;var C=window.getComputedStyle(o.$el);b=parseInt(C.marginTop.replace("px","")),y=parseInt(C.marginBottom.replace("px",""))}var D=_-n-r-Math.max(l,u)-c-Math.max(d,p)-v-Math.max(m,b)-y-(h+f+g+g),T=i.$el.getElementsByClassName("el-table__header-wrapper");if(T.length){var $=T[0];D-=parseInt(window.getComputedStyle($).height.replace("px",""))}if((T=i.$el.getElementsByClassName("el-table__body-wrapper")).length)T[0].style.height=D+"px"}},100)},getCellClassName:function(e){if("操作"===e.column.label)return"operation-col-cell-class"}}}},"VCc+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","tableData","statusOptions","row"],mixins:[i("RHSg").a],data:function(){return{dialogForm:s()({},this.dialogFormData),productOptions:[],userOptions:[],rules:{name:[{required:!0,message:"请填写产品名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],code:[{required:!1,message:"请填写产品编码",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择产品状态",trigger:"blur"}],desc:[{min:0,max:500,message:"产品描述不能超过 500 个字符",trigger:"blur"}]}}},methods:{addProduct:function(){this.requestData={name:this.dialogForm.name,code:this.dialogForm.code,status:this.dialogForm.status,productOwnerId:this.dialogForm.productOwner.id,productOwner:this.dialogForm.productOwner.name,developOwnerId:this.dialogForm.developOwner.id,developOwner:this.dialogForm.developOwner.name,testOwnerId:this.dialogForm.testOwner.id,testOwner:this.dialogForm.testOwner.name,desc:this.dialogForm.desc},this.add(this.$api.product.addProduct)},updateProduct:function(){this.requestData={id:this.dialogForm.id,name:this.dialogForm.name,code:this.dialogForm.code,status:this.dialogForm.status,productOwnerId:this.dialogForm.productOwner.id,productOwner:this.dialogForm.productOwner.name,developOwnerId:this.dialogForm.developOwner.id,developOwner:this.dialogForm.developOwner.name,testOwnerId:this.dialogForm.testOwner.id,testOwner:this.dialogForm.testOwner.name,desc:this.dialogForm.desc},this.update(this.$api.product.updateProduct)},save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.id?t.updateProduct():t.addProduct())})}},created:function(){var e=this;this.$api.sysUser.getUsersDetails().then(function(t){t.success?e.userOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},n=i("XyMi");var r=function(e){i("HdoR")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:"50%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"产品编码",prop:"code"}},[i("el-input",{model:{value:e.dialogForm.code,callback:function(t){e.$set(e.dialogForm,"code",t)},expression:"dialogForm.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"产品状态",prop:"status"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogForm.status,callback:function(t){e.$set(e.dialogForm,"status",t)},expression:"dialogForm.status"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"产品负责人",prop:"productOwner"}},[i("el-select",{attrs:{filterable:"",clearable:"","value-key":"id",placeholder:"请选择"},model:{value:e.dialogForm.productOwner,callback:function(t){e.$set(e.dialogForm,"productOwner",t)},expression:"dialogForm.productOwner"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"研发负责人",prop:"developOwner"}},[i("el-select",{attrs:{filterable:"",clearable:"","value-key":"id",placeholder:"请选择"},model:{value:e.dialogForm.developOwner,callback:function(t){e.$set(e.dialogForm,"developOwner",t)},expression:"dialogForm.developOwner"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"测试负责人",prop:"testOwner"}},[i("el-select",{attrs:{filterable:"",clearable:"","value-key":"id",placeholder:"请选择"},model:{value:e.dialogForm.testOwner,callback:function(t){e.$set(e.dialogForm,"testOwner",t)},expression:"dialogForm.testOwner"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"产品描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",[i("div",{staticClass:"dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-9a135510",null);t.default=l.exports},VLYx:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","tableData","statusOptions","row"],mixins:[i("RHSg").a],data:function(){return{dialogForm:s()({},this.dialogFormData),productOptions:[],rules:{name:[{required:!0,message:"请填写项目名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],productId:[{required:!0,message:"请选择项目要关联的产品",trigger:"change"}],beginTime:[{required:!0,message:"请选择预估起始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择预估结束时间",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],desc:[{min:0,max:300,message:"不能超过 300 个字符",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(new Date(t.dialogForm.beginTime.replace(/-/g,"/")).getTime()>new Date(t.dialogForm.endTime.replace(/-/g,"/")).getTime())return void t.$message.error("开始时间不能晚于结束时间");t.dialogForm.id?t.update(t.$api.project.updateProject):t.add(t.$api.project.addProject)}})}},created:function(){var e=this;this.$api.product.getProductsDetails({fields:"id,name"}).then(function(t){t.success?e.productOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},n=i("XyMi");var r=function(e){i("2oco")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:"40%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"关联产品",prop:"productId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:null!=e.dialogForm.projectId,multiple:!1,clearable:"",filterable:"",placeholder:"请选择需要关联的产品"},model:{value:e.dialogForm.productId,callback:function(t){e.$set(e.dialogForm,"productId",t)},expression:"dialogForm.productId"}},e._l(e.productOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"预估开始时间",prop:"beginTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"预估开始时间","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.beginTime,callback:function(t){e.$set(e.dialogForm,"beginTime",t)},expression:"dialogForm.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估结束时间",prop:"endTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"预估结束时间","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.endTime,callback:function(t){e.$set(e.dialogForm,"endTime",t)},expression:"dialogForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态"},model:{value:e.dialogForm.status,callback:function(t){e.$set(e.dialogForm,"status",t)},expression:"dialogForm.status"}},e._l(this.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-6137730e",null);t.default=l.exports},WPqu:function(e,t){},WyAQ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:["dialogVisible","row"],mixins:[i("RHSg").a],data:function(){return{roleOptions:[],rolesSelected:[]}},methods:{save:function(){var e=this,t=this.rolesSelected.length;if(t){for(var i=[],a=0;a<t;a++)i.push(this.rolesSelected[a].id);this.$api.sysUser.bindRoles({userId:this.row.id,roleIds:i}).then(function(t){if(t.success){e.$message.success(t.msg);for(var i=function(t){e.row.roles.some(function(i){if(i.id==e.rolesSelected[t].id)return!0})||e.row.roles.push(e.rolesSelected[t])},a=0;a<e.rolesSelected.length;a++){i(a)}e.closeDialog()}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},getUnRelatedRoles:function(){var e=this;this.$api.sysUser.getUnRelatedRoles({userId:this.row.id}).then(function(t){t.success?e.roleOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},created:function(){this.getUnRelatedRoles()}},s=i("XyMi");var o=function(e){i("8Ice")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"分配角色",visible:e.dialogVisible,"append-to-body":!0,width:e.dialogWidth,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{attrs:{"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"阶段名称"}},[i("el-select",{attrs:{"value-key":"id",multiple:"",filterable:"",clearable:"",size:"medium",placeholder:"请选择角色"},model:{value:e.rolesSelected,callback:function(t){e.rolesSelected=t},expression:"rolesSelected"}},e._l(e.roleOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])],1)],1)])],1)},[],!1,o,"data-v-ac24667a",null);t.default=n.exports},X3Vt:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","tableData","statusOptions","row","total"],mixins:[i("RHSg").a],data:function(){return{dialogForm:s()({},this.dialogFormData),rules:{name:[{required:!0,message:"请填写迭代名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],version:[{required:!1,message:"请填写迭代版本",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],beginTime:[{required:!0,message:"请选择预估起始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择预估结束时间",trigger:"change"}],desc:[{min:0,max:300,message:"不能超过 300 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(new Date(t.dialogForm.beginTime.replace(/-/g,"/")).getTime()>new Date(t.dialogForm.endTime.replace(/-/g,"/")).getTime())return void t.$message.error("开始时间不能晚于结束时间");t.dialogForm.id?t.update(t.$api.sprint.updateSprint):t.add(t.$api.sprint.addSprint)}})}},created:function(){var e=this;this.$api.product.getProductsDetails().then(function(t){t.success?e.productOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},n=i("XyMi");var r=function(e){i("yZSO")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:e.dialogWidth,visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"版本",prop:"version"}},[i("el-input",{model:{value:e.dialogForm.version,callback:function(t){e.$set(e.dialogForm,"version",t)},expression:"dialogForm.version"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估开始时间",prop:"beginTime"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"预估开始时间","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.beginTime,callback:function(t){e.$set(e.dialogForm,"beginTime",t)},expression:"dialogForm.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估结束时间",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"预估结束时间","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.endTime,callback:function(t){e.$set(e.dialogForm,"endTime",t)},expression:"dialogForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.dialogForm.status,callback:function(t){e.$set(e.dialogForm,"status",t)},expression:"dialogForm.status"}},e._l(this.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-9cd4714e",null);t.default=l.exports},XoTJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XyMi"),s=Object(a.a)({props:["defectsCreatedIndividual"],data:function(){return{totalRows:this.defectsCreatedIndividual.length,pageSizes:[10,20,30,40,50,80,100,150],pageSize:10,currentPage:1}},methods:{handleSizeChange:function(e){this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-table",{attrs:{data:e.defectsCreatedIndividual.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"",stripe:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"creater",label:"姓名","min-width":"16%","show-overflow-tooltip":"","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"DI",label:"缺陷密度值","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"totalCreated",label:"提交缺陷数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"deadly",label:"致命缺陷数","show-overflow-tooltip":"","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"critical",label:"严重缺陷总数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"general",label:"一般缺陷数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"轻微缺陷数",prop:"minor","min-width":"14%","header-align":"center",align:"center"}})],1),e._v(" "),i("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.totalRows,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},[],!1,null,null,null);t.default=s.exports},XrWv:function(e,t){},YHwu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),o=i("NYxO"),n={data:function(){return{}},computed:s()({mainTabs:{get:function(){return this.$store.state.tab.mainTabs},set:function(e){this.$store.commit("updateMainTabs",e)}},currTabName:{get:function(){return this.$store.state.tab.currTabName},set:function(e){this.$store.commit("updateCurrTabName",e)}}},Object(o.b)({isCollapsed:function(e){return e.app.isCollapsed},allTabsClosed:function(e){return e.tab.allTabsClosed}})),methods:{selectedTab:function(e){(e=this.mainTabs.filter(function(t){return t.name===e.name})).length>=1&&(e=e[0],this.$router.push({path:e.url}),sessionStorage.setItem("indexOfLeftNavMenuActive",e.id),sessionStorage.setItem("urlOfLeftNavMenuActive",e.url),this.$store.commit("onSelectLeftNavMenu",e.id))},removeTab:function(e){if(this.mainTabs=this.mainTabs.filter(function(t){return t.name!==e}),this.mainTabs.length>=1&&e==this.currTabName){var t=this.mainTabs[this.mainTabs.length-1];this.$router.push(t.url),this.currTabName=t.name,sessionStorage.setItem("indexOfLeftNavMenuActive",t.id),sessionStorage.setItem("urlOfLeftNavMenuActive",t.url),this.$store.commit("onSelectLeftNavMenu",t.id)}0==this.mainTabs.length&&(this.$store.commit("onAllTabsClosed",!0),sessionStorage.removeItem("indexOfLeftNavMenuActive"),sessionStorage.removeItem("urlOfLeftNavMenuActive"))},closeCurrentTab:function(){this.removeTab(this.currTabName)},closeOtherTab:function(){var e=this;this.mainTabs=this.mainTabs.filter(function(t){return t.name===e.currTabName})},closeAllTabs:function(){this.mainTabs=[],this.$store.commit("onAllTabsClosed",!0),sessionStorage.removeItem("indexOfLeftNavMenuActive"),sessionStorage.removeItem("urlOfLeftNavMenuActive")},refreshCurrentTab:function(){var e=this,t=this.currTabName,i=this.mainTabs.filter(function(e){return e.name===t}),a="";i.length>=1?(a=i.url)&&this.$nextTick(function(){e.$router.push(a)}):console.log("不存在当前tab页")}}},r=i("XyMi");var l=function(e){i("v+/9")},c=Object(r.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sub-main-wrapper",class:e.isCollapsed?"sub-main-left-collapsed":"sub-main-left"},[i("div",{staticClass:"sub-main-tabs"},[i("el-dropdown",{staticClass:"tabs-tools",attrs:{"show-timeout":0,trigger:"hover"}},[i("div",{staticStyle:{"font-size":"20px","text-align":"center"}},[i("i",{staticClass:"el-icon-arrow-down"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.closeCurrentTab(t)}}},[e._v("关闭当前标签")]),e._v(" "),i("el-dropdown-item",{nativeOn:{click:function(t){return e.closeOtherTab(t)}}},[e._v("关闭其它标签")]),e._v(" "),i("el-dropdown-item",{nativeOn:{click:function(t){return e.closeAllTabs(t)}}},[e._v("关闭全部标签")]),e._v(" "),i("el-dropdown-item",{nativeOn:{click:function(t){return e.refreshCurrentTab(t)}}},[e._v("刷新当前标签")])],1)],1),e._v(" "),i("el-tabs",{staticClass:"tabs",attrs:{closable:!0},on:{"tab-click":e.selectedTab,"tab-remove":e.removeTab},model:{value:e.currTabName,callback:function(t){e.currTabName=t},expression:"currTabName"}},e._l(e.mainTabs,function(t){return i("el-tab-pane",{key:t.id,attrs:{label:t.title,name:t.name}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{class:t.icon}),e._v("\n                    "+e._s(t.title)+"\n                ")])])}),1)],1),e._v(" "),i("div",{staticClass:"sub-main-content"},[0==e.allTabsClosed?i("router-view"):e._e()],1)])},[],!1,l,"data-v-0b4bcd23",null);t.default=c.exports},YYHX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o={props:["dialogVisible","dialogFormData","row"],mixins:[i("RHSg").a],data:function(){return{dialogForm:JSON.parse(s()(this.dialogFormData)),projectVersionOptions:[]}},methods:{getProjectVersionOptions:function(){var e=this;this.$api.projectVersion.getPlatformProjectVersions({projectId:this.row.projectId}).then(function(t){t.success?e.projectVersionOptions=t.data:(e.projectVersionOptions=[],e.$message.error(t.msg))}).catch(function(t){e.projectVersionOptions=[],e.$message.error(t.msg||t.message)})},bindProjectVersion:function(){var e=this,t={projectVersionId:this.row.id,platform:this.dialogForm.projectVersion.platform,platformProjectVersionId:this.dialogForm.projectVersion.id,platformProjectVersionName:this.dialogForm.projectVersion.name};this.$api.projectVersion.bindPlatformProjectVersion(t).then(function(t){if(t.success)for(var i in e.$message.success(t.msg),e.closeDialog(),t.data)i in e.row&&(e.row[i]=t.data[i]);else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},unbindProject:function(){var e=this,t={projectVersionId:this.row.id};this.$api.projectVersion.unbindPlatformProjectVersion(t).then(function(t){if(t.success)for(var i in e.closeDialog(),e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},clearProject:function(){this.dialogForm.projectVersion=null},save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.projectVersion?t.bindProjectVersion():t.unbindProject())})}},created:function(){this.getProjectVersionOptions()}},n=i("XyMi");var r=function(e){i("Od9w")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"关联项目版本",width:"45%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"关联项目版本",prop:"projectVersion"}},[i("el-select",{attrs:{multiple:!1,"value-key":"id",clearable:"",filterable:"",placeholder:"请选择需要关联的项目版"},on:{clear:e.clearProject},model:{value:e.dialogForm.projectVersion,callback:function(t){e.$set(e.dialogForm,"projectVersion",t)},expression:"dialogForm.projectVersion"}},e._l(e.projectVersionOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1),e._v(" "),i("br"),e._v(" "),i("span",[e._v("注：如果需要取消关联，清空已关联项目版本，执行保存即可")])],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-fc6a304a",null);t.default=l.exports},Z1j4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("//Fk"),s=i.n(a),o=i("mvHQ"),n=i.n(o),r=i("woOf"),l=i.n(r),c=(i("NYxO"),{props:["caseDialogLoaded","caseDialogEditing","caseDialogTitle","caseDialogVisible","caseData","row","tableData","caseListData","currentPage","pageSize","total","operation","caseOrder","currentModule","resultOptions","planRow","priorityOptions","executionPhaseOptions","executedEachSprintDict"],data:function(){return{fullscreen:!1,caseInfo:this.caseData,caseEditing:this.caseDialogEditing,caseStepsEditing:!1,caseStepRowSelected:[],tagInputVisible:!1,tagInputValue:"",caseAttachmentList:[],caseTestResult:"",casePriority:"",executionMethodOptions:[{label:"手工",value:"handwork"},{label:"自动化",value:"automation"}],executionMethodMap:{handwork:"手工",automation:"自动化"},executedEachSprintMap:{}}},methods:{clickRadio:function(e,t){this.executedEachSprintMap[e.value].executedEachSprint=t},onCloseDialog:function(){this.$emit("update:caseDialogVisible",!1)},beforeClose:function(e){var t=this;this.caseEditing||this.caseStepsEditing?this.$confirm("确定要关闭吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){if(e(!0),t.caseStepsEditing){t.caseStepsEditing=!1;for(var i=0;i<t.caseInfo.steps.length;i++)t.caseInfo.steps[i].editing=!1}}).catch(function(){}):e(!0),this.$emit("update:caseDialogEditing",!1)},changeDialogPos:function(){var e=this;this.$nextTick(function(){var t=e.$refs.caseDialog.$el.querySelector(".case-dialog-class");""==t.style.left?(t.style.left="0px",t.style.width="100%",t.style.right="0px"):"0px"==t.style.left?(t.style.width="50%",t.style.left="50%",t.style.right="0px"):(t.style.left="0px",t.style.width="100%",t.style.right="0px")})},expandDialog:function(){this.fullscreen=!0,this.changeDialogPos()},compressDialog:function(){this.fullscreen=!1,this.changeDialogPos()},editCase:function(){this.$emit("update:operation","editCase"),this.$emit("update:caseDialogTitle","编辑用例"),this.caseEditing||(this.caseEditing=!0,this.$emit("update:caseDialogEditing",!0))},copyCase:function(){this.caseInfo.name=this.caseInfo.name+"-副本",this.$emit("update:operation","copyCase"),this.$emit("update:caseDialogTitle","复制用例"),this.caseEditing||(this.caseEditing=!0,this.$emit("update:caseDialogEditing",!0))},cancelCaseEditing:function(){var e=this;if("newCase"==this.operation||"copyCase"==this.operation)this.$confirm("当前内容没保存，取消会自动关闭对话框，确定取消吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){e.$emit("update:caseDialogVisible",!1),e.$emit("update:caseDialogTitle","查看用例"),e.$emit("update:operation","viewCase"),e.$emit("update:caseDialogEditing",!1),e.$emit("update:caseDialogLoaded",!1)}).catch(function(){});else{this.caseEditing=!1,this.caseStepsEditing=!1;for(var t=0;t<this.caseInfo.steps.length;t++)this.caseInfo.steps[t].editing=!1;this.$emit("update:caseDialogEditing",!1),this.$emit("update:caseDialogTitle","查看用例"),this.$emit("update:operation","viewCase")}},caseInfoCheck:function(){if(!this.caseInfo.name)return this.$message.error("用例名称不能为空"),!1;if(!this.caseInfo.executionPhase)return this.$message.error("用例执行阶段不能为空"),!1;if(this.caseStepsEditing){this.caseStepsEditing=!1;for(var e=0;e<this.caseInfo.steps.length;e++)this.caseInfo.steps[e].editing=!1;this.$emit("update:caseDialogEditing",!1)}return!0},saveCase:function(e){var t=this;try{if(!this.caseInfoCheck())return;var i=l()({},this.caseInfo);i.tags=i.tags.join(",");for(var a="",s=0;s<i.executionPhase.length;s++){var o=i.executionPhase[s];o in this.executedEachSprintMap&&(a+=o+"/"+this.executedEachSprintMap[o].executedEachSprint+",")}i.executedEachSprint=a.substring(0,a.length-1),i.executionPhase=i.executionPhase.join(","),i.steps=n()(i.steps),"newCase"==this.operation||"copyCase"==this.operation?("base"==i.suiteType&&(i.sprintId=-1),this.$api.sprintCaseDialog.addTestCase(i).then(function(i){if(i.success){if(t.$message.success(i.msg),e){var a=[];for(var s in t.executedEachSprintDict)if(t.executedEachSprintDict[s].default){a=[s];break}t.caseInfo={testplanId:t.caseInfo.testplanId,suiteId:t.caseInfo.suiteId,productId:t.caseInfo.productId,sprintId:t.caseInfo.sprintId,suiteType:t.caseInfo.suiteType,customNo:"",name:"",createrName:"",updaterName:"",priority:"P3",executedEachSprint:"",executionMethod:"handwork",executionPhase:a,suitePath:t.caseInfo.suitePath,precondition:"",steps:[],postcondition:"",tags:[],desc:"",result:"未执行",remark:""}}else t.$emit("update:caseDialogVisible",!1),t.$emit("update:caseDialogLoaded",!1),t.$emit("update:caseDialogTitle","查看用例"),t.$emit("update:operation","viewCase"),t.$emit("update:caseDialogEditing",!1);for(var o=!1,n=0;n<t.tableData.length;n++){var r=t.tableData[n];if(r.suiteId==i.data.case.suiteId){r.children.splice(0,0,i.data.case),o=!0;break}}if(o){var c=t.tableData[t.tableData.length-1];t.total+1>t.pageSize&&(c.children.splice(c.children.length-1,1),c.children.length||t.tableData.splice(t.tableData.length-1,1)),t.$emit("update:total",t.total+1);var u=l()([],t.tableData);t.$emit("update:tableData",u)}else console.log("当前数据表中未找到对应的测试套件"),t.$emit("update:currentPage",1),t.$emit("update:caseDialogEditing",!1),t.$parent.queryRows();for(var d in i.data.planCaseStatistics)d in t.planRow&&(t.planRow[d]=i.data.planCaseStatistics[d]);"bindPlanAndCaseDialog"==t.currentModule&&t.$parent.checkCaseRow(t.$parent.guidsOfRelatedOldCases)}else t.$message.error(i.msg)}).catch(function(e){t.$message.error(e.msg||e.message)})):"editCase"==this.operation&&(delete i.suitePath,delete i.sprintId,this.$api.sprintCaseDialog.updateTestCase(i).then(function(e){if(e.success){for(var i in t.$message.success(e.msg),t.caseEditing=!1,t.$emit("update:caseDialogEditing",!1),t.$emit("update:caseDialogTitle","编辑用例"),e.data)i in t.row&&(t.row[i]=e.data[i]);t.caseInfo.updaterName=e.data.updaterName}else t.$message.error(e.msg)}).catch(function(e){t.$message.error(e.msg||e.message),t.$parent.queryRows()}))}catch(e){this.$message.error(e.message)}},loadCaseData:function(e){this.caseStepsEditing=!1,this.$emit("update:caseOrder",e);for(var t=0,i=0;i<this.tableData.length;i++){var a=this.tableData[i];if(a.children.length)for(var s=0;s<a.children.length;s++){if(t+=1,(this.currentPage-1)*this.pageSize+t==e){var o=a.children[s];return this.$emit("update:row",o),this.caseInfo={testplanId:o.testplanId,suiteId:o.suiteId,productId:o.productId,sprintId:o.sprintId,suiteType:o.suiteType,detailSuiteType:o.detailSuiteType,caseId:o.id,guid:o.guid,customNo:o.customNo,name:o.name,createrName:o.createrName,updaterName:o.updaterName,priority:o.priority,executedEachSprint:o.executedEachSprint,executionMethod:o.executionMethod,executionPhase:o.executionPhase,suitePath:o.suitePath,precondition:o.precondition,steps:JSON.parse(o.steps),postcondition:o.postcondition,desc:o.desc,tags:o.tags},this.initExecutedEachSprintMap(),void this.queryCaseAttachments()}}}},loadCase:function(e){var t=this,i=function(e){var i=Math.ceil(e/t.pageSize);if(i!=t.currentPage)return t.$emit("update:currentPage",i),void new s.a(function(e,i){t.$parent.queryRows(null,e,i)}).then(function(i){i?t.loadCaseData(e):t.$message.error("加载用例失败")});t.loadCaseData(e)};this.caseEditing||this.caseStepsEditing?this.$confirm("您有正在编辑的用例，确定继续操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i(e)}).catch(function(){}):i(e)},loadPrevCase:function(){this.caseOrder>1&&this.loadCase(this.caseOrder-1)},loadNextCase:function(){this.caseOrder<this.total&&this.loadCase(this.caseOrder+1)},addStep:function(e,t){this.caseStepsEditing=!0,this.$emit("update:caseDialogEditing",!0),this.caseInfo.steps.splice(e,0,t)},addCaseStep:function(){this.addStep(this.caseInfo.steps.length,{action:"",expection:"",editing:!0})},insertCaseStep:function(e,t){this.addStep(e+1,{action:"",expection:"",editing:!0})},dblclickStepRow:function(e,t,i){this.editCaseStep(null,e)},editCaseStep:function(e,t){t.editing||(t.editing=!0,this.caseStepsEditing=!0,this.$emit("update:caseDialogEditing",!0))},editCaseSteps:function(){if(this.caseStepsEditing=!0,this.$emit("update:caseDialogEditing",!0),this.caseStepRowSelected.length)for(var e=0;e<this.caseStepRowSelected.length;e++)this.caseStepRowSelected[e].editing=!0;else for(var t=0;t<this.caseInfo.steps.length;t++)this.caseInfo.steps[t].editing=!0},finishCaseStepsEditing:function(){this.caseStepsEditing=!1;for(var e=0;e<this.caseInfo.steps.length;e++)this.caseInfo.steps[e].editing=!1;this.$emit("update:caseDialogEditing",!1),this.caseEditing||this.updateCaseSteps()},updateCaseSteps:function(){var e=this,t={};t.testplanId=this.row.testplanId,t.caseId=this.caseInfo.caseId,t.guid=this.caseInfo.guid,t.steps=n()(this.caseInfo.steps),t.suiteId=this.caseInfo.suiteId,t.suiteType=this.caseInfo.suiteType,t.detailSuiteType=this.caseInfo.detailSuiteType,this.$api.sprintCaseDialog.updateTestCase(t).then(function(t){if(t.success){for(var i in e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);e.caseInfo.updaterName=t.data.updaterName}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},deleteOneCaseStep:function(e,t){this.caseStepsEditing=!0,this.$emit("update:caseDialogEditing",!0),this.caseInfo.steps.splice(e,1)},onSelectChange:function(e){this.caseStepRowSelected=e},deleteCaseStepsInBatch:function(){if(this.caseStepsEditing=!0,this.$emit("update:caseDialogEditing",!0),this.caseStepRowSelected.length)for(var e=0;e<this.caseStepRowSelected.length;e++)for(var t=0;t<this.caseInfo.steps.length;t++)this.caseInfo.steps[t]==this.caseStepRowSelected[e]&&this.caseInfo.steps.splice(t,1);else this.$alert("未选择步骤，请勾选至少一条步骤","提示",{confirmButtonText:"确定"})},onCloseTag:function(e){this.caseInfo.tags.splice(this.caseInfo.tags.indexOf(e),1)},showTagInput:function(){var e=this;this.tagInputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleTagInputConfirm:function(){var e=this.tagInputValue;e&&-1==this.caseInfo.tags.indexOf(e)&&this.caseInfo.tags.push(e),this.tagInputVisible=!1,this.tagInputValue=""},queryCaseAttachments:function(){var e=this;this.$api.sprintCaseDialog.getCaseAttachments({caseId:this.caseInfo.caseId,caseGuid:this.caseInfo.guid,caseType:this.caseInfo.suiteType,testplanId:this.caseInfo.testplanId}).then(function(t){t.success?e.caseAttachmentList=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},removeUploadAttatchment:function(e){for(var t=this.$refs.attatchmentUploader.uploadFiles,i=0;i<t.length;i++)if(e==t[i].uid){t.splice(i,1);break}},uploadAttatchment:function(e){var t=this,i=e.file;if(this.caseAttachmentList.length>this.$appConfig.caseAttachmentNumLimit)return this.$message.error("上传附件失败，最多只能上传"+this.$appConfig.caseAttachmentNumLimit+"个附件"),void this.removeUploadAttatchment(i.uid);if(!i.size)return this.$message.error("上传失败，附件内容不能为空"),void this.removeUploadAttatchment(i.uid);if(i.size/1024/1024>10)return this.$message.error("上传附件失败，文件大小不能超过"+this.$appConfig.caseAttachmentSizeLimit+"M"),void this.removeUploadAttatchment(i.uid);var a=new FormData;a.append("file",i),a.append("caseGuid",this.row.guid),a.append("caseId",this.row.id),a.append("caseType",this.row.suiteType),a.append("detailCaseType",this.row.detailSuiteType),a.append("priority",this.row.priority),a.append("testplanId",this.row.testplanId),this.$api.sprintCaseDialog.uploadAttatchment(a).then(function(e){e.success?(t.$message.success(e.msg),t.caseAttachmentList.push(e.data)):(t.removeUploadAttatchment(i.uid),t.$message.error(e.msg))}).catch(function(e){t.$message.error(e.msg||e.message),t.removeUploadAttatchment(i.uid)})},onBeforeRemoveCaseAttachment:function(e,t){var i=this;return this.$confirm("确定要删除该附件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.sprintCaseDialog.deleteAttatchment({attachmentId:e.id,guid:e.guid,caseGuid:i.row.guid,caseId:i.row.id,caseType:i.row.suiteType,priority:i.row.priority}).then(function(t){if(t.success)return i.$message.success(t.msg),i.caseAttachmentList.splice(i.caseAttachmentList.indexOf(e),1),!0}).catch(function(e){return i.$message.error(e.msg||e.message),!1})}).catch(function(){return!1}),!1},onPreviewCaseAttachment:function(e){var t=this,i=e.filePath.lastIndexOf("."),a="";if(i>-1&&(a=e.filePath.substring(i)),a&&[".png",".jpeg",".jpg",".bmp",".gif",".txt",".sql",".pdf",".html",".htm",".xml",".json"].indexOf(a)>-1){var s=document.createElement("a");return s.style.display="none",s.href=this.$apiBaseURL+"/media"+e.filePath,s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),void document.body.removeChild(s)}this.$api.sprintCaseDialog.downloadAttatchment({attachmentId:e.id,caseId:this.row.id}).then(function(t){var i=document.createElement("a"),a=new Blob([t.data],{type:t.headers["content-type"]});i.style.display="none",i.href=window.URL.createObjectURL(a),i.setAttribute("download",e.name),document.body.appendChild(i),i.click(),document.body.removeChild(i)}).catch(function(e){if("[object Blob]"==Object.prototype.toString.call(e.response.data)){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result);a.msg?t.$message.error(e.msg||e.message+":"+a.msg):t.$message.error(e.msg||e.message+":"+a.detail)},i.readAsText(e.response.data)}else t.$message.error(e.msg||e.message)})},onVisibleChange:function(e,t){e&&(this.caseTestResult=t)},onResultChanged:function(e){var t=this;this.$api.testPlanCaseTable.updateCaseTestResult({id:e.id,result:e.result,planId:e.testplanId}).then(function(i){if(i.success)for(var a in t.$message.success(i.msg),i.data.caseDataUpdated)a in e&&(e[a]=i.data.caseDataUpdated[a]);else e.result=t.caseTestResult,t.$message.error(i.msg);for(var s in i.data.planDataUpdated)s in t.planRow&&(t.planRow[s]=i.data.planDataUpdated[s])}).catch(function(i){e.result=t.caseTestResult,t.$message.error(i.msg)})},onPriorityVisibleChange:function(e,t){e&&(this.casePriority=t)},onPriorityChanged:function(e){var t=this;if(!this.caseEditing){var i={};i.testplanId=this.row.testplanId,i.caseId=this.caseInfo.caseId,i.guid=this.caseInfo.guid,i.priority=e,i.suiteId=this.caseInfo.suiteId,i.suiteType=this.caseInfo.suiteType,this.$api.sprintCaseDialog.updateTestCase(i).then(function(e){if(e.success){for(var i in t.$message.success(e.msg),e.data)i in t.row&&(t.row[i]=e.data[i]);t.caseInfo.updaterName=e.data.updaterName}else t.$message.error(e.msg),t.caseInfo.priority=t.casePriority,t.row.priority=t.casePriority}).catch(function(e){t.$message.error(e.msg),t.caseInfo.priority=t.casePriority,t.row.priority=t.casePriority})}},initExecutedEachSprintMap:function(){this.executedEachSprintMap=JSON.parse(n()(this.executedEachSprintDict));for(var e=this.caseInfo.executedEachSprint.split(","),t=0;t<e.length;t++){var i=e[t];(i=(i=i.replace(" ","")).split("/"))[0]in this.executedEachSprintDict&&(this.executedEachSprintMap[i[0]].executedEachSprint=i[1])}}},watch:{caseData:function(e,t){this.caseInfo=this.caseData,"viewCase"==this.operation?(this.caseEditing=!1,this.$emit("update:caseDialogEditing",!1),this.queryCaseAttachments()):(this.caseEditing=!0,this.$emit("update:caseDialogEditing",!0)),this.initExecutedEachSprintMap()}},computed:{executionPhase:{get:function(){for(var e="",t=0;t<this.caseInfo.executionPhase.length;t++){var i=this.caseInfo.executionPhase[t],a=this.executedEachSprintMap[i].executionPhase,s=this.executedEachSprintMap[i].executedEachSprint;e+=a+"/"+(s="N"==s?"否":"是")+"; "}return e=e.substring(0,e.length-1)}}},created:function(){"viewCase"==this.operation&&this.queryCaseAttachments(),this.initExecutedEachSprintMap()},mounted:function(){var e=this;this.$refs.caseDialog.$el.querySelector(".el-dialog__header").addEventListener("dblclick",function(){e.changeDialogPos()})}}),u=i("XyMi");var d=function(e){i("EK2x")},p=Object(u.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"case-dialog-div"},[i("el-dialog",{ref:"caseDialog",attrs:{title:e.caseDialogTitle,visible:e.caseDialogVisible,fullscreen:e.fullscreen,modal:!1,"close-on-click-modal":!0,"before-close":e.beforeClose,"destroy-on-close":!0,"custom-class":"case-dialog-class"},on:{close:e.onCloseDialog}},[i("div",["testPlanCaseTable"==e.currentModule&&"newCase"!=e.operation?i("span",[e._v("测试结果")]):e._e(),e._v(" "),"testPlanCaseTable"==e.currentModule&&"newCase"!=e.operation?i("el-select",{staticStyle:{width:"95px"},attrs:{placeholder:"请选择",size:"small"},on:{change:function(t){return e.onResultChanged(e.row)},"visible-change":function(t){return e.onVisibleChange(t,e.row.result)}},model:{value:e.row.result,callback:function(t){e.$set(e.row,"result",t)},expression:"row.result"}},e._l(e.resultOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),e.caseEditing?i("el-button",{attrs:{size:"small"},on:{click:e.cancelCaseEditing}},[i("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}}),e._v("取消\n            ")]):i("el-button",{attrs:{size:"small"},on:{click:e.editCase}},[i("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}}),e._v("编辑\n            ")]),e._v(" "),e.caseEditing?i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.saveCase(!1)}}},[i("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}}),e._v("保存\n            ")]):e._e(),e._v(" "),e.caseEditing&&"editCase"!=e.operation?i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.saveCase(!0)}}},[i("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}}),e._v("保存并新增下一条\n            ")]):e._e(),e._v(" "),e.caseEditing||"testPlanCaseTable"==e.currentModule?e._e():i("el-button",{attrs:{size:"small"},on:{click:e.copyCase}},[i("i",{staticClass:"fa fa-copy",attrs:{"aria-hidden":"true"}}),e._v("复制\n            ")]),e._v(" "),e.fullscreen?i("el-button",{attrs:{size:"small"},on:{click:e.compressDialog}},[i("i",{staticClass:"fa fa-compress",attrs:{"aria-hidden":"true"}}),e._v("退出全屏\n            ")]):i("el-button",{attrs:{size:"small"},on:{click:e.expandDialog}},[i("i",{staticClass:"fa fa-expand",attrs:{"aria-hidden":"true"}}),e._v("全屏\n            ")]),e._v(" "),"newCase"!=e.operation?i("div",{staticStyle:{display:"inline-block"}},[i("el-button",{attrs:{size:"small"},on:{click:e.loadPrevCase}},[e._v("<")]),e._v(" "),i("span",{staticStyle:{padding:"0 5px"}},[e._v(e._s(this.caseOrder)+"  of  "+e._s(e.total))]),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:e.loadNextCase}},[e._v(">")])],1):e._e(),e._v(" "),i("span",{staticStyle:{"font-size":"9px"}},[e._v("\n                备注：双击【"+e._s(e.caseDialogTitle)+"\n                】标题所在行可以快速展开/退出全屏\n            ")])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("div",{staticStyle:{display:"inline-block","margin-right":"10px"}},[i("span",[e._v("创建人："+e._s(e.caseInfo.createrName))])]),e._v(" "),i("div",{staticStyle:{display:"inline-block","margin-right":"10px"}},[i("span",[e._v("更新人："+e._s(e.caseInfo.updaterName))])]),e._v(" "),i("div",{staticStyle:{display:"inline-block","padding-right":"10px"}},[i("span",[e._v("优先级")]),e._v("：\n                "),i("el-select",{ref:"casePrioritySelect",staticStyle:{width:"70px"},attrs:{size:"mini"},on:{change:e.onPriorityChanged,"visible-change":function(t){return e.onPriorityVisibleChange(t,e.row.result)}},model:{value:e.caseInfo.priority,callback:function(t){e.$set(e.caseInfo,"priority",t)},expression:"caseInfo.priority"}},e._l(e.priorityOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("div",{staticStyle:{display:"inline-block","padding-right":"10px"}},[i("span",[e._v("执行阶段/是否每个迭代都执行？：")]),e._v(" "),e.caseEditing?i("el-select",{staticStyle:{width:"460px"},attrs:{size:"mini",multiple:""},model:{value:e.caseInfo.executionPhase,callback:function(t){e.$set(e.caseInfo,"executionPhase",t)},expression:"caseInfo.executionPhase"}},e._l(e.executionPhaseOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label+"/"+e.executedEachSprintMap[t.value].executedEachSprint,value:t.value}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),e._v(" "),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-right":"50px"}},[i("span",[e._v("每个迭代都执行？：")]),e._v(" "),i("el-radio",{attrs:{label:"Y"},nativeOn:{click:function(i){return e.clickRadio(t,"Y")}},model:{value:e.executedEachSprintMap[t.value].executedEachSprint,callback:function(i){e.$set(e.executedEachSprintMap[t.value],"executedEachSprint",i)},expression:"\n                                    executedEachSprintMap[item.value][\n                                        'executedEachSprint'\n                                    ]\n                                "}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{label:"N"},nativeOn:{click:function(i){return e.clickRadio(t,"N")}},model:{value:e.executedEachSprintMap[t.value].executedEachSprint,callback:function(i){e.$set(e.executedEachSprintMap[t.value],"executedEachSprint",i)},expression:"\n                                    executedEachSprintMap[item.value][\n                                        'executedEachSprint'\n                                    ]\n                                "}},[e._v("否")])],1)])}),1):i("span",[e._v(e._s(e.executionPhase))])],1),e._v(" "),i("div",{staticStyle:{display:"inline-block","padding-right":"10px"}},[i("span",[e._v("执行方式：")]),e._v(" "),e.caseEditing?i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.caseInfo.executionMethod,callback:function(t){e.$set(e.caseInfo,"executionMethod",t)},expression:"caseInfo.executionMethod"}},e._l(e.executionMethodOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):i("span",[e._v("\n                    "+e._s(e.executionMethodMap[e.caseInfo.executionMethod])+"\n                ")])],1),e._v(" "),i("div",{staticStyle:{display:"inline-block"}},[i("span",[e._v("测试集："+e._s(e.caseInfo.suitePath))])])]),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",[e._v("用例名称：")]),e._v(" "),e.caseEditing?i("el-input",{attrs:{placeholder:"请输入用例名称",minlength:"1",maxlength:"60",size:"small",clearable:""},model:{value:e.caseInfo.name,callback:function(t){e.$set(e.caseInfo,"name",t)},expression:"caseInfo.name"}}):i("span",{staticStyle:{"font-weight":"bold"}},[e._v("\n                "+e._s(e.caseInfo.name)+"\n            ")])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",[e._v("用例备注：")]),e._v(" "),e.caseEditing?i("el-input",{ref:"descInput",attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入用例备注",maxlength:"1000","show-word-limit":""},model:{value:e.caseInfo.desc,callback:function(t){e.$set(e.caseInfo,"desc",t)},expression:"caseInfo.desc"}}):i("pre",{staticStyle:{"margin-top":"0px","margin-bottom":"0px","white-space":"pre-wrap","word-wrap":"break-word"}},[e._v(e._s(e.caseInfo.desc))])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",[e._v("前置条件：")]),e._v(" "),e.caseEditing?i("el-input",{ref:"preconditionInput",attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入前置条件",maxlength:"1000","show-word-limit":""},model:{value:e.caseInfo.precondition,callback:function(t){e.$set(e.caseInfo,"precondition",t)},expression:"caseInfo.precondition"}}):i("pre",{staticStyle:{"margin-top":"0px","margin-bottom":"0px","white-space":"pre-wrap","word-wrap":"break-word"}},[e._v(e._s(e.caseInfo.precondition))])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[e._v("\n            测试步骤：\n            "),e._v(" "),i("el-row",[i("el-button-group",[i("el-button",{attrs:{size:"mini"},on:{click:e.addCaseStep}},[e._v("新增")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.deleteCaseStepsInBatch}},[e._v("删除")]),e._v(" "),e.caseStepsEditing&&e.caseEditing?i("el-button",{attrs:{"el-button":"",size:"mini"},on:{click:e.finishCaseStepsEditing}},[e._v("完成")]):e.caseStepsEditing&&!e.caseEditing?i("el-button",{attrs:{"el-button":"",size:"mini"},on:{click:e.finishCaseStepsEditing}},[e._v("保存")]):i("el-button",{attrs:{"el-button":"",size:"mini"},on:{click:e.editCaseSteps}},[e._v("编辑")])],1),e._v(" "),i("span",[e._v('说明：双击步骤行可进入编辑状态；非编辑用例状态下，新增/删除/编辑操作后需要点击"保存"才会生效')])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%","margin-bottom":"0px",overflow:"auto"},attrs:{data:e.caseInfo.steps,border:""},on:{"row-dblclick":e.dblclickStepRow,"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:"35px",align:"center",resizable:!1}}),e._v(" "),i("el-table-column",{attrs:{type:"index",align:"center",resizable:!1,label:"步序",width:"50px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"action",label:"步骤动作","min-width":"250px","show-overflow-tooltip":"","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.caseStepsEditing&&t.row.editing?i("span",[i("el-input",{attrs:{type:"textarea",size:"small",autosize:{minRows:2},placeholder:"请输入步骤动作"},model:{value:t.row.action,callback:function(i){e.$set(t.row,"action",i)},expression:"scope.row.action"}})],1):i("pre",{staticStyle:{"margin-top":"0px","margin-bottom":"0px","white-space":"pre-wrap","word-wrap":"break-word"}},[e._v(e._s(t.row.action))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"expection",label:"预期结果","min-width":"250px","show-overflow-tooltip":"","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.caseStepsEditing&&t.row.editing?i("span",[i("el-input",{attrs:{type:"textarea",size:"small",autosize:{minRows:2},placeholder:"请输入步骤预期结果"},model:{value:t.row.expection,callback:function(i){e.$set(t.row,"expection",i)},expression:"scope.row.expection"}})],1):i("span",{staticStyle:{"margin-top":"0px","margin-bottom":"0px","white-space":"pre-wrap","word-wrap":"break-word"}},[e._v(e._s(t.row.expection))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"190px",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"operationBtn",attrs:{size:"mini"},on:{click:function(i){return e.insertCaseStep(t.$index-1,t.row)}}},[e._v("上方插入行")]),e._v(" "),i("el-button",{staticClass:"operationBtn",attrs:{size:"mini"},on:{click:function(i){return e.insertCaseStep(t.$index,t.row)}}},[e._v("下方插入行")]),e._v(" "),i("el-button",{staticClass:"operationBtn",attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteOneCaseStep(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",[e._v("后置条件：")]),e._v(" "),e.caseEditing?i("el-input",{ref:"postconditionInput",staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word"},attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入后置条件",maxlength:"1000","show-word-limit":""},model:{value:e.caseInfo.postcondition,callback:function(t){e.$set(e.caseInfo,"postcondition",t)},expression:"caseInfo.postcondition"}}):i("pre",{staticStyle:{"margin-top":"0px","margin-bottom":"0px","white-space":"pre-wrap","word-wrap":"break-word"}},[e._v(e._s(e.caseInfo.postcondition))])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",{staticStyle:{"margin-right":"10px"}},[e._v("用例标签：")]),e._v(" "),e._l(this.caseInfo.tags,function(t){return i("el-tag",{key:t,attrs:{closable:e.caseEditing,"disable-transitions":!0},on:{close:function(i){return e.onCloseTag(t)}}},[e._v(e._s(t))])}),e._v(" "),e.tagInputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleTagInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleTagInputConfirm(t)}},model:{value:e.tagInputValue,callback:function(t){e.tagInputValue=t},expression:"tagInputValue"}}):e.caseEditing?i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showTagInput}},[e._v("+点击新增标签")]):e._e()],2),e._v(" "),e.caseEditing?e._e():i("div",{staticClass:"case-detail-div"},[i("el-upload",{ref:"attatchmentUploader",staticClass:"upload-demo",attrs:{action:"fakeaction","file-list":e.caseAttachmentList,"http-request":e.uploadAttatchment,"before-remove":e.onBeforeRemoveCaseAttachment,"on-preview":e.onPreviewCaseAttachment,"with-credentials":!0}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传附件")])],1)],1)])],1)},[],!1,d,null,null);t.default=p.exports},ZH1E:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("VCc+"),s=i("UDo9"),o=i("0xvS"),n={mixins:[s.a,o.a],data:function(){return{queryForm:{name:"",status:"",productOwner:""},dialogData:null,statusOptions:[{label:"正常",value:"正常"},{label:"结束",value:"结束"}],userName:"",dialogVisible:!1,dialogTitle:""}},components:{ProductDialog:a.default},methods:{addProduct:function(){this.dialogVisible||(this.dialogData={name:"",code:"",status:"正常",productOwner:{id:-1,name:""},developOwner:{id:-1,name:""},testOwner:{id:-1,name:""},desc:""},this.dialogVisible=!0,this.dialogTitle="新增产品")},editProduct:function(e,t){this.dialogVisible||(this.dialogData={id:t.id,name:t.name,code:t.code,status:t.status,productOwner:{id:t.productOwnerId,name:t.productOwner},developOwner:{id:t.developOwnerId,name:t.developOwner},testOwner:{id:t.testOwnerId,name:t.testOwner},desc:t.desc},this.row=t,this.dialogVisible=!0,this.dialogTitle="修改迭代项目")}},updated:function(){this.setTableBodySize()},created:function(){this.queryRowsAPI=this.$api.product.getProducts,this.queryRows()}},r=i("XyMi");var l=function(e){i("66MH")},c=Object(r.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"产品名称"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入产品名称",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"产品负责人"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入产品负责人",clearable:""},model:{value:e.queryForm.productOwner,callback:function(t){e.$set(e.queryForm,"productOwner",t)},expression:"queryForm.productOwner"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addProduct}},[e._v("新增产品")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.product.deleteProducts)}}},[e._v("删除产品")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,"cell-class-name":e.getCellClassName,"highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"70px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"产品名称","header-align":"center",align:"left","min-width":"180px","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态",width:"50px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"productOwner",label:"产品负责人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"developOwner",label:"研发负责人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"testOwner",label:"测试负责人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"产品描述","header-align":"center",align:"center","min-width":"250px","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"更新人",width:"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editProduct(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.product.deleteProduct)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.dialogVisible?i("product-dialog",{attrs:{dialogVisible:e.dialogVisible,dialogTitle:e.dialogTitle,tableData:e.tableData,statusOptions:e.statusOptions,row:e.row,dialogFormData:e.dialogData},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t}}}):e._e()],1)},[],!1,l,"data-v-3e401a00",null);t.default=c.exports},ZZDW:function(e,t){},ZmZA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","row","tableData","statusOptions","operateOneSelf"],mixins:[i("RHSg").a],data:function(){return{dialogForm:s()({},this.dialogFormData),rules:{account:[{required:!0,message:"请填写账号",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],name:[{required:!0,message:"请填写姓名",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"},{min:7,max:50,message:"长度在 7 到 50 个字符",trigger:"blur"}],mobile:[{required:!0,message:"请填写手机号",trigger:"blur"},{min:11,max:11,message:"手机号必须11位数",trigger:"blur"}],jobNumber:[{required:!0,message:"请填写工号",trigger:"blur"},{min:1,max:20,message:"工号不能超过20位数",trigger:"blur"}],isActive:[{required:!0,message:"请选是否启用",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.id?t.update(t.$api.sysUser.updateSysUser):t.add(t.$api.sysUser.addSysUser))})}}},n=i("XyMi");var r=function(e){i("S7tn")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:e.dialogWidth,visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"账号",prop:"account"}},[i("el-input",{model:{value:e.dialogForm.account,callback:function(t){e.$set(e.dialogForm,"account",t)},expression:"dialogForm.account"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[i("el-input",{model:{value:e.dialogForm.email,callback:function(t){e.$set(e.dialogForm,"email",t)},expression:"dialogForm.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[i("el-input",{model:{value:e.dialogForm.mobile,callback:function(t){e.$set(e.dialogForm,"mobile",t)},expression:"dialogForm.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"工号",prop:"jobNumber"}},[i("el-input",{model:{value:e.dialogForm.jobNumber,callback:function(t){e.$set(e.dialogForm,"jobNumber",t)},expression:"dialogForm.jobNumber"}})],1),e._v(" "),e.operateOneSelf?e._e():i("el-form-item",{attrs:{label:"是否启用",prop:"isActive"}},[i("el-radio-group",{model:{value:e.dialogForm.isActive,callback:function(t){e.$set(e.dialogForm,"isActive",t)},expression:"dialogForm.isActive"}},e._l(e.statusOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-44ada36f",null);t.default=l.exports},aBlS:function(e,t){},aM3j:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:["planRow","planDetailVisible"],components:{TestPlanCaseListTab:i("s/JH").default},data:function(){return{defaultActiveTabPaneName:"caseList",displayTestPlanCaseListTab:!0,planBaseInfoCollapsed:!0,showPlanRelatedTabs:!0}},mounted:function(){var e=this;this.$nextTick(function(){e.setTabBodyHeight()})},methods:{setTabBodyHeight:function(){var e=this.$refs.viewWrapper,t=this.$refs.topInfo,i=this.$refs.planBaseInfo,a=0,s=this.$refs.planRelatedTabs;if(i&&(a=i.offsetHeight),s&&t&&s){var o=e.offsetHeight-t.offsetHeight-a-31-10-30;s.getElementsByClassName("el-tabs__content")[0].style.height=o+"px"}},closePage:function(){this.$emit("update:planDetailVisible",!1)},onTabClicked:function(e,t){this.displayTestPlanCaseListTab=!0},togglePlanBaseInfo:function(){var e=this;this.planBaseInfoCollapsed=!this.planBaseInfoCollapsed,this.showPlanRelatedTabs=!1,this.$nextTick(function(){e.showPlanRelatedTabs=!0,e.setTabBodyHeight(),e.$refs.testPlanCaseListTab.$refs.rightElement.setTableBodySize()})}}},s=i("XyMi");var o=function(e){i("vpFl")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTabBodyHeight,expression:"setTabBodyHeight"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"topInfo",staticClass:"test-info-wrapper"},[i("span",{staticClass:"span-font"},[e._v("测试计划 / ID："+e._s(e.planRow.id))]),e._v(" "),i("span",{staticClass:"span-font"},[e._v("\n            [ 状态：\n            "),i("span",{staticClass:"test-info-text"},[e._v(e._s(e.planRow.status))]),e._v("  进度：\n            "),i("span",{staticClass:"test-info-text"},[e._v(e._s(Math.round(e.planRow.caseNumRelated?(e.planRow.caseNumExecuted-e.planRow.caseNumBlocked)/e.planRow.caseNumRelated*100:0))+"%("+e._s(e.planRow.caseNumExecuted-e.planRow.caseNumBlocked)+"/"+e._s(e.planRow.caseNumRelated)+")")]),e._v("  通过率：\n            "),i("span",{staticClass:"test-info-text"},[e._v(e._s(Math.round(e.planRow.caseNumRelated?e.planRow.caseNumSuccess/e.planRow.caseNumRelated*100:0))+"%("+e._s(e.planRow.caseNumSuccess)+"/"+e._s(e.planRow.caseNumRelated)+")")]),e._v("  失败率："),i("span",{staticClass:"test-info-text"},[e._v(e._s(Math.round(e.planRow.caseNumRelated?e.planRow.caseNumFail/e.planRow.caseNumRelated*100:0))+"%("+e._s(e.planRow.caseNumFail)+"/"+e._s(e.planRow.caseNumRelated)+")")]),e._v("  阻塞率："),i("span",{staticClass:"test-info-text"},[e._v(e._s(Math.round(e.planRow.caseNumRelated?e.planRow.caseNumBlocked/e.planRow.caseNumRelated*100:0))+"%("+e._s(e.planRow.caseNumBlocked)+"/"+e._s(e.planRow.caseNumRelated)+")")]),e._v("  未执行："),i("span",{staticClass:"test-info-text"},[e._v(e._s(e.planRow.caseNumRelated-e.planRow.caseNumExecuted))]),e._v(" ]\n        ")]),e._v(" "),i("span",{staticStyle:{height:"32px","line-height":"32px","font-size":"14px",color:"#606266"},on:{click:function(t){return t.preventDefault(),e.togglePlanBaseInfo(t)}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:!e.planBaseInfoCollapsed,expression:"!planBaseInfoCollapsed"}],staticClass:"el-icon-arrow-up el-icon--right"},[e._v("收起")]),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.planBaseInfoCollapsed,expression:"planBaseInfoCollapsed"}],staticClass:"el-icon-arrow-down el-icon--right"},[e._v("展开")])]),e._v(" "),i("span",{staticClass:"span-font close-icon-span",on:{click:function(t){return t.preventDefault(),e.closePage(t)}}},[i("i",{staticClass:"el-icon-back"},[e._v("返回上级")])])]),e._v(" "),e.planBaseInfoCollapsed?e._e():i("div",{ref:"planBaseInfo",staticClass:"plan-base-info"},[i("table",[e._m(0),e._v(" "),i("tbody",[i("tr",[i("td",[i("label",[e._v("计划名称：")]),e._v(" "),i("div",[e._v(e._s(e.planRow.name))])]),e._v(" "),i("td",[i("label",[e._v("创建人：")]),e._v(" "),i("div",[e._v(e._s(e.planRow.createrName))])]),e._v(" "),i("td",[i("label",[e._v("预估开始日期：")]),e._v(" "),i("div",[e._v(e._s(e.planRow.beginTime))])]),e._v(" "),i("td",[i("label",[e._v("预估完成日期：")]),e._v(" "),i("div",[e._v(e._s(e.planRow.endTime))])])]),e._v(" "),i("tr",[i("td",[i("label",[e._v("执行环境：")]),e._v(" "),i("div",[e._v(e._s(e.planRow.envNames))])]),e._v(" "),i("td",[i("label",[e._v("创建时间：")]),e._v(" "),i("div",[e._v(e._s(e.planRow.createTime))])]),e._v(" "),i("td",[i("label",[e._v("实际开始时间：")]),e._v(" "),i("div",[e._v(e._s(e.planRow.startTime))])]),e._v(" "),i("td",[i("label",[e._v("实际完成时间：")]),e._v(" "),i("div",[e._v(e._s(e.planRow.finishTime))])])]),e._v(" "),i("tr",[i("td",{attrs:{colspan:"2"}},[i("label",[e._v("计划描述：")]),e._v(" "),i("div",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.planRow.desc))])]),e._v(" "),i("td",{attrs:{colspan:"2"}},[i("label",[e._v("关联项目：")]),e._v(" "),i("div",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.planRow.projectNames))])])])])])]),e._v(" "),i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTabBodyHeight,expression:"setTabBodyHeight"}],ref:"planRelatedTabs",staticClass:"plan-related-tabs"},[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClicked},model:{value:e.defaultActiveTabPaneName,callback:function(t){e.defaultActiveTabPaneName=t},expression:"defaultActiveTabPaneName"}},[i("el-tab-pane",{attrs:{label:"测试用例",name:"caseList"}},[e.displayTestPlanCaseListTab?i("test-plan-case-list-tab",{directives:[{name:"show",rawName:"v-show",value:e.showPlanRelatedTabs,expression:"showPlanRelatedTabs"}],ref:"testPlanCaseListTab",attrs:{sprintID:e.planRow.sprintId,planRow:e.planRow}}):e._e()],1)],1)],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{staticStyle:{border:"none",width:"30%",height:"0px"}}),this._v(" "),t("th",{staticStyle:{border:"none",width:"15%",height:"0px"}}),this._v(" "),t("th",{staticStyle:{border:"none",width:"20%",height:"0px"}}),this._v(" "),t("th",{staticStyle:{border:"none",width:"20%",height:"0px"}})])])}],!1,o,null,null);t.default=n.exports},avim:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XyMi"),s=Object(a.a)({props:["caseExecutionIndividual"],data:function(){return{totalRows:this.caseExecutionIndividual.length,pageSizes:[10,20,30,40,50,80,100,150],pageSize:10,currentPage:1}},methods:{handleSizeChange:function(e){this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-table",{attrs:{data:e.caseExecutionIndividual.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"",stripe:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"username",label:"姓名","min-width":"16%","show-overflow-tooltip":"","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"testcaseAssigned",label:"分配用例数","show-overflow-tooltip":"","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"testcaseExecuted",label:"执行用例数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"testcasePassed",label:"通过用例数","min-width":"14%","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"用例执行率",prop:"testcaseExecutionRate","min-width":"14%","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.testcaseExecutionRate)+"%")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"用例通过率",prop:"testcasePassRate","min-width":"14%","show-overflow-tooltip":"","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.testcasePassRate)+"%")]}}])})],1),e._v(" "),i("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.totalRows,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},[],!1,null,null,null);t.default=s.exports},bA5h:function(e,t){},bAqY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),o=i("woOf"),n=i.n(o),r=i("//Fk"),l=i.n(r),c=i("NYxO"),u={data:function(){return{defaultProps:{label:"name",children:"children",isLeaf:"isLeaf"},treeData:[],emptyText:"未获取到数据，请重新打开或刷新页面重试",contextMenuVisible:!1,currNodeDataObject:null,currNode:null,defaultExpandedKeys:[]}},methods:{clickNode:function(e,t,i){this.handleNodeLeftClickEvent(e)},handleNodeLeftClickEvent:function(e){this.hideContextMenu()},rightClickNode:function(e,t,i,a){var s=this;this.contextMenuVisible=!1,this.currNodeDataObject=t,this.currNode=i,this.contextMenuVisible=!0;var o=document.querySelector("#contextMenu");if(o){o.style.left=e.pageX+"px",o.style.top=e.pageY+"px";var n=e.pageY;this.$nextTick(function(){var t=o.offsetHeight;s.$refs.treeContainer.offsetHeight-(n-s.$refs.treeContainer.getBoundingClientRect().top)<t?o.style.top=e.pageY-t+"px":o.style.top=e.pageY+"px"}),document.addEventListener("click",this.hideContextMenu)}},hideContextMenu:function(){this.contextMenuVisible=!1,document.removeEventListener("click",this.hideContextMenu)},getParentSuitePath:function(e){var t=this.$refs.tree.getNode(e);if(t){var i=t.data.name,a=t.data.parentId;return-1!=a?this.getParentSuitePath(a)+"/"+i:"/"+i}return""}}},d={props:["sprintID","productID","planID","currentModule"],components:{DelSuiteConfirmDlg:i("MGeU").default},mixins:[u],data:function(){return{oldNameForNodeEditing:"",type:"sprint",suiteIdCopiedByStructure:"",currNodeDataObjectCut:null,nodeObjectCut:null,delSuiteConfirmDlgVisible:!1,suiteIdForDel:null,suiteTypeForDel:null}},methods:{loadNode:function(e,t){var i=this;if(!this.productID)return t([]);0===e.level?this.$api.sprintCaseSuite.getSprintCaseSuiteTree({parentId:-1,productId:this.productID,sprintId:this.sprintID,planId:this.planID,sort:"id",level:"topSuite",recursive:0}).then(function(e){if(e.success){var a=e.data.filter(function(e){return"sprint"==e.type});a.length<1&&(a=e.data.filter(function(e){return"base"==e.type}));var s=-1;if(a.length>0){s=a[0].id,i.defaultExpandedKeys.push(s),i.updateCurrentSuite(-1,-1,-2,"","");var o="/"+a[0].name;setTimeout(function(){i.updateCurrentSuite(s,a[0].productId,a[0].parentId,a[0].type,o)},5)}else setTimeout(function(){i.updateCurrentSuite(-2,-1,-1,"","")},5),i.updateCurrentSuite(-1,-1,-1,"","");return t(e.data)}return i.$message.error(e.msg),t([])}).catch(function(e){return i.$message.error(e.msg||e.message),t([])}):e.level>=1&&this.$api.sprintCaseSuite.getSprintCaseSuiteTree({parentId:e.data.id,planId:this.planID,productId:this.productID,sort:"-id",level:"subSuite",recursive:0}).then(function(e){return e.success?t(e.data):(i.$message.error(e.msg),t([]))}).catch(function(e){return i.$message.error(e.msg||e.message),t([])})},onNodeContextMenu:function(e,t,i,a){"planCaseListTab"!=this.currentModule&&(t.editing||(this.type=t.type,this.oldNameForNodeEditing=t.name,this.rightClickNode(e,t,i,a)))},expandNode:function(e,t,i){},collapseNode:function(e,t,i){},updateCurrentSuite:function(e,t,i,a,s){var o={suiteID:e,productID:t,parentID:i,suiteType:a,suitePath:s};this.$store.commit("updateCurrentSuite",o)},handleNodeLeftClickEvent:function(e){var t=this.getParentSuitePath(e.parentId)+"/"+e.name;this.updateCurrentSuite(e.id,e.productId,e.parentId,e.type,t),this.hideContextMenu()},clickNode:function(e,t,i){this.currNodeDataObject=e,this.currNode=t,this.type=e.type,this.oldNameForNodeEditing=e.name,this.handleNodeLeftClickEvent(e)},addNode:function(){var e=this,t=this.currNode.isLeafByUser;this.currNode.isLeafByUser=!1;var i={parentId:this.currNodeDataObject.id,type:this.currNodeDataObject.type,productId:this.currNodeDataObject.productId,sprintId:this.currNodeDataObject.sprintId};if(this.currNode.expanded){for(var a=[],s=0;s<this.currNode.childNodes.length;s++)a.push(this.currNode.childNodes[s].data);this.$api.sprintCaseSuite.addSprintCaseSuite(i).then(function(i){i.success?(e.oldNameForNodeEditing=i.data.name,a.splice(0,0,i.data),e.$refs.tree.updateKeyChildren(e.currNodeDataObject.id,a)):(t&&(e.currNode.isLeafByUser=!0),e.$message.error(i.msg))}).catch(function(t){e.$message.error(t.msg||t.message)})}else this.currNode.expanded||(this.currNode.expanded=!0),this.$api.sprintCaseSuite.getSprintCaseSuiteTree({parentId:this.currNodeDataObject.id,productId:this.currNodeDataObject.productId,sort:"-id",level:"subStuie",recursive:0}).then(function(a){if(a.success){var s=a.data;e.$api.sprintCaseSuite.addSprintCaseSuite(i).then(function(i){i.success?(s.splice(0,0,i.data),e.oldNameForNodeEditing=i.data.name,e.currNode.childNodes=[],e.currNodeDataObject.children=s,e.$refs.tree.updateKeyChildren(e.currNodeDataObject.id,e.currNodeDataObject.children)):(t&&(e.currNode.isLeafByUser=!0),e.$message.error(i.msg))}).catch(function(t){e.$message.error(t.msg||t.message)})}else e.$message.error(a.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},editNode:function(){this.$set(this.currNodeDataObject,"editing",!0)},removeCurrNodeClicked:function(){this.$refs.tree.remove(this.currNode)},removeNode:function(){1==this.currNode.level?this.$message.error("不能删除一级测试集"):(this.delSuiteConfirmDlgVisible=!0,this.suiteIdForDel=this.currNodeDataObject.id,this.suiteTypeForDel=this.currNodeDataObject.type)},refreshNode:function(e){var t=this;return new l.a(function(i,a){t.currNode.expanded||(t.currNode.expanded=!0),t.$api.sprintCaseSuite.getSprintCaseSuiteTree({parentId:t.currNodeDataObject.id,productId:t.currNodeDataObject.productId,sort:"-id",level:"subStuie",recursive:0}).then(function(s){if(s.success){var o=s.data;t.currNode.childNodes=[],t.currNodeDataObject.children=o,t.$refs.tree.updateKeyChildren(t.currNodeDataObject.id,t.currNodeDataObject.children),"pasteSuiteCut"!=e&&t.$message.success("刷新成功"),i("success")}else t.$message.error(s.msg),a(s.msg)}).catch(function(e){t.$message.error(e.msg||e.message),a(e.msg)})})},onBlur:function(e,t){var i=this;if(t.editing&&(void 0==e.keyCode||13==e.keyCode)){var a=e.target.parentNode.querySelector("input")||e.target.parentElement.querySelector("input");if(!a)return this.$message.error("获取节点输入框对象失败，保存节点名称失败"),this.currNodeDataObject.name=this.oldNameForNodeEditing,!1;t.name=a.value,""!=t.name.trim()?this.$api.sprintCaseSuite.updateSprintCaseSuite({suiteId:t.id,name:t.name,type:t.type}).then(function(e){e.success?(t.editing=!1,i.$message.success(e.msg)):(i.currNodeDataObject.name=i.oldNameForNodeEditing,t.editing=!1,i.$message.error(e.msg))}).catch(function(e){t.name=i.oldNameForNodeEditing,t.editing=!1,i.$message.error(e.msg||e.message)}):this.$message.error("操作失败，测试集名称不能为空")}},displayOrEdit:function(e){var t=this,i=this.$createElement;return e.editing?i("span",null,[i("input",{attrs:{type:"text"},domProps:{value:e.name},on:{keyup:function(i){return t.onBlur(i,e)},blur:function(i){return t.onBlur(i,e)}},directives:[{name:"focus",value:!0}],ref:"input"},[])]):i("span",{class:"span-font",attrs:{tabindex:"1"},on:{keyup:function(e){return t.onTreeNoInsertKeyUp(e)}}},[e.name])},renderContent:function(e,t){t.node;var i=t.data;t.store;return e("span",null,[e("span",null,[this.displayOrEdit(i)])])},onTreeNoInsertKeyUp:function(e){"Insert"===e.code&&this.addNode()},pasteTestcasesCopied:function(){var e=this;this.$api.sprintCaseSuite.pasteTestcasesCopied({suiteId:this.currNodeDataObject.id,testcases:this.testcasesCopied}).then(function(t){t.success?(e.$message.success(t.msg),e.$store.commit("setTestcasesCopied",[]),e.updateCurrentSuite(-1,-1,-2,"",""),setTimeout(function(){e.handleNodeLeftClickEvent(e.currNodeDataObject)},5)):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},pasteTestcasesCut:function(){var e=this;this.testcasesCut.length?this.testcasesCut[0].suiteType==this.currNodeDataObject.type?this.$api.sprintCaseSuite.pasteTestcasesCut({suiteId:this.currNodeDataObject.id,productId:this.currNodeDataObject.productId,testcases:this.testcasesCut}).then(function(t){t.success?(e.$message.success(t.msg),e.$store.commit("setTestcasesCut",[]),e.updateCurrentSuite(-1,-1,-2,"",""),setTimeout(function(){e.handleNodeLeftClickEvent(e.currNodeDataObject)},5)):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)}):this.$message.error("黏贴失败，请选择和被剪切用例所属套件类型相同的套件"):this.$message.error("黏贴失败，请先剪切用例")},copySuiteByStructure:function(){this.suiteIdCopiedByStructure=this.currNodeDataObject.id,this.currNodeDataObjectCut=null,this.nodeObjectCut=null,this.$message.success("复制成功，请右键迭代任意测试集进行黏贴")},cutSuite:function(){this.currNodeDataObjectCut=this.currNodeDataObject,this.nodeObjectCut=this.currNode,this.suiteIdCopiedByStructure="",this.$message.success("剪切成功，请右键同类型测试集进行黏贴")},pasteSuiteCut:function(){var e=this;this.currNodeDataObjectCut.id!=this.currNodeDataObject.id?this.currNodeDataObjectCut.type==this.currNodeDataObject.type?this.$confirm("确定要黏贴到"+this.currNodeDataObject.name+"测试集下吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){e.$api.sprintCaseSuite.pasteSuiteCut({suiteId:e.currNodeDataObjectCut.id,targetSuiteId:e.currNodeDataObject.id,srcSuiteType:e.currNodeDataObjectCut.type,targetSuiteType:e.currNodeDataObject.type,productId:e.productID}).then(function(t){if(t.success)if(e.$refs.tree.remove(e.nodeObjectCut),t.data.relatedSrcSuite&&e.$refs.tree.remove(t.data.relatedSrcSuite),t.data.relatedTargetSuite){var i=n()({},e.currNodeDataObject),a=e.$refs.tree.getNode(t.data.relatedTargetSuite);a&&a.expanded?(e.currNode=a,e.currNodeDataObject=e.currNode.data,e.refreshNode("pasteSuiteCut").then(function(){e.currNode=e.$refs.tree.getNode(i),e.currNodeDataObject=e.currNode.data,e.refreshNode("pasteSuiteCut"),setTimeout(function(){e.handleNodeLeftClickEvent(e.currNodeDataObject)},5),e.currNodeDataObjectCut=null,e.nodeObjectCut=null,e.$message.success(t.msg)})):(e.refreshNode("pasteSuiteCut"),setTimeout(function(){e.handleNodeLeftClickEvent(e.currNodeDataObject)},5),e.currNodeDataObjectCut=null,e.nodeObjectCut=null,e.$message.success(t.msg))}else e.refreshNode("pasteSuiteCut"),setTimeout(function(){e.handleNodeLeftClickEvent(e.currNodeDataObject)},5),e.currNodeDataObjectCut=null,e.nodeObjectCut=null,e.$message.success(t.msg);else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}).catch(function(){}):this.$message.error("黏贴失败，请右键同类型测试集进行黏贴"):this.$message.error("黏贴失败，不能黏贴至被剪切的测试集")},pasteSuiteByStructure:function(){var e=this;this.$api.sprintCaseSuite.pasteSuiteByStructure({baseSuiteId:this.suiteIdCopiedByStructure,productId:this.currNodeDataObject.productId,sprintId:this.currNodeDataObject.sprintId}).then(function(t){t.success?(e.$message.success(t.msg),e.suiteIdCopiedByStructure=""):e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},created:function(){this.$store.commit("setTestcasesCopied",[]),this.$store.commit("setTestcasesCut",[])},computed:s()({},Object(c.b)({testcasesCopied:function(e){return e.sprintCaseTable.testcasesCopied},testcasesCut:function(e){return e.sprintCaseTable.testcasesCut}}),{showPasteCasesCopiedMenu:function(){return this.testcasesCopied.length&&this.currNode&&this.currNode.level>1},showPasteCasesCutMenu:function(){return this.testcasesCut.length&&this.currNode&&this.currNode.level>1},showCutSuiteMenu:function(){return this.currNodeDataObject&&this.currNode&&this.currNode.level>1},showPasteSuiteCutMenu:function(){if(this.currNodeDataObjectCut){var e=this.currNodeDataObject.allUpperNodeIds.split(",");return this.currNodeDataObjectCut&&this.currNodeDataObjectCut.type==this.currNodeDataObject.type&&this.currNodeDataObjectCut.id!=this.currNodeDataObject.id&&this.currNodeDataObjectCut.parentId!=this.currNodeDataObject.id&&-1==e.indexOf(this.currNodeDataObjectCut.id.toString())}return!1},showCopySuiteByStructureMenu:function(){return this.currNodeDataObject&&"base"==this.currNodeDataObject.type&&this.currNode.level>1},showPasteSuiteByStructureMenu:function(){return this.currNodeDataObject&&"sprint"==this.currNodeDataObject.type&&this.suiteIdCopiedByStructure}})},p=i("XyMi");var m=function(e){i("G9Mc")},g=Object(p.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{ref:"treeContainer",staticClass:"tree-container"},[i("el-tree",{ref:"tree",attrs:{props:e.defaultProps,load:e.loadNode,lazy:"","empty-text":e.emptyText,"node-key":"id","render-content":e.renderContent,"expand-on-click-node":!1,"default-expanded-keys":e.defaultExpandedKeys},on:{"node-click":e.clickNode,"node-contextmenu":e.onNodeContextMenu,"node-expand":e.expandNode,"node-collapse":e.collapseNode}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.contextMenuVisible,expression:"contextMenuVisible"}]},[i("ul",{staticClass:"context-menu",attrs:{id:"contextMenu"}},[i("li",{staticClass:"context-menu-item",on:{click:e.refreshNode}},[e._v("刷新测试集")]),e._v(" "),e.showPasteCasesCopiedMenu?i("li",{staticClass:"context-menu-item",on:{click:e.pasteTestcasesCopied}},[e._v("黏贴测试用例")]):e._e(),e._v(" "),e.showPasteCasesCutMenu?i("li",{staticClass:"context-menu-item",on:{click:e.pasteTestcasesCut}},[e._v("黏贴测试用例")]):e._e(),e._v(" "),e.showCopySuiteByStructureMenu?i("li",{staticClass:"context-menu-item",on:{click:e.copySuiteByStructure}},[e._v("按结构复制测试集")]):e._e(),e._v(" "),e.showCutSuiteMenu?i("li",{staticClass:"context-menu-item",on:{click:e.cutSuite}},[e._v("剪切测试集")]):e._e(),e._v(" "),e.showPasteSuiteCutMenu?i("li",{staticClass:"context-menu-item",on:{click:e.pasteSuiteCut}},[e._v("黏贴测试集")]):e._e(),e._v(" "),e.showPasteSuiteByStructureMenu?i("li",{staticClass:"context-menu-item",on:{click:e.pasteSuiteByStructure}},[e._v("黏贴测试集")]):e._e(),e._v(" "),i("li",{staticClass:"context-menu-item",on:{click:e.addNode}},[e._v("新增子测试集")]),e._v(" "),i("li",{staticClass:"context-menu-item",on:{click:e.editNode}},[e._v("重命名测试集")]),e._v(" "),i("li",{staticClass:"context-menu-item",on:{click:e.removeNode}},[e._v("删除测试集")])])]),e._v(" "),e.delSuiteConfirmDlgVisible?i("del-suite-confirm-dlg",{attrs:{dialogVisible:e.delSuiteConfirmDlgVisible,suiteTypeForDel:e.suiteTypeForDel,suiteIdForDel:e.suiteIdForDel},on:{"update:dialogVisible":function(t){e.delSuiteConfirmDlgVisible=t},"update:dialog-visible":function(t){e.delSuiteConfirmDlgVisible=t}}}):e._e()],1)},[],!1,m,"data-v-1ae63250",null);t.default=g.exports},bKcO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("w7g/"),s=i("YHwu"),o={components:{NavBar:a.default,SubMainContent:s.default},mounted:function(){this.$customUtils.headerMenu.initMenuComponent()}},n=i("XyMi");var r=function(e){i("B6j7")},l=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("nav-bar"),this._v(" "),t("sub-main-content")],1)},[],!1,r,null,null);t.default=l.exports},bOdI:function(e,t,i){"use strict";t.__esModule=!0;var a,s=i("C4MV"),o=(a=s)&&a.__esModule?a:{default:a};t.default=function(e,t,i){return t in e?(0,o.default)(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},bU08:function(e,t){},"c/Tr":function(e,t,i){e.exports={default:i("5zde"),__esModule:!0}},c45H:function(e,t,i){i("1alW"),e.exports=i("FeBl").Number.isInteger},cvSv:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{products:[],productSelected:"",showSprintTable:!1}},components:{SprintTable:i("KQdp").default},methods:{getProductsDetails:function(){var e=this;this.productSelected="",this.$api.product.getProductsDetails().then(function(t){if(t.success){e.products=t.data;var i=localStorage.getItem("productIdForSprint");if(i)i=parseInt(i),e.products.some(function(e){if(e.id==i)return!0})?e.productSelected=i:e.products.length&&(e.productSelected=e.products[0].id);else e.products.length&&(e.productSelected=e.products[0].id);localStorage.setItem("productIdForSprint",e.productSelected)}else e.$message.error(t.msg),localStorage.setItem("productIdForSprint","");e.showSprintTable=!1,e.$nextTick(function(){e.showSprintTable=!0})}).catch(function(t){localStorage.setItem("productIdForSprint",""),e.$message.error(t.msg||t.message),e.showSprintTable=!1,e.$nextTick(function(){e.showSprintTable=!0})})},onProductChange:function(e){var t=this;e||(this.productSelected=""),localStorage.setItem("productIdForSprint",this.productSelected),this.showSprintTable=!1,this.$nextTick(function(){t.showSprintTable=!0})}},created:function(){this.getProductsDetails()}},s=i("XyMi");var o=function(e){i("JrVv")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"view-wrapper"},[i("div",{staticClass:"common-top-bar-wrapper"},[i("span",{staticClass:"span-font"},[e._v("产品")]),e._v(" "),i("el-select",{attrs:{filterable:"",size:"small",placeholder:"输入搜索关键词"},on:{change:e.onProductChange},model:{value:e.productSelected,callback:function(t){e.productSelected=t},expression:"productSelected"}},e._l(e.products,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),e.showSprintTable?i("sprint-table",{staticClass:"sprint-table",attrs:{productID:e.productSelected}}):e._e()],1)},[],!1,o,"data-v-6f97b545",null);t.default=n.exports},deYz:function(e,t){},djR7:function(e,t){},eYaD:function(e,t){},fBQ2:function(e,t,i){"use strict";var a=i("evD5"),s=i("X8DO");e.exports=function(e,t,i){t in e?a.f(e,t,s(0,i)):e[t]=i}},g9CB:function(e,t,i){var a={"./Core/PersonalPanel":"vlPt","./Core/PersonalPanel.vue":"vlPt","./DeveloperView":"mHPg","./DeveloperView.vue":"mHPg","./Error/404":"vr1u","./Error/404.vue":"vr1u","./Footer/Footer":"DIPh","./Footer/Footer.vue":"DIPh","./HeaderBar/HeaderBar":"GgiA","./HeaderBar/HeaderBar.vue":"GgiA","./Home":"j7e0","./Home.vue":"j7e0","./Home/Level3Menu2":"7EcF","./Home/Level3Menu2.vue":"7EcF","./Home/Level4Menu1":"v2HY","./Home/Level4Menu1.vue":"v2HY","./IFrame/IFrame":"NGlO","./IFrame/IFrame.vue":"NGlO","./Index":"mlqX","./Index.vue":"mlqX","./Login":"lmfZ","./Login.vue":"lmfZ","./MainContent/MainContent":"u37B","./MainContent/MainContent.vue":"u37B","./MainContent/SubMainContent":"YHwu","./MainContent/SubMainContent.vue":"YHwu","./Metric":"zkII","./Metric.vue":"zkII","./NavBar/NavBar":"w7g/","./NavBar/NavBar.vue":"w7g/","./ProductView":"PmqB","./ProductView.vue":"PmqB","./ProductView/Product":"ZH1E","./ProductView/Product.vue":"ZH1E","./ProductView/Product/ProductDialog":"VCc+","./ProductView/Product/ProductDialog.vue":"VCc+","./ProductView/Sprint":"cvSv","./ProductView/Sprint.vue":"cvSv","./ProductView/Sprint/SprintDialog":"X3Vt","./ProductView/Sprint/SprintDialog.vue":"X3Vt","./ProductView/Sprint/SprintTable":"KQdp","./ProductView/Sprint/SprintTable.vue":"KQdp","./ProjectView":"bKcO","./ProjectView.vue":"bKcO","./ProjectView/Project":"4Fr2","./ProjectView/Project.vue":"4Fr2","./ProjectView/Project/BindProjectDialog":"0MN6","./ProjectView/Project/BindProjectDialog.vue":"0MN6","./ProjectView/Project/ProjectDialog":"VLYx","./ProjectView/Project/ProjectDialog.vue":"VLYx","./ProjectView/ProjectVersion":"M7n+","./ProjectView/ProjectVersion.vue":"M7n+","./ProjectView/ProjectVersion/BindProjectVersionDialog":"YYHX","./ProjectView/ProjectVersion/BindProjectVersionDialog.vue":"YYHX","./ProjectView/ProjectVersion/ProjectVersionDialog":"yGFX","./ProjectView/ProjectVersion/ProjectVersionDialog.vue":"yGFX","./ProjectView/ProjectVersion/ProjectVersionTable":"PaUe","./ProjectView/ProjectVersion/ProjectVersionTable.vue":"PaUe","./System":"2wH0","./System.vue":"2wH0","./System/Env":"otXZ","./System/Env.vue":"otXZ","./System/Env/EnvDialog":"Qtzs","./System/Env/EnvDialog.vue":"Qtzs","./System/MsgPushAccount":"Snr2","./System/MsgPushAccount.vue":"Snr2","./System/MsgPushAccount/BindSysGroupDialog":"/I8A","./System/MsgPushAccount/BindSysGroupDialog.vue":"/I8A","./System/MsgPushAccount/MsgPushAccountDlg":"BYwb","./System/MsgPushAccount/MsgPushAccountDlg.vue":"BYwb","./System/Sprint/SprintDialog":"2N7Y","./System/Sprint/SprintDialog.vue":"2N7Y","./System/Sprint/TpadProjectVersionDialog":"JUFp","./System/Sprint/TpadProjectVersionDialog.vue":"JUFp","./System/Sprint/ZtProjectDialog":"qOen","./System/Sprint/ZtProjectDialog.vue":"qOen","./System/SysGroup":"LUL7","./System/SysGroup.vue":"LUL7","./System/SysGroup/SysGroupDialog":"qM2I","./System/SysGroup/SysGroupDialog.vue":"qM2I","./System/SysMenu":"Ev5q","./System/SysMenu.vue":"Ev5q","./System/SysMenu/SysMenuDialog":"kt+b","./System/SysMenu/SysMenuDialog.vue":"kt+b","./System/SysRole":"kYVL","./System/SysRole.vue":"kYVL","./System/SysRole/BindMenuDialog":"QH+F","./System/SysRole/BindMenuDialog.vue":"QH+F","./System/SysRole/SysMenuTree":"6uj/","./System/SysRole/SysMenuTree.vue":"6uj/","./System/SysRole/SysRoleDialog":"GQzu","./System/SysRole/SysRoleDialog.vue":"GQzu","./System/SysUser":"KG5/","./System/SysUser.vue":"KG5/","./System/SysUser/BindAccountDialog":"WG6I","./System/SysUser/BindAccountDialog.vue":"WG6I","./System/SysUser/BindGroupDialog":"2WM9","./System/SysUser/BindGroupDialog.vue":"2WM9","./System/SysUser/BindRoleDialog":"WyAQ","./System/SysUser/BindRoleDialog.vue":"WyAQ","./System/SysUser/RelatedAccountDialog":"8dVC","./System/SysUser/RelatedAccountDialog.vue":"8dVC","./System/SysUser/SysUserDialog":"ZmZA","./System/SysUser/SysUserDialog.vue":"ZmZA","./System/TestPhase":"PZYA","./System/TestPhase.vue":"PZYA","./System/TestPhase/TestPhaseDialog":"EC/U","./System/TestPhase/TestPhaseDialog.vue":"EC/U","./TesterView":"up2O","./TesterView.vue":"up2O","./TesterView/SprintCase/BatchUpdateCasesDlg":"BvEW","./TesterView/SprintCase/BatchUpdateCasesDlg.vue":"BvEW","./TesterView/SprintCase/CopyCaseToSprintDlg":"LtmD","./TesterView/SprintCase/CopyCaseToSprintDlg.vue":"LtmD","./TesterView/SprintCase/DelSuiteConfirmDlg":"MGeU","./TesterView/SprintCase/DelSuiteConfirmDlg.vue":"MGeU","./TesterView/SprintCase/ImportCaseDialog":"rIxZ","./TesterView/SprintCase/ImportCaseDialog.vue":"rIxZ","./TesterView/SprintCase/SprintCaseDialog":"Z1j4","./TesterView/SprintCase/SprintCaseDialog.vue":"Z1j4","./TesterView/SprintCase/SprintCaseSuiteTree":"bAqY","./TesterView/SprintCase/SprintCaseSuiteTree.vue":"bAqY","./TesterView/SprintCase/SprintCaseTable":"Ql+R","./TesterView/SprintCase/SprintCaseTable.vue":"Ql+R","./TesterView/SprintTestPlan/BindCaseDialog":"Pjag","./TesterView/SprintTestPlan/BindCaseDialog.vue":"Pjag","./TesterView/SprintTestPlan/PlanCaseDetail":"zcZX","./TesterView/SprintTestPlan/PlanCaseDetail.vue":"zcZX","./TesterView/SprintTestPlan/RemarkDialog":"rTqL","./TesterView/SprintTestPlan/RemarkDialog.vue":"rTqL","./TesterView/SprintTestPlan/SprintTestPlanTable":"8XtC","./TesterView/SprintTestPlan/SprintTestPlanTable.vue":"8XtC","./TesterView/SprintTestPlan/TestPlanCaseListTab":"s/JH","./TesterView/SprintTestPlan/TestPlanCaseListTab.vue":"s/JH","./TesterView/SprintTestPlan/TestPlanCaseTable":"rDhm","./TesterView/SprintTestPlan/TestPlanCaseTable.vue":"rDhm","./TesterView/SprintTestPlan/TestPlanDetail":"aM3j","./TesterView/SprintTestPlan/TestPlanDetail.vue":"aM3j","./TesterView/SprintTestPlan/TestPlanDialog":"L+JL","./TesterView/SprintTestPlan/TestPlanDialog.vue":"L+JL","./TesterView/SprintTestPlan/UpdateResultDialog":"vs0y","./TesterView/SprintTestPlan/UpdateResultDialog.vue":"vs0y","./TesterView/SprintTestReport":"Amp4","./TesterView/SprintTestReport.vue":"Amp4","./TesterView/SprintTestReport/CaseExecutionIndividualStatistics":"avim","./TesterView/SprintTestReport/CaseExecutionIndividualStatistics.vue":"avim","./TesterView/SprintTestReport/DefectCreatedIndividualStatistics":"XoTJ","./TesterView/SprintTestReport/DefectCreatedIndividualStatistics.vue":"XoTJ","./TesterView/SprintTestReport/DefectResolvedIndividualStatistics":"3Wlr","./TesterView/SprintTestReport/DefectResolvedIndividualStatistics.vue":"3Wlr","./TesterView/SprintTestReport/UnclosedDefectTable":"BKUr","./TesterView/SprintTestReport/UnclosedDefectTable.vue":"BKUr","./TesterView/TestCaseManagement":"zVZV","./TesterView/TestCaseManagement.vue":"zVZV","./TesterView/TestPlanManagement":"+X/A","./TesterView/TestPlanManagement.vue":"+X/A","./Workbench":"NZ1Z","./Workbench.vue":"NZ1Z"};function s(e){return i(o(e))}function o(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(a)},s.resolve=o,e.exports=s,s.id="g9CB"},gApy:function(e,t,i){var a,s,o=i("i4uy"),n=i("MAlW"),r=0,l=0;e.exports=function(e,t,i){var c=t&&i||0,u=t||[],d=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==p){var m=o();null==d&&(d=a=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==p&&(p=s=16383&(m[6]<<8|m[7]))}var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:l+1,f=g-r+(h-l)/1e4;if(f<0&&void 0===e.clockseq&&(p=p+1&16383),(f<0||g>r)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=g,l=h,s=p;var v=(1e4*(268435455&(g+=122192928e5))+h)%4294967296;u[c++]=v>>>24&255,u[c++]=v>>>16&255,u[c++]=v>>>8&255,u[c++]=255&v;var b=g/4294967296*1e4&268435455;u[c++]=b>>>8&255,u[c++]=255&b,u[c++]=b>>>24&15|16,u[c++]=b>>>16&255,u[c++]=p>>>8|128,u[c++]=255&p;for(var y=0;y<6;++y)u[c+y]=d[y];return t||n(u)}},gMBS:function(e,t){},"gs/3":function(e,t){},hq6T:function(e,t){},i4uy:function(e,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var a=new Uint8Array(16);e.exports=function(){return i(a),a}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},iZc3:function(e,t){},ioQ5:function(e,t,i){i("HpRW")("Set")},j7e0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XyMi");var s=function(e){i("ZZDW")},o=Object(a.a)({mounted:function(){this.$customUtils.headerMenu.initMenuComponent()}},function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n    待开发\n")])},[],!1,s,null,null);t.default=o.exports},jlb1:function(e,t){},kPjl:function(e,t){},kYVL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("GQzu"),s=i("QH+F"),o=i("UDo9"),n=i("0xvS"),r={mixins:[o.a,n.a],data:function(){return{queryForm:{name:"",isActive:""},roleData:null,roleDialogVisible:!1,roleDialogTitle:"",bindMenuDialogVisible:!1,roleID:0,statusOptions:[{label:"启用",value:!0},{label:"禁用",value:!1}]}},components:{SysRoleDialog:a.default,BindMenuDialog:s.default},methods:{addRole:function(){this.roleDialogVisible||(this.roleData={name:"",desc:"",isActive:!0},this.roleDialogVisible=!0,this.roleDialogTitle="新增角色")},editRole:function(e,t){this.roleDialogVisible||(this.roleData={id:t.id,name:t.name,desc:t.desc,isActive:t.isActive},this.roleDialogVisible=!0,this.roleDialogTitle="修改角色",this.row=t)},toggleRoleStatus:function(e,t){var i=this,a=t.isActive?"禁用":"启用";this.$confirm("确定要"+a+"该角色吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.sysRole.updateSysRole({id:t.id,isActive:!t.isActive}).then(function(e){if(e.success)for(var a in i.$message({message:e.msg,type:"success"}),e.data)a in t&&(t[a]=e.data[a]);else i.$message.error(e.msg)}).catch(function(e){i.$message.error(e.msg||e.message)})}).catch(function(){})},bindMenu:function(e,t){this.bindMenuDialogVisible||(this.bindMenuDialogVisible=!0,this.roleID=t.id)},clickRow:function(e,t,i){"操作"!=t.label&&this.editRole(void 0,e)},clearStatus:function(){this.queryForm.isActive=""}},updated:function(){this.setTableBodySize()},created:function(){this.queryRowsAPI=this.$api.sysRole.getSysRoles,this.queryRows()}},l=i("XyMi");var c=function(e){i("Ev5qI")},u=Object(l.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryForm,size:"small"}},[i("el-form-item",{attrs:{label:"角色名称"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入角色名称",clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{clearable:""},on:{clear:e.clearStatus},model:{value:e.queryForm.isActive,callback:function(t){e.$set(e.queryForm,"isActive",t)},expression:"queryForm.isActive"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addRole}},[e._v("新增角色")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.sysRole.batchDeleteSysRole)}}},[e._v("删除角色")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,border:"",stripe:"","empty-text":e.emptyText,"cell-class-name":e.getCellClassName,"highlight-current-row":""},on:{"selection-change":e.onSelectChange,"row-click":e.clickRow}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"角色名称","show-overflow-tooltip":"","header-align":"center",align:"left"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"角色描述","show-overflow-tooltip":"","header-align":"center",align:"left"}}),e._v(" "),i("el-table-column",{attrs:{prop:"isActive",label:"是否启用",width:"80px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isActive?i("span",[e._v("启用")]):i("span",[e._v("禁用")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"100px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"更新人",width:"100px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"290px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.bindMenu(t.$index,t.row)}}},[e._v("关联菜单")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editRole(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),t.row.isActive?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.toggleRoleStatus(t.$index,t.row)}}},[e._v("禁用")]):i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.toggleRoleStatus(t.$index,t.row)}}},[e._v("启用")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.sysRole.deleteSysRole)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.roleDialogVisible?i("sys-role-dialog",{attrs:{dialogVisible:e.roleDialogVisible,dialogTitle:e.roleDialogTitle,tableData:e.tableData,dialogFormData:e.roleData,row:e.row,statusOptions:e.statusOptions},on:{"update:dialogVisible":function(t){e.roleDialogVisible=t},"update:dialog-visible":function(t){e.roleDialogVisible=t}}}):e._e(),e._v(" "),e.bindMenuDialogVisible?i("bind-menu-dialog",{attrs:{dialogVisible:e.bindMenuDialogVisible,roleID:e.roleID},on:{"update:dialogVisible":function(t){e.bindMenuDialogVisible=t},"update:dialog-visible":function(t){e.bindMenuDialogVisible=t}}}):e._e()],1)},[],!1,c,null,null);t.default=u.exports},"kt+b":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","menuNode"],mixins:[i("RHSg").a],data:function(){return{dialogFormLabeWidth:"130px",dialogForm:s()({},this.dialogFormData),typeOptions:[{label:"菜单",value:"菜单"},{label:"目录",value:"目录"},{label:"按钮",value:"按钮"}],requireAuthOptions:[{label:"登录后才可访问",value:!0},{label:"不需要登录也可以访问",value:!1}],showOptions:[{label:"显示",value:!0},{label:"隐藏",value:!1}],collapsedOptions:[{label:"是",value:!0},{label:"否",value:!1}],rules:{type:[{required:!0,message:"请选择资源类型",trigger:"blur"}],name:[{required:!0,message:"请输入资源名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],desc:[{min:0,max:300,message:"资源描述不能超过 300 个字符",trigger:"blur"}],url:[{min:0,max:100,message:"资源url不能超过 100 个字符",trigger:"blur"}],icon:[{min:0,max:30,message:"资源图标不能超过 30 个字符",trigger:"blur"}],perms:[{min:0,max:50,message:"权限标识不能超过 50 个字符",trigger:"blur"}],requireAuth:[{required:!0,message:"请选择是否登录验证",trigger:"blur"}],show:[{required:!0,message:"请选择前端是否显示",trigger:"blur"}],showWithoutAuth:[{required:!0,message:"请选择未登录是否显示",trigger:"blur"}],collapsed:[{required:!0,message:"请选择是否折叠",trigger:"blur"}]}}},methods:{add:function(){var e=this,t=this.menuNode.isLeafByUser;this.menuNode.isLeafByUser=!1,this.menuNode.expanded?this.$api.sysMenu.addSysMenu(this.dialogForm).then(function(i){if(i.success){var a=e.menuNode.childNodes.length;a?e.$parent.$refs.sysMenuTree.insertAfter(i.data,e.menuNode.childNodes[a-1]):e.$parent.$refs.sysMenuTree.append(i.data,e.menuNode),e.closeDialog(),e.$message({message:i.msg,type:"success"})}else t&&(e.menuNode.isLeafByUser=!0),e.$message.error(i.msg)}).catch(function(t){e.$message.error(t.msg||t.message)}):this.$api.sysMenu.getSysMenuTree({parentId:this.menuNode.data.id,recursive:!1}).then(function(i){i.success?(e.menuNode.childNodes||e.$set(e.menuNode,"childNodes",[]),e.$parent.$refs.sysMenuTree.updateKeyChildren(e.menuNode.data.id,i.data),e.menuNode.expanded||(e.menuNode.expanded=!0),e.$api.sysMenu.addSysMenu(e.dialogForm).then(function(i){if(i.success){var a=e.menuNode.childNodes.length;a?e.$parent.$refs.sysMenuTree.insertAfter(i.data,e.menuNode.childNodes[a-1]):e.$parent.$refs.sysMenuTree.append(i.data,e.menuNode),e.closeDialog(),e.$message({message:i.msg,type:"success"})}else t&&(e.menuNode.isLeafByUser=!0),e.$message.error(i.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})):e.$message.error(i.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},update:function(){var e=this;this.$api.sysMenu.updateSysMenu(this.dialogForm).then(function(t){if(t.success){for(var i in t.data)i in e.menuNode.data&&(e.menuNode.data[i]=t.data[i]);e.closeDialog(),e.$message({message:t.msg,type:"success"})}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.id?t.update():t.add())})}}},n=i("XyMi");var r=function(e){i("yUxu")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:"50%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"资源类型",prop:"type"}},[i("el-radio-group",{model:{value:e.dialogForm.type,callback:function(t){e.$set(e.dialogForm,"type",t)},expression:"dialogForm.type"}},e._l(e.typeOptions,function(e){return i("el-radio",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"资源描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),"菜单"==e.dialogForm.type|"按钮"==e.dialogForm.type?i("el-form-item",{attrs:{label:"资源URL",prop:"url"}},[i("el-input",{model:{value:e.dialogForm.url,callback:function(t){e.$set(e.dialogForm,"url",t)},expression:"dialogForm.url"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"资源图标",prop:"icon"}},[i("el-input",{model:{value:e.dialogForm.icon,callback:function(t){e.$set(e.dialogForm,"icon",t)},expression:"dialogForm.icon"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限标识",prop:"perms"}},[i("el-input",{model:{value:e.dialogForm.perms,callback:function(t){e.$set(e.dialogForm,"perms",t)},expression:"dialogForm.perms"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"登录验证",prop:"requireAuth"}},[i("el-radio-group",{model:{value:e.dialogForm.requireAuth,callback:function(t){e.$set(e.dialogForm,"requireAuth",t)},expression:"dialogForm.requireAuth"}},e._l(e.requireAuthOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),"按钮"!=e.dialogForm.type?i("el-form-item",{attrs:{label:"前端是否显示",prop:"show"}},[i("el-radio-group",{model:{value:e.dialogForm.show,callback:function(t){e.$set(e.dialogForm,"show",t)},expression:"dialogForm.show"}},e._l(e.showOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),e._v(" "),"按钮"!=e.dialogForm.type?i("el-form-item",{attrs:{label:"未登录是否显示",prop:"showWithoutAuth"}},[i("el-radio-group",{model:{value:e.dialogForm.showWithoutAuth,callback:function(t){e.$set(e.dialogForm,"showWithoutAuth",t)},expression:"dialogForm.showWithoutAuth"}},e._l(e.showOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),e._v(" "),"按钮"!=e.dialogForm.type?i("el-form-item",{attrs:{label:"是否折叠",prop:"collapsed"}},[i("el-radio-group",{model:{value:e.dialogForm.collapsed,callback:function(t){e.$set(e.dialogForm,"collapsed",t)},expression:"dialogForm.collapsed"}},e._l(e.collapsedOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),e._v(" "),e.dialogForm.id?i("el-form-item",{attrs:{label:"排序",prop:"order"}},[i("el-input",{model:{value:e.dialogForm.order,callback:function(t){e.$set(e.dialogForm,"order",t)},expression:"dialogForm.order"}})],1):e._e(),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-7822394e",null);t.default=l.exports},lHA8:function(e,t,i){e.exports={default:i("pPW7"),__esModule:!0}},lvfT:function(e,t){},m9gC:function(e,t,i){var a=i("RY/4"),s=i("4WTo");e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+"#toJSON isn't generic");return s(this)}}},mClu:function(e,t,i){var a=i("kM2E");a(a.S+a.F*!i("+E39"),"Object",{defineProperty:i("evD5").f})},mHPg:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("w7g/"),s=i("YHwu"),o={components:{NavBar:a.default,SubMainContent:s.default},mounted:function(){this.$customUtils.headerMenu.initMenuComponent()}},n=i("XyMi");var r=function(e){i("IEq8")},l=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("nav-bar"),this._v(" "),t("sub-main-content")],1)},[],!1,r,null,null);t.default=l.exports},np54:function(e,t){},oNmr:function(e,t,i){i("9Bbf")("Set")},oOEt:function(e,t){},oRir:function(e,t){},oeOm:function(e,t,i){var a=i("7Doy");e.exports=function(e,t){return new(a(e))(t)}},otXZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Qtzs"),s=i("UDo9"),o=i("0xvS"),n={mixins:[s.a,o.a],name:"Env",data:function(){return{envData:null,dialogVisible:!1,dialogTitle:""}},components:{EnvDialog:a.default},methods:{addEnv:function(){this.dialogVisible||(this.envData={name:"",desc:""},this.dialogVisible=!0,this.dialogTitle="新增环境")},editEnv:function(e,t){this.dialogVisible||(this.envData={id:t.id,name:t.name,desc:t.desc},this.row=t,this.dialogVisible=!0,this.dialogTitle="修改环境")}},updated:function(){this.setTableBodySize()},created:function(){this.queryRowsAPI=this.$api.env.getEnvs,this.queryRows()}},r=i("XyMi");var l=function(e){i("ryrX")},c=Object(r.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"}],ref:"viewWrapper",staticClass:"view-wrapper"},[i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize},on:{click:e.addEnv}},[e._v("新增环境")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize},on:{click:function(t){return e.deleteRows(e.$api.env.deleteEnvs)}}},[e._v("删除环境")])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,"empty-text":e.emptyText,border:"",stripe:"","cell-class-name":e.getCellClassName,"highlight-current-row":""},on:{"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"环境名称","header-align":"center",align:"left","min-width":"250px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"desc",label:"环境描述","header-align":"center",align:"left","min-width":"400px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createrName",label:"创建人","min-width":"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updaterName",label:"修改人","min-width":"95px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"修改时间","min-width":"160px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editEnv(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteRow(t.$index,t.row,e.$api.env.deleteEnv)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.dialogVisible?i("env-dialog",{attrs:{dialogVisible:e.dialogVisible,dialogTitle:e.dialogTitle,tableData:e.tableData,dialogFormData:e.envData,row:e.row},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t}}}):e._e()],1)},[],!1,l,null,null);t.default=c.exports},pPW7:function(e,t,i){i("M6a0"),i("zQR9"),i("+tPU"),i("ttyz"),i("BDhv"),i("oNmr"),i("ioQ5"),e.exports=i("FeBl").Set},qM2I:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["dialogVisible","dialogTitle","dialogFormData","row","tableData","userName"],mixins:[i("RHSg").a],data:function(){return{dialogForm:s()({},this.dialogFormData),rules:{name:[{required:!0,message:"请输入组别名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],desc:[{min:0,max:300,message:"资源描述不能超过 300 个字符",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogForm.id?t.update(t.$api.sysGroup.updateSysGroup):t.add(t.$api.sysGroup.addSysGroup))})}}},n=i("XyMi");var r=function(e){i("EXiZ")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:e.dialogWidth,visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"组别名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"组别描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-1e5ba2a2",null);t.default=l.exports},qOen:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o={props:["ztProjectDialogVisible","ztProjectDialogTitle","ztProjectData","row"],data:function(){return{ztProjectForm:s()({},this.ztProjectData),productOptions:[],ztProjectStatusOptions:[{label:"未开始",value:"wait"},{label:"进行中",value:"doing"},{label:"已完成",value:"done"}],rules:{productIds:[{type:"array",required:!0,message:"请选择迭代要关联的产品",trigger:"change"}],beginTime:[{type:"string",required:!0,message:"请选择预估起始时间",trigger:"change"}],endTime:[{type:"string",required:!0,message:"请选择预估结束时间",trigger:"change"}],desc:[{min:0,max:500,message:"不能超过 500 个字符",trigger:"blur"}],ztProjectStatus:[{type:"string",required:!0,message:"请选是否启用",trigger:"blur"}]}}},methods:{onCloseDialog:function(){this.closeDialog()},closeDialog:function(){this.$emit("update:ztProjectDialogVisible",!1)},createZtProject:function(){var e=this;this.$api.zentaoProject.addZtProject(this.ztProjectForm).then(function(t){if(t.success){for(var i in e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);e.closeDialog()}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},updateZtProject:function(){var e=this;this.$api.zentaoProject.updateZtProject(this.ztProjectForm).then(function(t){if(t.success){for(var i in e.$message.success(t.msg),t.data)i in e.row&&(e.row[i]=t.data[i]);e.closeDialog()}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(new Date(t.ztProjectForm.beginTime.replace(/-/g,"/")).getTime()>new Date(t.ztProjectForm.endTime.replace(/-/g,"/")).getTime())return void t.$message.error("开始时间不能晚于结束时间");t.ztProjectForm.ztProjectId?t.updateZtProject():t.createZtProject()}})}},created:function(){var e=this;this.$api.zentaoProduct.queryProductsDetails().then(function(t){t.success?e.productOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},n=i("XyMi");var r=function(e){i("0KRM")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.ztProjectDialogTitle,width:"30%",visible:e.ztProjectDialogVisible,"show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!0},on:{close:e.onCloseDialog}},[i("div",{staticClass:"zentao-project-dialog-div"},[i("el-form",{ref:"ztProjectForm",attrs:{model:e.ztProjectForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{staticStyle:{width:"99%"},attrs:{size:"small",disabled:""},model:{value:e.ztProjectForm.name,callback:function(t){e.$set(e.ztProjectForm,"name",t)},expression:"ztProjectForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"关联产品",prop:"productIds"}},[i("el-select",{staticStyle:{width:"99%"},attrs:{multiple:!0,clearable:"",filterable:"",placeholder:"请选择需要关联的产品"},model:{value:e.ztProjectForm.productIds,callback:function(t){e.$set(e.ztProjectForm,"productIds",t)},expression:"ztProjectForm.productIds"}},e._l(e.productOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"预估开始时间",prop:"beginTime"}},[i("el-date-picker",{staticStyle:{width:"99%"},attrs:{type:"date",size:"small",placeholder:"预估开始时间","value-format":"yyyy-MM-dd"},model:{value:e.ztProjectForm.beginTime,callback:function(t){e.$set(e.ztProjectForm,"beginTime",t)},expression:"ztProjectForm.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估结束时间",prop:"endTime"}},[i("el-date-picker",{staticStyle:{width:"99%"},attrs:{type:"date",size:"small",placeholder:"预估结束时间","value-format":"yyyy-MM-dd"},model:{value:e.ztProjectForm.endTime,callback:function(t){e.$set(e.ztProjectForm,"endTime",t)},expression:"ztProjectForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"desc"}},[i("el-input",{staticStyle:{width:"99%"},attrs:{type:"textarea"},model:{value:e.ztProjectForm.desc,callback:function(t){e.$set(e.ztProjectForm,"desc",t)},expression:"ztProjectForm.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"ztProjectStatus"}},[i("el-radio-group",{model:{value:e.ztProjectForm.ztProjectStatus,callback:function(t){e.$set(e.ztProjectForm,"ztProjectStatus",t)},expression:"ztProjectForm.ztProjectStatus"}},e._l(e.ztProjectStatusOptions,function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),i("el-form-item",[i("div",{staticClass:"dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ztProjectForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,r,"data-v-f9b390f2",null);t.default=l.exports},qo66:function(e,t,i){"use strict";var a=i("7KvD"),s=i("kM2E"),o=i("06OY"),n=i("S82l"),r=i("hJx8"),l=i("xH/j"),c=i("NWt+"),u=i("2KxR"),d=i("EqjI"),p=i("e6n0"),m=i("evD5").f,g=i("ALrJ")(0),h=i("+E39");e.exports=function(e,t,i,f,v,b){var y=a[e],_=y,w=v?"set":"add",S=_&&_.prototype,x={};return h&&"function"==typeof _&&(b||S.forEach&&!n(function(){(new _).entries().next()}))?(_=t(function(t,i){u(t,_,e,"_c"),t._c=new y,void 0!=i&&c(i,v,t[w],t)}),g("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in S&&(!b||"clear"!=e)&&r(_.prototype,e,function(i,a){if(u(this,_,e),!t&&b&&!d(i))return"get"==e&&void 0;var s=this._c[e](0===i?0:i,a);return t?this:s})}),b||m(_.prototype,"size",{get:function(){return this._c.size}})):(_=f.getConstructor(t,e,v,w),l(_.prototype,i),o.NEED=!0),p(_,e),x[e]=_,s(s.G+s.W+s.F,x),b||f.setStrong(_,e,v),_}},qyJz:function(e,t,i){"use strict";var a=i("+ZMJ"),s=i("kM2E"),o=i("sB3e"),n=i("msXi"),r=i("Mhyx"),l=i("QRG4"),c=i("fBQ2"),u=i("3fs2");s(s.S+s.F*!i("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,s,d,p=o(e),m="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,f=void 0!==h,v=0,b=u(p);if(f&&(h=a(h,g>2?arguments[2]:void 0,2)),void 0==b||m==Array&&r(b))for(i=new m(t=l(p.length));t>v;v++)c(i,v,f?h(p[v],v):p[v]);else for(d=b.call(p),i=new m;!(s=d.next()).done;v++)c(i,v,f?n(d,h,[s.value,v],!0):s.value);return i.length=v,i}})},rDhm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),o=i("mvHQ"),n=i.n(o),r=i("woOf"),l=i.n(r),c=i("NYxO"),u=i("UDo9"),d=i("0xvS"),p=i("Z1j4"),m=i("BvEW"),g=i("vs0y"),h=i("rTqL"),f={mixins:[u.a,d.a],props:["planRow"],components:{SprintCaseDialog:p.default,UpdateResultDialog:g.default,RemarkDialog:h.default,BatchUpdateCasesDlg:m.default},data:function(){return{queryFrom:{caseName:"",priority:[],result:"",executionPhase:"",executionMethod:"handwork",recursive:"1",testerId:"",assignedTo:"",tag:"",sort:"-id"},caseStepTableData:[],caseAttachmentList:[],caseData:null,pageSizes:[10,15,20,25,30,40,50,100,150],pageSize:15,showCaseDialog:!1,caseDialogLoaded:!1,caseDialogEditing:!1,caseDialogTitle:"查看用例",operation:"viewCase",caseIDsSelected:[],caseOrder:0,caseTestResult:"",resultOptions:[{value:"通过",label:"通过"},{value:"失败",label:"失败"},{value:"阻塞",label:"阻塞"},{value:"未执行",label:"未执行"}],updateResultDlgVisible:!1,remarkDialogVisible:!1,currentModule:"testPlanCaseTable",bindBugDialogVisible:!1,userOptions:[],assginedToOld:{},batchAssignedTo:{},priorityOptions:[{label:"P1",value:"P1"},{label:"P2",value:"P2"},{label:"P3",value:"P3"},{label:"P4",value:"P4"}],executionPhaseOptions:[],executedEachSprintDict:{},loading:!1,elementLoadingText:"",updateCasesDlgVisible:!1,casesInfoForUpdate:[],isQueryItemsCollapsed:!0}},methods:{restQueryRowsForm:function(){this.queryFrom.caseName="",this.queryFrom.priority=[],this.queryFrom.executionPhase="",this.queryFrom.executionMethod="handwork",this.queryFrom.result="",this.queryFrom.recursive="1",this.queryFrom.testerId="",this.queryFrom.assignedTo="",this.queryFrom.tag=""},queryRows:function(e,t,i){var a=this;if(-1==this.suiteID||-2==this.suiteID)return this.total=0,void(this.tableData=[]);"clickQuery"==e&&(this.currentPage=1);var s=l()({},this.queryFrom);s.planId=this.planRow.id,s.suiteId=this.suiteID,s.suiteType=this.suiteType,s.pageSize=this.pageSize,s.pageNo=this.currentPage,s.priority=s.priority.join(","),this.$api.testPlanCaseTable.getSuiteCases(s).then(function(e){e.success?(a.total=e.data.total,a.tableData=e.data.rows,t&&t(e.success)):(a.$message.error(e.msg),i&&i(e.success))}).catch(function(e){a.$message.error(e.msg),i&&i(e.success)})},mergeColumns:function(e){var t=e.row,i=(e.column,e.rowIndex,e.columnIndex);if(t.children.length){if(1==i)return[1,8];if(i>1)return[0,0]}},getRowClassName:function(e){return e.row.children.length?"row-class-for-colspan":"row-class"},expandAll:function(){this.$nextTick(function(){for(var e=this.$el.getElementsByClassName("el-table__expand-icon"),t=0;t<e.length;t++)-1==e[t].getAttribute("class").indexOf("el-table__expand-icon--expanded")&&e[t].click()})},openCaseDialog:function(e,t){this.caseDialogLoaded||(this.caseDialogLoaded=!0),this.caseDialogTitle=e,this.caseDialogEditing=t,this.showCaseDialog||(this.showCaseDialog=!0)},updateCaseTestResults:function(){if(!this.updateResultDlgVisible){for(var e=[],t=this.$refs.myTable.selection,i=0;i<t.length;i++)t[i].children.length||e.push(t[i].id);if(!e.length)return void this.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"});this.caseIDsSelected=e,this.updateResultDlgVisible=!0}},onVisibleChange:function(e,t){e&&(this.caseTestResult=t)},onResultChanged:function(e,t){var i=this;this.$api.testPlanCaseTable.updateCaseTestResult({id:t.id,result:t.result,planId:t.testplanId}).then(function(a){if(a.success){for(var s in i.$message.success(a.msg),a.data.caseDataUpdated)s in t&&(t[s]=a.data.caseDataUpdated[s]);for(var o in i.setTestResultStyle(e.$index),a.data.planDataUpdated)o in i.planRow&&(i.planRow[o]=a.data.planDataUpdated[o])}else t.result=i.caseTestResult,i.$message.error(a.msg)}).catch(function(e){t.result=i.caseTestResult,i.$message.error(e.msg)})},batchUpdateTestCases:function(){if(this.showCaseDialog)this.$alert("请关闭当前打开的用例对话框后再操作","提示",{confirmButtonText:"确定"});else{this.elementLoadingText="正在批量更新测试用例，请勿进行其它操作",this.casesInfoForUpdate=[];for(var e=this.$refs.myTable.selection,t=0;t<e.length;t++)e[t].children.length||this.casesInfoForUpdate.push({guid:e[t].guid,suiteId:e[t].suiteId,suite_type:e[t].suiteType,detailSuiteType:e[t].detailSuiteType,testplanId:e[t].testplanId});this.casesInfoForUpdate.length?this.updateCasesDlgVisible||(this.updateCasesDlgVisible=!0):this.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"})}},newCase:function(){var e=[];for(var t in this.executedEachSprintDict)if(this.executedEachSprintDict[t].default){e=[t];break}this.caseData={testplanId:this.planRow.id,suiteId:this.suiteID,productId:this.planRow.productId,sprintId:this.planRow.sprintId,suiteType:this.suiteType,customNo:"",name:"",createrName:"",updaterName:"",priority:"P3",executedEachSprint:"",executionMethod:"handwork",executionPhase:e,suitePath:this.suitePath,precondition:"",steps:[],postcondition:"",tags:[],desc:"",result:"未执行",remark:""},this.operation="newCase",this.openCaseDialog("新建用例",!0)},clickRow:function(e,t,i){var a=this,s=function(){for(var t=0,i=!1,s=0;s<a.tableData.length;s++){var o=a.tableData[s];if(o.children.length){for(var n=0;n<o.children.length;n++){if(t+=1,o.children[n].id==e.id){i=!0;break}}if(i)break}}a.caseOrder=t+(a.currentPage-1)*a.pageSize,a.caseData={testplanId:e.testplanId,suiteId:e.suiteId,productId:e.productId,sprintId:e.sprintId,suiteType:e.suiteType,detailSuiteType:e.detailSuiteType,caseId:e.id,guid:e.guid,customNo:e.customNo,name:e.name,createrName:e.createrName,updaterName:e.updaterName,priority:e.priority,executedEachSprint:e.executedEachSprint,executionMethod:e.executionMethod,executionPhase:e.executionPhase,suitePath:e.suitePath,precondition:e.precondition,steps:JSON.parse(e.steps),postcondition:e.postcondition,desc:e.desc,tags:e.tags},a.operation="viewCase",a.openCaseDialog("查看用例",!1),a.row=e};!e.children.length&&t&&"用例名称"==t.label&&(this.caseDialogEditing?this.$confirm("您有正在编辑的用例，确定离开吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){s()}).catch(function(){}):s())},deleteCase:function(e){var t=this;this.$api.testPlanCaseTable.deleteTestCases({planId:this.planRow.id,caseIds:e}).then(function(i){if(i.success){t.$message.success(i.msg),t.total=t.total-e.length;for(var a=0;a<e.length;a++){for(var s=0;s<t.tableData.length;s++){var o=!1;if(t.tableData[s].children.length){for(var n=0;n<t.tableData[s].children.length;n++)if(t.tableData[s].children[n].id==e[a]){o=!0,t.tableData[s].children.splice(n,1),t.tableData[s].children.length||t.tableData.splice(s,1);break}if(o)break}}for(var r in i.data)r in t.planRow&&(t.planRow[r]=i.data[r]);if(!t.tableData.length&&0!=t.total){var c=Math.ceil(t.total/t.pageSize);return t.currentPage>c&&(t.currentPage-=1),void t.queryRows()}t.tableData=l()([],t.tableData)}}else t.$message.error(i.msg)}).catch(function(e){t.$message.error(e.msg)})},deleteOneCase:function(e,t){var i=this;this.showCaseDialog?this.$alert("请关闭当前打开的用例对话框后再操作","提示",{confirmButtonText:"确定"}):this.$confirm("确定要删除该用例吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.$api.testPlanCaseTable.deleteTestCase({id:t.id,planId:t.testplanId}).then(function(e){if(e.success){i.total=i.total-1,i.$message.success(e.msg);for(var a=0;a<i.tableData.length;a++){var s=!1;if(i.tableData[a].children.length){for(var o=0;o<i.tableData[a].children.length;o++)if(i.tableData[a].children[o].guid==t.guid){s=!0,i.tableData[a].children.splice(o,1),i.tableData[a].children.length||i.tableData.splice(a,1);break}if(s)break}}for(var n in e.data)n in i.planRow&&(i.planRow[n]=e.data[n]);if(!i.tableData.length&&0!=i.total){var r=Math.ceil(i.total/i.pageSize);return i.currentPage>r&&(i.currentPage-=1),void i.queryRows()}i.tableData=l()([],i.tableData)}}).catch(function(e){i.$message.error(e.msg)})}).catch(function(){})},onSelectAllRow:function(e){if(e.indexOf(this.tableData[0])>-1)for(var t=0;t<this.tableData.length;t++)for(var i=0;i<this.tableData[t].children.length;i++)this.$refs.myTable.toggleRowSelection(this.tableData[t].children[i],!0);else this.$refs.myTable.clearSelection()},onSelectRow:function(e,t){var i=void 0;if(e.length)for(var a=0;a<e.length;a++){if(e[a].guid==t.guid){i=!0;break}i=!1}else i=!1;if(t.children.length){for(var s=0;s<this.tableData.length;s++)if(this.tableData[s].guid==t.guid){for(var o=0;o<this.tableData[s].children.length;o++)this.$refs.myTable.toggleRowSelection(this.tableData[s].children[o],i);break}}else for(var n=0;n<this.tableData.length;n++){for(var r=!1,l=0;l<this.tableData[n].children.length;l++)if(this.tableData[n].children[l].guid==t.guid){if(r=!0,i){for(var c=!1,u=0;u<e.length;u++)if(e[u].guid==this.tableData[n].guid){c=!0;break}c||this.$refs.myTable.toggleRowSelection(this.tableData[n],!0)}break}if(r)break}},deleteCaseInBatch:function(){var e=this;this.showCaseDialog?this.$alert("请关闭当前打开的用例对话框后再操作","提示",{confirmButtonText:"确定"}):this.$confirm("确定要删除选中用例吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){for(var t=e.$refs.myTable.selection,i=[],a=0;a<t.length;a++)t[a].children.length||i.push(t[a].id);i.length?e.deleteCase(i):e.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"})}).catch(function(){})},exportTestCase:function(){this.$alert("功能待开发","提示",{confirmButtonText:"确定"})},editRemark:function(e,t){this.remarkDialogVisible||(this.remarkDialogVisible=!0,this.row=t)},getUserOptionsList:function(){var e=this;this.$api.sysUser.getUsersDetails().then(function(t){t.success?e.userOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg)})},onAssignedToVisibleChange:function(e,t){e&&(this.assginedToOld={id:t.assignedToId,name:t.assignedTo})},onAssignedToChanged:function(e){var t=this;l()({},e.assignedTo);this.$api.testPlanCaseTable.updateTestCase({id:e.id,planId:e.testplanId,assignedTo:e.assignedTo.name,assignedToId:e.assignedTo.id}).then(function(i){if(i.success)for(var a in t.$message.success(i.msg),i.data)a in e&&(e[a]=i.data[a]);else e.assignedTo=t.assginedToOld.assignedTo,e.assignedToId=t.assginedToOld.assignedToId,t.$message.error(i.msg)}).catch(function(i){e.assignedTo=t.assginedToOld.name,e.assignedToId=t.assginedToOld.id,t.$message.error(i.msg)})},assignCases:function(){for(var e=this,t=[],i=this.$refs.myTable.selection,a=[],s=0;s<i.length;s++)i[s].children.length||(a.push(i[s].id),t.push(i[s]));a.length?this.batchAssignedTo&&"{}"!=n()(this.batchAssignedTo)?this.$confirm("确定要批量指派给 "+this.batchAssignedTo.name+" 吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){e.$api.testPlanCaseTable.updateTestCases({caseIds:a,batchAssignedTo:e.batchAssignedTo,planId:e.planRow.id}).then(function(i){i.success?(e.$message.success(i.msg),e.$nextTick(function(){for(var e=i.data,a=0;a<e.length;a++)for(var s=0;s<t.length;s++)if(t[s].id==e[a].id){for(var o in e[a])o in t[s]&&"id"!=o&&(t[s][o]=e[a][o]);break}})):e.$message.error(i.msg)}).catch(function(t){e.$message.error(t.msg)})}).catch(function(){}):this.$alert("请选择要指派的对象","提示",{confirmButtonText:"确定"}):this.$alert("未选择用例，请勾选至少一条用例","提示",{confirmButtonText:"确定"})},sortChange:function(e){var t=e.order,i=e.prop;i?"create_time"==(i=this.$customUtils.stringHandler.humpToUnderline(i))&&(i="id"):i="-id",this.queryFrom.sort="descending"==t?"priority"==i?"-"+i+",-id":"-"+i:"priority"==i?i+",id":i,this.queryRows()},getTestPhases:function(){var e=this;this.$api.testPhase.getTestPhasesDetails({fields:"name,code,default"}).then(function(t){if(t.success)for(var i=0;i<t.data.length;i++){var a=t.data[i].name,s=t.data[i].code,o=t.data[i].default,n={label:a,value:s,defualt:o};e.executedEachSprintDict[s]={},e.executedEachSprintDict[s].executedEachSprint="N",e.executedEachSprintDict[s].executionPhase=t.data[i].name,e.executedEachSprintDict[s].default=o,e.executionPhaseOptions.push(n)}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg)})},setTestResultStyle:function(e){if(e+=1,this.$refs.myTable){var t=this.$refs.myTable.$el.querySelector("tr:nth-child("+e+")");if(t){var i=t.querySelector("td:nth-child(5)");if(i){var a=i.querySelector(".el-input__inner"),s=a.value;a.style.cssText="通过"==s?"font-weight:bold;color:green":"阻塞"==s?"font-weight:bold;color:#B22222":"失败"==s?"font-weight:bold;color:red":"font-weight:bold;color:black"}}}},setTestResultsStyle:function(){this.$refs.myTable&&this.$refs.myTable.$el.querySelectorAll("td:nth-child(5)").forEach(function(e,t,i){var a=e.querySelector(".el-input__inner"),s=a.value;a.style.cssText="通过"==s?"font-weight:bold;color:green":"阻塞"==s?"font-weight:bold;color:#B22222":"失败"==s?"font-weight:bold;color:red":"font-weight:bold;color:black"})},toggleQueryItems:function(){this.isQueryItemsCollapsed=!this.isQueryItemsCollapsed}},watch:{suiteID:function(){this.currentPage=1,this.queryRows(),this.caseDialogEditing=!1,this.showCaseDialog=!1,this.caseDialogLoaded=!1}},computed:s()({},Object(c.b)({suiteType:function(e){return e.sprintCaseSuite.suiteType},suiteID:function(e){return e.sprintCaseSuite.suiteID},suitePath:function(e){return e.sprintCaseSuite.suitePath},parentID:function(e){return e.sprintCaseSuite.parentID}}),{iscurrSuiteRoot:{get:function(){return-1==this.parentID}}}),created:function(){try{this.getUserOptionsList(),this.getTestPhases()}catch(e){this.$message.error(e.message)}},updated:function(){var e=this;this.setTableBodySize(),this.expandAll(),this.$nextTick(function(){e.setTestResultsStyle()})}},v=i("XyMi");var b=function(e){i("bU08")},y=Object(v.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:e.setTableBodySize,expression:"setTableBodySize"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"viewWrapper",staticClass:"view-wrapper",attrs:{"element-loading-text":e.elementLoadingText}},[i("div",{ref:"tableToolbar",staticClass:"table-toolbar"},[i("el-button-group",[i("el-button",{attrs:{size:e.buttonSize,type:"primary",disabled:e.showCaseDialog},on:{click:e.updateCaseTestResults}},[e._v("批量修改测试结果")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.batchUpdateTestCases}},[e._v("批量修改用例")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.iscurrSuiteRoot||e.showCaseDialog},on:{click:e.newCase}},[e._v("新建用例")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.deleteCaseInBatch}},[e._v("删除用例")]),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog},on:{click:e.exportTestCase}},[e._v("导出用例")]),e._v(" "),i("el-dropdown",[i("el-button",{attrs:{size:e.buttonSize,disabled:e.showCaseDialog}},[e._v("\n                    更多操作\n                    "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[e._v("待开发操作")])],1)],1)],1),e._v(" "),i("el-button",{attrs:{size:e.buttonSize,type:"primary",disabled:e.showCaseDialog},on:{click:e.assignCases}},[e._v("批量指派给")]),e._v(" "),i("el-select",{staticStyle:{width:"120px"},attrs:{"value-key":"id",filterable:"",clearable:"",placeholder:"请选择",size:e.buttonSize},model:{value:e.batchAssignedTo,callback:function(t){e.batchAssignedTo=t},expression:"batchAssignedTo"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("div",{ref:"queryForm",staticClass:"table-query-form"},[i("el-form",{attrs:{inline:!0,model:e.queryFrom,size:"small"}},[i("el-form-item",{attrs:{label:"测试结果"}},[i("el-select",{staticStyle:{width:"95px"},attrs:{clearable:""},model:{value:e.queryFrom.result,callback:function(t){e.$set(e.queryFrom,"result",t)},expression:"queryFrom.result"}},[i("el-option",{attrs:{label:"未执行",value:"未执行"}}),e._v(" "),i("el-option",{attrs:{label:"通过",value:"通过"}}),e._v(" "),i("el-option",{attrs:{label:"失败",value:"失败"}}),e._v(" "),i("el-option",{attrs:{label:"阻塞",value:"阻塞"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"执行阶段"}},[i("el-select",{staticStyle:{width:"110px"},attrs:{clearable:""},model:{value:e.queryFrom.executionPhase,callback:function(t){e.$set(e.queryFrom,"executionPhase",t)},expression:"queryFrom.executionPhase"}},e._l(e.executionPhaseOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"指派给"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"small"},model:{value:e.queryFrom.assignedTo,callback:function(t){e.$set(e.queryFrom,"assignedTo",t)},expression:"queryFrom.assignedTo"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),e.isQueryItemsCollapsed?e._e():i("span",[i("el-form-item",{attrs:{label:"用例名称"}},[i("el-input",{attrs:{placeholder:"用例名称"},model:{value:e.queryFrom.caseName,callback:function(t){e.$set(e.queryFrom,"caseName",t)},expression:"queryFrom.caseName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"优先级"}},[i("el-select",{staticStyle:{width:"215px"},attrs:{multiple:!0,clearable:""},model:{value:e.queryFrom.priority,callback:function(t){e.$set(e.queryFrom,"priority",t)},expression:"queryFrom.priority"}},[i("el-option",{attrs:{label:"P1",value:"P1"}}),e._v(" "),i("el-option",{attrs:{label:"P2",value:"P2"}}),e._v(" "),i("el-option",{attrs:{label:"P3",value:"P3"}}),e._v(" "),i("el-option",{attrs:{label:"P4",value:"P4"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"执行方式"}},[i("el-select",{staticStyle:{width:"95px"},attrs:{clearable:""},model:{value:e.queryFrom.executionMethod,callback:function(t){e.$set(e.queryFrom,"executionMethod",t)},expression:"queryFrom.executionMethod"}},[i("el-option",{attrs:{label:"手工",value:"handwork"}}),e._v(" "),i("el-option",{attrs:{label:"自动化",value:"automation"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"测试人"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"small"},model:{value:e.queryFrom.testerId,callback:function(t){e.$set(e.queryFrom,"testerId",t)},expression:"queryFrom.testerId"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"是否显示子集用例"}},[i("el-select",{staticStyle:{width:"60px"},model:{value:e.queryFrom.recursive,callback:function(t){e.$set(e.queryFrom,"recursive",t)},expression:"queryFrom.recursive"}},[i("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"标签"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入标签"},model:{value:e.queryFrom.tag,callback:function(t){e.$set(e.queryFrom,"tag",t)},expression:"queryFrom.tag"}})],1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",disabled:e.showCaseDialog},on:{click:function(t){return e.queryRows("clickQuery")}}},[e._v("查询")]),e._v(" "),i("el-button",{on:{click:e.restQueryRowsForm}},[e._v("重置")])],1),e._v(" "),i("span",{staticStyle:{height:"32px","line-height":"32px","font-size":"14px",color:"#606266"},on:{click:function(t){return t.preventDefault(),e.toggleQueryItems(t)}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:!e.isQueryItemsCollapsed,expression:"!isQueryItemsCollapsed"}],staticClass:"el-icon-arrow-up el-icon--right"},[e._v("收起")]),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.isQueryItemsCollapsed,expression:"isQueryItemsCollapsed"}],staticClass:"el-icon-arrow-down el-icon--right"},[e._v("展开")])])],1)],1),e._v(" "),i("el-table",{ref:"myTable",staticClass:"my-table",attrs:{data:e.tableData,"empty-text":e.emptyText,border:"",stripe:"",lazy:!1,"row-key":"guid","span-method":e.mergeColumns,"cell-class-name":e.getCellClassName,"row-class-name":e.getRowClassName,"highlight-current-row":""},on:{"row-click":e.clickRow,select:e.onSelectRow,"select-all":e.onSelectAllRow,"sort-change":e.sortChange}},[i("el-table-column",{attrs:{type:"selection",width:e.checkBoxColWidth,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"用例名称","show-overflow-tooltip":"","header-align":"center",align:"left",sortable:"custom","min-width":"250px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"priority",label:"优先级",width:"90px","header-align":"center",align:"center",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{prop:"assignedTo",label:"指派给",width:"115px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini","value-key":"id"},on:{change:function(i){return e.onAssignedToChanged(t.row)},"visible-change":function(i){return e.onAssignedToVisibleChange(i,t.row)}},model:{value:t.row.assignedTo,callback:function(i){e.$set(t.row,"assignedTo",i)},expression:"scope.row.assignedTo"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)]}}])}),e._v(" "),i("el-table-column",{staticClass:"test-result-class",attrs:{prop:"result",label:"测试结果",width:"90px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(i){return e.onResultChanged(t,t.row)},"visible-change":function(i){return e.onVisibleChange(i,t.row.result)}},model:{value:t.row.result,callback:function(i){e.$set(t.row,"result",i)},expression:"scope.row.result"}},e._l(e.resultOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"testerName",label:"测试人",width:"80px","header-align":"center",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"测试备注",width:"250px","header-align":"center","show-overflow-tooltip":"",align:"left"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"left",width:"175px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.remark?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editRemark(t.$index,t.row)}}},[e._v("修改备注")]):i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editRemark(t.$index,t.row)}}},[e._v("添加备注")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteOneCase(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{ref:"tablePagination",staticClass:"table-pagination",attrs:{layout:"total, sizes, prev, pager, next","hide-on-single-page":!1,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,"pager-count":e.pagerCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("transition",{attrs:{name:"slide-fade"}},[e.caseDialogLoaded?i("sprint-case-dialog",{attrs:{caseDialogLoaded:e.caseDialogLoaded,caseDialogEditing:e.caseDialogEditing,caseDialogTitle:e.caseDialogTitle,caseDialogVisible:e.showCaseDialog,tableData:e.tableData,caseData:e.caseData,row:e.row,currentPage:e.currentPage,pageSize:e.pageSize,total:e.total,operation:e.operation,caseOrder:e.caseOrder,currentModule:e.currentModule,resultOptions:e.resultOptions,planRow:e.planRow,priorityOptions:e.priorityOptions,executionPhaseOptions:e.executionPhaseOptions,executedEachSprintDict:e.executedEachSprintDict},on:{"update:caseDialogLoaded":function(t){e.caseDialogLoaded=t},"update:case-dialog-loaded":function(t){e.caseDialogLoaded=t},"update:caseDialogEditing":function(t){e.caseDialogEditing=t},"update:case-dialog-editing":function(t){e.caseDialogEditing=t},"update:caseDialogTitle":function(t){e.caseDialogTitle=t},"update:case-dialog-title":function(t){e.caseDialogTitle=t},"update:caseDialogVisible":function(t){e.showCaseDialog=t},"update:case-dialog-visible":function(t){e.showCaseDialog=t},"update:tableData":function(t){e.tableData=t},"update:table-data":function(t){e.tableData=t},"update:row":function(t){e.row=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:total":function(t){e.total=t},"update:operation":function(t){e.operation=t},"update:caseOrder":function(t){e.caseOrder=t},"update:case-order":function(t){e.caseOrder=t}}}):e._e()],1),e._v(" "),e.updateResultDlgVisible?i("update-result-dialog",{attrs:{dialogVisible:e.updateResultDlgVisible,resultOptions:e.resultOptions,caseIDsSelected:e.caseIDsSelected,planRow:e.planRow},on:{"update:dialogVisible":function(t){e.updateResultDlgVisible=t},"update:dialog-visible":function(t){e.updateResultDlgVisible=t}}}):e._e(),e._v(" "),e.updateCasesDlgVisible?i("batch-update-cases-dlg",{attrs:{dialogVisible:e.updateCasesDlgVisible,casesInfoForUpdate:e.casesInfoForUpdate,suiteId:e.suiteID,executionPhaseOptions:e.executionPhaseOptions,executedEachSprintDict:e.executedEachSprintDict},on:{"update:dialogVisible":function(t){e.updateCasesDlgVisible=t},"update:dialog-visible":function(t){e.updateCasesDlgVisible=t}}}):e._e(),e._v(" "),e.remarkDialogVisible?i("remark-dialog",{attrs:{dialogVisible:e.remarkDialogVisible,row:e.row},on:{"update:dialogVisible":function(t){e.remarkDialogVisible=t},"update:dialog-visible":function(t){e.remarkDialogVisible=t}}}):e._e()],1)},[],!1,b,null,null);t.default=y.exports},rIxZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("0xiK"),s={props:["dialogVisible","dataForImportCase"],data:function(){return{urlForCaseImport:a.a.urlForCaseImport,caseFormatOptions:[{value:"SYSTEM_EXCEL_TESTCASE_TEPLATE",label:"系统用例模板(Excel)"},{value:"SYSTEM_XMIND_TESTCASE_TEPLATE",label:"系统用例模板(XMind)"}],caseTemplateType:"SYSTEM_EXCEL_TESTCASE_TEPLATE"}},methods:{closeDialog:function(){this.$emit("update:dialogVisible",!1)},importTestcase:function(e){var t=this,i=e.file;if(i.size){var a=i.name.split("."),s=a[a.length-1];if(-1==this.fileTypeAccept.indexOf(s))return this.$message.error("用例模板格式错误，支持的文件格式为："+this.fileTypeAccept),!1;this.$parent.loading=!0;var o=new FormData;o.append("file",i),o.append("productId",this.dataForImportCase.productId),o.append("caseTemplateType",this.caseTemplateType),this.$api.sprintCaseTable.importTestCases(o).then(function(e){e.success?t.$alert(e.msg,"提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,callback:function(e){t.$parent.queryRows()}}):t.$alert(e.msg,"提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0}),t.$parent.loading=!1}).catch(function(e){t.$parent.loading=!1,t.$alert(e.msg||e.message,"提示",{confirmButtonText:"确定"})}),this.closeDialog()}else this.$message.error("上传失败，用例模板为空")}},computed:{fileTypeAccept:{get:function(){return"SYSTEM_EXCEL_TESTCASE_TEPLATE"===this.caseTemplateType?".xls,.xlsx":"SYSTEM_XMIND_TESTCASE_TEPLATE"===this.caseTemplateType?".xmind":""}}}},o=i("XyMi");var n=function(e){i("eYaD")},r=Object(o.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"导入用例",width:"45%",visible:e.dialogVisible,"append-to-body":!0,"show-close":!1}},[i("div",{staticClass:"my-dialog-body"},[i("div",{staticStyle:{margin:"0px 0px 10px 0px"}},[i("el-link",{attrs:{type:"primary",href:"/static/templates/system_testcase_template.xlsx",download:"system_testcase_template.xlsx"}},[e._v("点击下载系统用例模板(Excel)")]),e._v(" "),i("span",{staticStyle:{"margin-right":"30px"}}),e._v(" "),i("el-link",{attrs:{type:"primary",href:"/static/templates/system_testcase_template.xmind",download:"system_testcase_template.xmind"}},[e._v("点击下载系统用例模板(XMind)")])],1),e._v(" "),i("div",{staticStyle:{display:"inline","padding-right":"5px"}},[i("el-select",{attrs:{size:"small",placeholder:"请选择用例模板类型"},model:{value:e.caseTemplateType,callback:function(t){e.caseTemplateType=t},expression:"caseTemplateType"}},e._l(e.caseFormatOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline"},attrs:{action:"fakeAction","http-request":e.importTestcase,"with-credentials":!0,accept:e.fileTypeAccept,"show-file-list":!1}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传用例")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n                注意：\n                "),i("br"),e._v("1、目前仅支持上传excel文件，上传用例文件后，自动导入用例\n                "),i("br"),e._v("2、导入过程中请不要刷新页面，可能耗时较长，因文件大小而不同，用例导入后手动刷新页面查看导入数据\n            ")])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("关闭")])],1)])},[],!1,n,"data-v-7474faa8",null);t.default=r.exports},rTqL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:["dialogVisible","row"],mixins:[i("RHSg").a],data:function(){return{testRemark:this.row.remark}},methods:{save:function(){this.requestData={id:this.row.id,remark:this.testRemark,planId:this.row.testplanId},this.update(this.$api.testPlanCaseTable.updateTestCase)}}},s=i("XyMi");var o=function(e){i("usj6")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"备注信息",width:"50%",visible:e.dialogVisible,"append-to-body":!0,"show-close":e.showClose},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:8},maxlength:"1000","show-word-limit":"",placeholder:"请输入测试备注信息"},model:{value:e.testRemark,callback:function(t){e.testRemark=t},expression:"testRemark"}})],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)])],1)},[],!1,o,"data-v-e0719596",null);t.default=n.exports},ryrX:function(e,t){},"s/JH":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bAqY"),s=i("rDhm"),o=i("KqL6"),n={props:["sprintID","planRow"],components:{SprintCaseSuiteTree:a.default,TestPlanCaseTable:s.default},mixins:[o.a],data:function(){return{currentModule:"planCaseListTab"}},methods:{},mounted:function(){document.body.addEventListener("mousedown",this.mousedown,!1),document.body.addEventListener("mousemove",this.mousemove,!1),document.body.addEventListener("mouseup",this.mouseup,!1)},beforeDestroy:function(){document.body.removeEventListener("mousedown",this.mousedown),document.body.removeEventListener("mousemove",this.mousemove),document.body.removeEventListener("mouseup",this.mouseup)}},r=i("XyMi");var l=function(e){i("57qO")},c=Object(r.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"view-wrapper"},[t("sprint-case-suite-tree",{ref:"leftElement",staticClass:"testplan-casesuite-tree",attrs:{sprintID:this.sprintID,productID:this.planRow.productId,planID:this.planRow.id,currentModule:this.currentModule}}),this._v(" "),t("test-plan-case-table",{ref:"rightElement",staticClass:"testplan-case-table",attrs:{currentModule:this.currentModule,planRow:this.planRow}})],1)},[],!1,l,"data-v-6ad0c114",null);t.default=c.exports},sEOu:function(e,t){},t03P:function(e,t){},ttyz:function(e,t,i){"use strict";var a=i("9C8M"),s=i("LIJb");e.exports=i("qo66")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return a.def(s(this,"Set"),e=0===e?0:e,e)}},a)},uPQg:function(e,t){},up2O:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("w7g/"),s=i("YHwu"),o={components:{NavBar:a.default,SubMainContent:s.default},mounted:function(){this.$customUtils.headerMenu.initMenuComponent()}},n=i("XyMi");var r=function(e){i("7feG")},l=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("nav-bar"),this._v(" "),t("sub-main-content")],1)},[],!1,r,null,null);t.default=l.exports},usj6:function(e,t){},"v+/9":function(e,t){},v2HY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("w7g/"),s=i("YHwu"),o={components:{NavBar:a.default,SubMainContent:s.default}},n=i("XyMi");var r=function(e){i("3IJ6")},l=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tester"},[t("el-container",[t("div",[this._v("\n            主内容区41\n        ")])])],1)},[],!1,r,"data-v-205906d5",null);t.default=l.exports},vlPt:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"PersonalPanel",props:{user:{type:Object,default:{name:"admin",avatar:"@/assets/user.png",role:"超级管理员",registeInfo:"注册时间：2018-12-25 "}}},data:function(){return{}},methods:{logout:function(){var e=this;this.$confirm("确认退出吗?","提示",{type:"warning"}).then(function(){sessionStorage.removeItem("user"),e.$router.push("/login"),e.$api.login.logout().then(function(e){}).catch(function(e){})}).catch(function(){})},showBackupDialog:function(){this.$refs.backupDialog.setBackupVisible(!0)},afterRestore:function(){this.$refs.backupDialog.setBackupVisible(!1),sessionStorage.removeItem("user"),this.$router.push("/login"),this.$api.login.logout().then(function(e){}).catch(function(e){})}},mounted:function(){}},s=i("XyMi");var o=function(e){i("djR7")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personal-panel"},[a("div",{staticClass:"personal-desc",style:{background:this.$store.state.app.themeColor}},[a("div",{staticClass:"avatar-container"},[a("img",{staticClass:"avatar",attrs:{src:i("BriP")}})]),e._v(" "),a("div",{staticClass:"name-role"},[a("span",{staticClass:"sender"},[e._v(e._s(e.user.name)+" - "+e._s(e.user.role))])]),e._v(" "),a("div",{staticClass:"registe-info"},[a("span",{staticClass:"registe-info"},[a("li",{staticClass:"fa fa-clock-o"}),e._v("\n          "+e._s(e.user.registeInfo)+"\n        ")])])]),e._v(" "),a("div",{staticClass:"main-operation"},[a("span",{staticClass:"main-operation-item"},[a("el-button",{attrs:{size:"small",icon:"fa fa-male"}},[e._v(" 个人中心")])],1),e._v(" "),a("span",{staticClass:"main-operation-item"},[a("el-button",{attrs:{size:"small",icon:"fa fa-key"}},[e._v(" 修改密码")])],1)]),e._v(" "),a("div",{staticClass:"personal-footer",on:{click:e.logout}},[a("li",{staticClass:"fa fa-sign-out"}),e._v("\n    退出登录\n  ")])])},[],!1,o,"data-v-d6e7c384",null);t.default=n.exports},vpFl:function(e,t){},vs0y:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:["dialogVisible","resultOptions","caseIDsSelected","planRow","tableData"],mixins:[i("RHSg").a],data:function(){return{testResult:"通过"}},methods:{save:function(){var e=this;this.$api.testPlanCaseTable.updateCaseTestResults({caseIds:this.caseIDsSelected,result:this.testResult,planId:this.planRow.id}).then(function(t){if(t.success)for(var i in e.closeDialog(),e.$message.success(t.msg),e.$parent.queryRows(),t.data.planDataUpdated)i in e.planRow&&(e.planRow[i]=t.data.planDataUpdated[i]);else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}}},s=i("XyMi");var o=function(e){i("gs/3")},n=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"批量修改测试结果",width:"45%",visible:e.dialogVisible,"show-close":e.showClose,"append-to-body":!1,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("批量修改选中记录测试结果为：")]),e._v(" "),i("el-radio-group",{model:{value:e.testResult,callback:function(t){e.testResult=t},expression:"testResult"}},e._l(e.resultOptions,function(e){return i("el-radio",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)])},[],!1,o,"data-v-74063e54",null);t.default=n.exports},"w7g/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o=i("Dd8w"),n=i.n(o),r=i("NYxO"),l=i("xiuv"),c={name:"NavBarMenu",props:["menu","isCollapsed"],methods:{handleRoute:function(e){var t=Object(l.a)(e.url);t||(t=e.url),this.$router.push(t)}}},u=i("XyMi");var d=function(e){i("OqEA")},p={name:"NavBar",data:function(){return{openeds:[]}},components:{NavBarMenu:Object(u.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.menu.children&&e.menu.children.length>0?i("el-submenu",{attrs:{index:""+e.menu.id}},[i("template",{slot:"title"},[i("i",{class:e.menu.icon}),e._v(" "),e.isCollapsed?i("span",{staticStyle:{height:"0",width:"0",visibility:"hidden",display:"inline-block"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.menu.name))]):i("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.menu.name))])]),e._v(" "),e._l(e.menu.children,function(e){return i("NavBarMenu",{key:e.id,attrs:{menu:e}})})],2):i("el-menu-item",{attrs:{index:""+e.menu.id},on:{click:function(t){return e.handleRoute(e.menu)}}},[i("i",{class:e.menu.icon}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.menu.name))])])],1)},[],!1,d,"data-v-aa99ed64",null).exports},watch:{indexOfTopNavMenuActive:function(){this.activeDefaultLeftNavMenu()}},computed:n()({},Object(r.b)({isCollapsed:function(e){return e.app.isCollapsed},indexOfTopNavMenuActive:function(e){return e.app.indexOfTopNavMenuActive},navMenuData:function(e){for(var t=e.menu.navMenuData,i=0;i<t.length;i++){var a=t[i];if(""+a.id==e.app.indexOfTopNavMenuActive)return a.children}}}),{activeIndex:{get:function(){return this.$store.state.app.indexOfLeftNavMenuActive},set:function(e){this.$store.commit("onSelectLeftNavMenu",e)}},mainTabs:{get:function(){return this.$store.state.tab.mainTabs},set:function(e){this.$store.commit("updateMainTabs",e)}},currTabName:{get:function(){return this.$store.state.tab.currTabName},set:function(e){this.$store.commit("updateCurrTabName",e)}}}),mounted:function(){this.activeDefaultLeftNavMenu(),this.$nextTick(function(){for(var e=this.$el.getElementsByClassName("el-submenu__icon-arrow el-icon-arrow-right"),t=0;t<e.length;t++)e[t].style.cssText="height: 0; width: 0;visibility: hidden; display: inline-block;"})},methods:{setNavFoldingState:function(e){for(var t=[],i=0;i<e.length;i++){if(void 0!=e[i].collapsed&&!e[i].collapsed){var a=e[i].id+"";this.openeds.push(a)}e[i].children.length||(t=t.concat(e[i].children))}t.length&&this.setNavFoldingState(t)},activeDefaultLeftNavMenu:function(){var e=sessionStorage.getItem("indexOfLeftNavMenuActive"),t=sessionStorage.getItem("urlOfLeftNavMenuActive");e?(this.activeIndex=e,this.handleSelect(e,[e]),this.$router.push(t)):this.navMenuData.length>0&&this.setNavFoldingState(this.navMenuData)},handleOpen:function(e,t){},handleClose:function(e,t){},getMenuInfo:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[],a={},s=0;s<t.length;s++){if(t[s]&&""+t[s].id==e)return a={name:t[s].name,icon:t[s].icon,title:t[s].name,url:t[s].url};t[s].children&&t[s].children.length>0&&(i=i.concat(t[s].children))}return i.length>0?this.getMenuInfo(e,i):a},handleSelect:function(e,t){if(0==(n=this.mainTabs.filter(function(t){return t.id===e})).length){for(var i=this.$store.state.menu.navMenuData,a={},o=0;o<i.length;o++)if(i[o].children.length>0&&(a=this.getMenuInfo(e,i[o].children),"{}"!=s()(a))){var n={name:e+a.name,title:a.name,icon:a.icon,url:a.url,id:e};this.mainTabs=this.mainTabs.concat([n]),this.currTabName=n.name,this.activeIndex=e,sessionStorage.setItem("indexOfLeftNavMenuActive",e),sessionStorage.setItem("urlOfLeftNavMenuActive",n.url);break}}else this.currTabName=n[0].name,this.activeIndex=e,sessionStorage.setItem("indexOfLeftNavMenuActive",e),sessionStorage.setItem("urlOfLeftNavMenuActive",n[0].url);this.mainTabs.length>=1&&this.$store.commit("onAllTabsClosed",!1)},onCollapse:function(){this.$store.commit("onCollapse"),this.$nextTick(function(){for(var e=this.$el.getElementsByClassName("el-submenu__icon-arrow el-icon-arrow-right"),t=0;t<e.length;t++)e[t].style.cssText="height: 0; width: 0;visibility: hidden; display: inline-block;"}),sessionStorage.setItem("navBarCollapsed",this.$store.state.app.isCollapsed)}}};var m=function(e){i("49DB")},g=Object(u.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"left-nav-wrapper",class:e.isCollapsed?"left-nav-width-collapsed":"left-nav-width"},[i("div",{staticClass:"menu-toggle collapse-toggle",on:{click:function(t){return t.preventDefault(),e.onCollapse(t)}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapsed,expression:"!isCollapsed"}],staticClass:"fa fa-outdent",attrs:{title:"收起"}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.isCollapsed,expression:"isCollapsed"}],staticClass:"fa fa-indent",attrs:{title:"展开"}})]),e._v(" "),i("el-menu",{ref:"navMenu",attrs:{"default-openeds":e.openeds,"default-active":e.activeIndex,collapse:e.isCollapsed,"collapse-transition":!1,"unique-opened":!0},on:{open:e.handleOpen,close:e.handleClose,select:e.handleSelect}},e._l(e.navMenuData,function(t){return i("nav-bar-menu",{key:t.id,attrs:{menu:t,isCollapsed:e.isCollapsed}})}),1)],1)},[],!1,m,"data-v-c7f7087e",null);t.default=g.exports},yGFX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),s=i.n(a),o=i("woOf"),n=i.n(o),r={props:["dialogVisible","dialogTitle","dialogFormData","tableData","row"],mixins:[i("RHSg").a],data:function(){return{dialogForm:n()({},this.dialogFormData),sprintOptions:[],rules:{name:[{required:!0,message:"请填写版本名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],sprint:[{required:!0,message:"请选择版本要关联的迭代",trigger:"change"}],beginTime:[{required:!0,message:"请选择预估起始日期",trigger:"change"}],endTime:[{required:!0,message:"请选择预估结束日期",trigger:"change"}],desc:[{min:0,max:300,message:"不能超过 300 个字符",trigger:"blur"}]}}},methods:{add:function(){var e=this;this.requestData=s()({name:this.dialogForm.name,beginTime:this.dialogForm.beginTime,endTime:this.dialogForm.endTime,desc:this.dialogForm.desc,projectId:this.dialogForm.projectId,productId:this.dialogForm.productId,sprintId:this.dialogForm.sprint.id},"desc",this.dialogForm.desc),this.$api.projectVersion.addProjectVersion(this.requestData).then(function(t){if(t.success){e.$message.success(t.msg),e.closeDialog();var i=t.data;i.sprint=e.dialogForm.sprint.name,i.platformProjectVersionName="",i.platformProjectVersionId="",i.platform="",e.tableData.splice(0,0,i),e.$parent.total+=1,e.tableData.length>e.$parent.pageSize&&e.tableData.splice(-1,1)}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},update:function(){var e=this;this.requestData=s()({id:this.dialogForm.id,name:this.dialogForm.name,beginTime:this.dialogForm.beginTime,endTime:this.dialogForm.endTime,desc:this.dialogForm.desc,projectId:this.dialogForm.projectId,sprintId:this.dialogForm.sprint.id},"desc",this.dialogForm.desc),this.$api.projectVersion.updateProjectVersion(this.requestData).then(function(t){if(t.success){e.$message.success(t.msg),e.closeDialog();var i=t.data;for(var a in i.sprint=e.dialogForm.sprint.name,i)a in e.row&&(e.row[a]=t.data[a])}else e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})},save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(new Date(t.dialogForm.beginTime.replace(/-/g,"/")).getTime()>new Date(t.dialogForm.endTime.replace(/-/g,"/")).getTime())return void t.$message.error("开始日期不能晚于结束日期");t.dialogForm.id?t.update():t.add()}})}},created:function(){var e=this;this.$api.product.getProductSprintsDetails({productId:this.dialogFormData.productId}).then(function(t){t.success?e.sprintOptions=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error(t.msg||t.message)})}},l=i("XyMi");var c=function(e){i("4tkw")},u=Object(l.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,width:"45%",visible:e.dialogVisible,"show-close":e.showClose,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape},on:{close:e.onCloseDialog}},[i("div",{staticClass:"my-dialog-body"},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.rules,"label-width":e.dialogFormLabeWidth}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"关联迭代",prop:"sprint"}},[i("el-select",{attrs:{multiple:!1,"value-key":"id",clearable:"",filterable:"",placeholder:"请选择需要关联的迭代"},model:{value:e.dialogForm.sprint,callback:function(t){e.$set(e.dialogForm,"sprint",t)},expression:"dialogForm.sprint"}},e._l(e.sprintOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"预估开始时间",prop:"beginTime"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"预估开始日期","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.beginTime,callback:function(t){e.$set(e.dialogForm,"beginTime",t)},expression:"dialogForm.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"预估结束日期",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"预估结束时间","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.endTime,callback:function(t){e.$set(e.dialogForm,"endTime",t)},expression:"dialogForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.desc,callback:function(t){e.$set(e.dialogForm,"desc",t)},expression:"dialogForm.desc"}})],1),e._v(" "),i("el-form-item",{staticClass:"dialog-footer-form-item"},[i("div",{staticClass:"my-dialog-footer"},[i("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("dialogForm")}}},[e._v("保存")])],1)])],1)],1)])},[],!1,c,"data-v-3d105f5c",null);t.default=u.exports},yUxu:function(e,t){},yZSO:function(e,t){},zVZV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bAqY"),s=i("Ql+R"),o={mixins:[i("KqL6").a],data:function(){return{products:[],productSelected:"",sprints:[],sprintSelected:"",showSprintCaseSuiteTree:!0,currentModule:"testCaseManagement"}},components:{SprintCaseSuiteTree:a.default,SprintCaseTable:s.default},methods:{getProductsDetails:function(){var e=this;this.productSelected="",this.sprintSelected="",this.sprints=[],this.$api.product.getProductsDetails().then(function(t){if(t.success){e.products=t.data;var i=localStorage.getItem("productIdForTCMg");if(i)i=parseInt(i),e.products.some(function(e){if(e.id==i)return!0})?e.productSelected=i:e.products.length&&(e.productSelected=e.products[0].id);else e.products.length&&(e.productSelected=e.products[0].id);localStorage.setItem("productIdForTCMg",e.productSelected),e.productSelected&&e.getSprintsDetails()}else localStorage.setItem("productIdForTCMg",e.productSelected),e.$message.error(t.msg),e.$store.commit("updateSprintID",e.sprintSelected),e.showSprintCaseSuiteTree=!1,e.$nextTick(function(){e.showSprintCaseSuiteTree=!0})}).catch(function(t){localStorage.setItem("productIdForTCMg",""),e.$message.error(t.msg||t.message),e.$store.commit("updateSprintID",e.sprintSelected),e.showSprintCaseSuiteTree=!1,e.$nextTick(function(){e.resetRightElmentLeftPost(),e.showSprintCaseSuiteTree=!0})})},resetRightElmentLeftPost:function(){this.$refs.rightElement.$el.style.left="322px"},getSprintsDetails:function(){var e=this;this.sprintSelected="",this.sprints=[],this.$api.product.getProductSprintsDetails({productId:this.productSelected}).then(function(t){if(t.success){e.sprints=t.data;var i=localStorage.getItem("sprintIdForTCMg");if(i)i=parseInt(i),e.sprints.some(function(e){if(e.id==i)return!0})?e.sprintSelected=i:e.sprints.length&&(e.sprintSelected=e.sprints[0].id);else e.sprints.length&&(e.sprintSelected=e.sprints[0].id);localStorage.setItem("sprintIdForTCMg",e.sprintSelected)}else e.$message.error(t.msg);e.$store.commit("updateSprintID",e.sprintSelected),e.showSprintCaseSuiteTree=!1,e.$nextTick(function(){e.resetRightElmentLeftPost(),e.showSprintCaseSuiteTree=!0})}).catch(function(t){e.$store.commit("updateSprintID",e.sprintSelected),localStorage.setItem("sprintIdForTCMg",e.sprintSelected),e.$message.error(t.msg||t.message),e.showSprintCaseSuiteTree=!1,e.$nextTick(function(){e.resetRightElmentLeftPost(),e.showSprintCaseSuiteTree=!0})})},onProductChange:function(e){e||(this.productSelected=""),localStorage.setItem("productIdForTCMg",this.productSelected),this.getSprintsDetails()},onSprintChange:function(e){var t=this;e||(this.sprintSelected=""),this.$store.commit("updateSprintID",this.sprintSelected),localStorage.setItem("sprintIdForTCMg",this.sprintSelected),this.showSprintCaseSuiteTree=!1,this.$nextTick(function(){t.resetRightElmentLeftPost(),t.showSprintCaseSuiteTree=!0})},onClearSprintSelected:function(){this.$store.commit("updateSprintID",""),localStorage.setItem("sprintIdForTCMg","")}},created:function(){this.getProductsDetails()},mounted:function(){document.body.addEventListener("mousedown",this.mousedown,!1),document.body.addEventListener("mousemove",this.mousemove,!1),document.body.addEventListener("mouseup",this.mouseup,!1)},beforeDestroy:function(){document.body.removeEventListener("mousedown",this.mousedown),document.body.removeEventListener("mousemove",this.mousemove),document.body.removeEventListener("mouseup",this.mouseup)}},n=i("XyMi");var r=function(e){i("6W0o")},l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"view-wrapper"},[i("div",{staticClass:"common-top-bar-wrapper"},[i("span",[e._v("产品")]),e._v(" "),i("el-select",{attrs:{filterable:"",size:"small",placeholder:"输入搜索关键词"},on:{change:e.onProductChange},model:{value:e.productSelected,callback:function(t){e.productSelected=t},expression:"productSelected"}},e._l(e.products,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" \n        "),i("span",[e._v("迭代")]),e._v(" "),i("el-select",{attrs:{filterable:"",clearable:"",size:"small",placeholder:"输入搜索关键词"},on:{clear:e.onClearSprintSelected,change:e.onSprintChange},model:{value:e.sprintSelected,callback:function(t){e.sprintSelected=t},expression:"sprintSelected"}},e._l(e.sprints,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),e.showSprintCaseSuiteTree?i("sprint-case-suite-tree",{ref:"leftElement",staticClass:"sprint-case-suite-tree",attrs:{sprintID:e.sprintSelected,productID:e.productSelected,currentModule:e.currentModule}}):e._e(),e._v(" "),i("sprint-case-table",{ref:"rightElement",staticClass:"sprint-case-table",attrs:{sprintID:e.sprintSelected,productID:e.productSelected,currentModule:e.currentModule}})],1)},[],!1,r,"data-v-6d8f0f74",null);t.default=l.exports},zZ8Y:function(e,t){},zcZX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o=i("woOf"),n=i.n(o),r=i("GgiA"),l=i("DIPh"),c=i("0xiK"),u={data:function(){return{planID:0,caseCustomNo:"",currentModule:"testPlanCaseDetail",caseEditing:!1,caseInfo:{},caseStepTableData:[],caseStepOeration:"viewCaseStep",stepRowData:[],caseStepRowSelected:[],caseStepIDsDeleted:[],tagInputVisible:!1,tagInputValue:"",urlForCaseAttachmentUpload:c.a.urlForCaseAttachmentUpload,caseAttachmentNumlimit:c.a.caseAttachmentNumlimit,caseAttachmentList:[]}},components:{HeaderBar:r.default,Footer:l.default},methods:{editCase:function(){this.caseEditing||(this.caseEditing=!0)},cancelCaseEditing:function(){var e=this;this.$confirm("当前内容没保存，确认取消吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){e.caseEditing=!1}).catch(function(){})},caseInfoCheck:function(){return!!this.caseInfo.name||(this.$message.error("用例名称不能为空"),!1)},saveCase:function(){var e=this;this.$confirm("确定提交吗?","提示",{type:"info"}).then(function(){e.caseInfoCheck()&&(e.caseInfo.suiteType="testPlan",e.$api.sprintCaseDialog.updateTestCase({caseInfo:e.caseInfo,caseSteps:e.caseStepTableData,attachmentList:e.caseAttachmentList}).then(function(t){t.success?(e.$message({message:t.msg,type:"success"}),e.caseEditing=!1):e.$message.error(t.msg)}).catch(function(t){e.$message.error("更新用例失败："+t.msg||t.message)}))}).catch(function(){})},dblclickStepRow:function(e,t,i){this.editCaseStep(null,e)},editCaseStep:function(e,t){!t.editing&&this.caseEditing&&(this.stepRowData=n()({},t),t.editing=!0,this.caseStepOeration="editCaseStep")},finishCaseStepEditing:function(e,t){t.editing&&(t.editing=!1)},cancelCaseStepEditing:function(e,t){if(t.editing&&(t.editing=!1),"newCaseStep"==this.caseStepOeration)this.caseStepTableData.splice(e,1);else if("editCaseStep"==this.caseStepOeration)for(var i in t)i in this.stepRowData&&(t[i]=this.stepRowData[i])},addStep:function(e,t){this.caseStepOeration="newCaseStep",this.caseStepTableData.splice(e,0,t)},addCaseStep:function(){this.addStep(this.caseStepTableData.length,{action:"",expection:"",editing:!0})},insertCaseStep:function(e,t){this.addStep(e+1,{action:"",expection:"",editing:!0})},deleteOneCaseStep:function(e,t){var i=this;this.$confirm("确定要删除该步骤吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){i.caseStepTableData.splice(e,1),t.id&&i.caseStepIDsDeleted.push(t.id)}).catch(function(){})},onSelectChange:function(e){this.caseStepRowSelected=e},deleteCaseStepsInBatch:function(){var e=this;this.$confirm("确定要删除选中步骤吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",cancelButtonClass:"btn-custom-cancel"}).then(function(){if(e.caseStepRowSelected.length)for(var t=0;t<e.caseStepRowSelected.length;t++)for(var i=0;i<e.caseStepTableData.length;i++)e.caseStepTableData[i]==e.caseStepRowSelected[t]&&(e.caseStepTableData.splice(i,1),e.caseStepRowSelected[t].id&&e.caseStepIDsDeleted.push(e.caseStepRowSelected[t].id));else e.$alert("未选择步骤，请勾选至少一条步骤","提示",{confirmButtonText:"确定"})}).catch(function(){})},onCloseTag:function(e){this.caseInfo.tags.splice(this.caseInfo.tags.indexOf(e),1)},showTagInput:function(){var e=this;this.tagInputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleTagInputConfirm:function(){var e=this.tagInputValue;e&&-1==this.caseInfo.tags.indexOf(e)&&this.caseInfo.tags.push(e),this.tagInputVisible=!1,this.tagInputValue=""},beforeAttachmentUpload:function(e){return!!e.size||(this.$message({message:"待上传附件内容为空，请重新选择文件",type:"warning"}),!1)},onAttachmentUploadSuccess:function(e,t,i){for(var a=0;a<i.length;a++)if(i[a].uid==t.uid){i.splice(a,1);break}e.success?(this.$message({message:e.msg,type:"success"}),this.caseAttachmentList.push(e.data),this.caseEditing||(this.caseEditing=!0)):(this.caseAttachmentList=i,this.$message.error(e.msg))},onAttachmentUploadError:function(e,t,i){this.$message.error("上传附件失败"),console.log(e)},onAttachmentUploadNumExceed:function(e,t){this.$message.error("上传附件失败，最多只能上传"+this.caseAttachmentNumlimit+"个附件")},onRemoveCaseAttachment:function(e,t){this.caseAttachmentList=t,this.caseEditing||(this.caseEditing=!0)}},created:function(){var e=this;"{}"!=s()(this.$route.query)?(this.planID=this.$route.query.planID,this.caseCustomNo=this.$route.query.caseCustomNo,this.planID?this.caseCustomNo?this.$api.testPlanBugTable.getPlanRelatedCase({planID:this.planID,caseCustomNo:this.caseCustomNo}).then(function(t){t.success?e.caseInfo=t.data:e.$message.error(t.msg)}).catch(function(t){e.$message.error("获取用例信息失败"+t.msg||t.message)}):this.$message({message:"程序错误，获取的url参数(caseCustomNo)为空",type:"error"}):this.$message({message:"程序错误，获取的url参数(planID)为空",type:"error"})):this.$message({message:"程序错误，获取url参数信息失败",type:"error"})}},d=i("XyMi");var p=function(e){i("PHpH")},m=Object(d.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"testplan-case-detail-content-div"},[i("el-container",[i("el-header",[i("keep-alive",[i("header-bar",{attrs:{currentModule:e.currentModule}})],1)],1),e._v(" "),i("div",{staticClass:"plan-case-detail-content"},[i("div",{staticClass:"case-detail-div"},[e.caseEditing?i("el-button",{attrs:{size:"small"},on:{click:e.cancelCaseEditing}},[i("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}}),e._v("取消\n        ")]):i("el-button",{attrs:{size:"small"},on:{click:e.editCase}},[i("i",{staticClass:"fa fa-edit",attrs:{"aria-hidden":"true"}}),e._v("编辑\n        ")]),e._v(" "),e.caseEditing?i("el-button",{attrs:{size:"small"},on:{click:e.saveCase}},[i("i",{staticClass:"fa fa-floppy-o",attrs:{"aria-hidden":"true"}}),e._v("保存\n        ")]):e._e()],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",[e._v("用例编号：")]),e._v(" "),e.caseEditing?i("el-input",{attrs:{placeholder:"请输入用例唯一编号",minlength:"1",maxlength:"60",size:"small",clearable:""},model:{value:e.caseInfo.customNo,callback:function(t){e.$set(e.caseInfo,"customNo",t)},expression:"caseInfo.customNo"}}):i("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.caseInfo.customNo))]),e._v(" "),i("br"),e._v(" "),i("span",[e._v("用例名称：")]),e._v(" "),e.caseEditing?i("el-input",{attrs:{placeholder:"请输入用例名称",minlength:"1",maxlength:"60",size:"small",clearable:""},model:{value:e.caseInfo.name,callback:function(t){e.$set(e.caseInfo,"name",t)},expression:"caseInfo.name"}}):i("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.caseInfo.name))])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("div",{staticStyle:{display:"inline-block","margin-right":"20px"}},[i("span",[e._v("创建人："+e._s(e.caseInfo.createrName))])]),e._v(" "),i("div",{staticStyle:{display:"inline-block","margin-right":"20px"}},[i("span",[e._v("更新人："+e._s(e.caseInfo.updaterName))])]),e._v(" "),i("div",{staticStyle:{display:"inline-block","padding-left":"20px","padding-right":"20px"}},[i("span",[e._v("优先级")]),e._v("：\n          "),e.caseEditing?i("el-select",{ref:"casePrioritySelect",staticStyle:{width:"100px"},attrs:{clearable:"",size:"mini"},model:{value:e.caseInfo.priority,callback:function(t){e.$set(e.caseInfo,"priority",t)},expression:"caseInfo.priority"}},[i("el-option",{attrs:{label:"P1",value:"P1"}}),e._v(" "),i("el-option",{attrs:{label:"P2",value:"P2"}}),e._v(" "),i("el-option",{attrs:{label:"P3",value:"P3"}}),e._v(" "),i("el-option",{attrs:{label:"P4",value:"P4"}})],1):i("span",[e._v(e._s(e.caseInfo.priority))])],1),e._v(" "),i("div",{staticStyle:{display:"inline-block","padding-left":"20px","padding-right":"40px"}},[i("span",[e._v("用例类型：")]),e._v(" "),e.caseEditing?i("el-select",{ref:"typeSelect",staticStyle:{width:"100px"},attrs:{clearable:"",size:"mini"},model:{value:e.caseInfo.type,callback:function(t){e.$set(e.caseInfo,"type",t)},expression:"caseInfo.type"}},[i("el-option",{attrs:{label:"功能",value:"功能"}}),e._v(" "),i("el-option",{attrs:{label:"接口",value:"接口"}}),e._v(" "),i("el-option",{attrs:{label:"自动化",value:"自动化"}})],1):i("span",[e._v(e._s(e.caseInfo.type))])],1),e._v(" "),i("div",{staticStyle:{display:"inline-block"}},[i("span",[e._v("测试集："+e._s(e.caseInfo.suitePath))])])]),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",[e._v("前置条件：")]),e._v(" "),e.caseEditing?i("el-input",{ref:"preconditionInput",attrs:{type:"textarea",placeholder:"请输入前置条件",maxlength:"30","show-word-limit":""},model:{value:e.caseInfo.precondition,callback:function(t){e.$set(e.caseInfo,"precondition",t)},expression:"caseInfo.precondition"}}):i("span",[e._v(e._s(e.caseInfo.precondition))])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[e._v("\n        测试步骤：\n        "),e._v(" "),e.caseEditing?i("el-row",[i("el-button-group",[i("el-button",{attrs:{size:"mini"},on:{click:e.addCaseStep}},[e._v("新增")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.deleteCaseStepsInBatch}},[e._v("删除")])],1),e._v(" "),i("span",[e._v("说明：双击以下步骤行可以进入编辑状态")])],1):e._e(),e._v(" "),i("el-table",{staticStyle:{width:"100%","margin-bottom":"0px",overflow:"auto"},attrs:{data:e.caseStepTableData,border:""},on:{"row-dblclick":e.dblclickStepRow,"selection-change":e.onSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:"35px",align:"center",resizable:!1}}),e._v(" "),i("el-table-column",{attrs:{type:"index",align:"center",resizable:!1}}),e._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"65px","header-align":"center",align:"center",resizable:!1}}),e._v(" "),i("el-table-column",{attrs:{prop:"action",label:"步骤动作","min-width":"250px","show-overflow-tooltip":"","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?i("span",[i("el-input",{attrs:{type:"textarea",size:"small",placeholder:"请输入步骤动作"},model:{value:t.row.action,callback:function(i){e.$set(t.row,"action",i)},expression:"scope.row.action"}})],1):i("span",[e._v(e._s(t.row.action))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"expection",label:"预期结果","min-width":"250px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?i("span",[i("el-input",{attrs:{type:"textarea",size:"small",placeholder:"请输入步骤预期结果"},model:{value:t.row.expection,callback:function(i){e.$set(t.row,"expection",i)},expression:"scope.row.expection"}})],1):i("span",[e._v(e._s(t.row.expection))])]}}])}),e._v(" "),e.caseEditing?i("el-table-column",{attrs:{label:"操作",align:"center",width:"220px",resizable:!1},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?e._e():i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.editCaseStep(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),t.row.editing?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.finishCaseStepEditing(t.$index,t.row)}}},[e._v("完成")]):e._e(),e._v(" "),t.row.editing?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.cancelCaseStepEditing(t.$index,t.row)}}},[e._v("取消")]):e._e(),e._v(" "),t.row.editing?e._e():i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.insertCaseStep(t.$index,t.row)}}},[e._v("插入")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteOneCaseStep(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,181006278)}):e._e()],1)],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",[e._v("后置条件：")]),e._v(" "),e.caseEditing?i("el-input",{ref:"postconditionInput",attrs:{type:"textarea",placeholder:"请输入后置条件",maxlength:"30","show-word-limit":""},model:{value:e.caseInfo.postcondition,callback:function(t){e.$set(e.caseInfo,"postcondition",t)},expression:"caseInfo.postcondition"}}):i("span",[e._v(e._s(e.caseInfo.postcondition))])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",{staticStyle:{"margin-right":"10px"}},[e._v("用例标签：")]),e._v(" "),e._l(this.caseInfo.tags,function(t){return i("el-tag",{key:t,attrs:{closable:e.caseEditing,"disable-transitions":!0},on:{close:function(i){return e.onCloseTag(t)}}},[e._v(e._s(t))])}),e._v(" "),e.tagInputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleTagInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleTagInputConfirm(t)}},model:{value:e.tagInputValue,callback:function(t){e.tagInputValue=t},expression:"tagInputValue"}}):e.caseEditing?i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showTagInput}},[e._v("+点击新增标签")]):e._e()],2),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("span",[e._v("用例描述：")]),e._v(" "),e.caseEditing?i("el-input",{ref:"descInput",attrs:{type:"textarea",placeholder:"请输入用例描述",maxlength:"1000","show-word-limit":""},model:{value:e.caseInfo.desc,callback:function(t){e.$set(e.caseInfo,"desc",t)},expression:"caseInfo.desc"}}):i("span",{staticStyle:{"padding-right":"20px"}},[e._v(e._s(e.caseInfo.desc))])],1),e._v(" "),i("div",{staticClass:"case-detail-div"},[i("el-upload",{staticClass:"upload-demo",attrs:{action:e.urlForCaseAttachmentUpload,"on-success":e.onAttachmentUploadSuccess,"on-error":e.onAttachmentUploadError,"before-upload":e.beforeAttachmentUpload,"file-list":e.caseAttachmentList,"on-remove":e.onRemoveCaseAttachment,limit:e.caseAttachmentNumlimit,"on-exceed":e.onAttachmentUploadNumExceed,"with-credentials":!0}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传附件")])],1)],1),e._v(" "),e.caseEditing||"testPlanCaseTable"==e.currentModule?e._e():i("div",{staticClass:"case-detail-div"},[i("el-button",{attrs:{size:"mini"}},[e._v("\n          关联缺陷 \n          "),i("i",{staticClass:"fa fa-link",attrs:{"aria-hidden":"true"}})])],1)]),e._v(" "),i("el-footer",[i("keep-alive",[i("Footer")],1)],1)],1)],1)},[],!1,p,"data-v-124fced9",null);t.default=m.exports},zkII:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("w7g/"),s=i("YHwu"),o={components:{NavBar:a.default,SubMainContent:s.default},mounted:function(){this.$customUtils.headerMenu.initMenuComponent()}},n=i("XyMi");var r=function(e){i("O6S3")},l=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("nav-bar"),this._v(" "),t("sub-main-content")],1)},[],!1,r,null,null);t.default=l.exports}});
//# sourceMappingURL=0.ff057b7feb9001d15309.js.map